var To=Object.defineProperty;var Ro=(t,e,n)=>e in t?To(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _e=(t,e,n)=>Ro(t,typeof e!="symbol"?e+"":e,n);import{r as Ce,c as Oo,s as Kn,a as Io,b as Hn}from"./ccc-C6OZp4C3.js";function Lo(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function Bo(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),u=i.charCodeAt(0);if(n[u]!==255)throw new TypeError(i+" is ambiguous");n[u]=s}var o=t.length,d=t.charAt(0),p=Math.log(o)/Math.log(256),E=Math.log(256)/Math.log(o);function l(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var h=0,b=0,c=0,g=S.length;c!==g&&S[c]===0;)c++,h++;for(var _=(g-c)*E+1>>>0,y=new Uint8Array(_);c!==g;){for(var m=S[c],R=0,O=_-1;(m!==0||R<b)&&O!==-1;O--,R++)m+=256*y[O]>>>0,y[O]=m%o>>>0,m=m/o>>>0;if(m!==0)throw new Error("Non-zero carry");b=R,c++}for(var L=_-b;L!==_&&y[L]===0;)L++;for(var z=d.repeat(h);L<_;++L)z+=t.charAt(y[L]);return z}function w(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var h=0;if(S[h]!==" "){for(var b=0,c=0;S[h]===d;)b++,h++;for(var g=(S.length-h)*p+1>>>0,_=new Uint8Array(g);S[h];){var y=n[S.charCodeAt(h)];if(y===255)return;for(var m=0,R=g-1;(y!==0||m<c)&&R!==-1;R--,m++)y+=o*_[R]>>>0,_[R]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");c=m,h++}if(S[h]!==" "){for(var O=g-c;O!==g&&_[O]===0;)O++;for(var L=new Uint8Array(b+(g-O)),z=b;O!==g;)L[z++]=_[O++];return L}}}function A(S){var h=w(S);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:w,decode:A}}var No=Bo,ko=No;class Co{constructor(e,n,r){_e(this,"name");_e(this,"prefix");_e(this,"baseEncode");this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Do{constructor(e,n,r){_e(this,"name");_e(this,"prefix");_e(this,"baseDecode");_e(this,"prefixCodePoint");if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ui(this,e)}}class Mo{constructor(e){_e(this,"decoders");this.decoders=e}or(e){return Ui(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r!=null)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function Ui(t,e){return new Mo({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class Po{constructor(e,n,r,s){_e(this,"name");_e(this,"prefix");_e(this,"baseEncode");_e(this,"baseDecode");_e(this,"encoder");_e(this,"decoder");this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Co(e,n,r),this.decoder=new Do(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function ji({name:t,prefix:e,encode:n,decode:r}){return new Po(t,e,n,r)}function $i({name:t,prefix:e,alphabet:n}){const{encode:r,decode:s}=ko(n,t);return ji({prefix:e,name:t,encode:r,decode:i=>Lo(s(i))})}function Uo(t,e,n,r){const s={};for(let E=0;E<e.length;++E)s[e[E]]=E;let i=t.length;for(;t[i-1]==="=";)--i;const u=new Uint8Array(i*n/8|0);let o=0,d=0,p=0;for(let E=0;E<i;++E){const l=s[t[E]];if(l===void 0)throw new SyntaxError(`Non-${r} character`);d=d<<n|l,o+=n,o>=8&&(o-=8,u[p++]=255&d>>o)}if(o>=n||(255&d<<8-o)!==0)throw new SyntaxError("Unexpected end of data");return u}function jo(t,e,n){const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",u=0,o=0;for(let d=0;d<t.length;++d)for(o=o<<8|t[d],u+=8;u>n;)u-=n,i+=e[s&o>>u];if(u!==0&&(i+=e[s&o<<n-u]),r)for(;(i.length*n&7)!==0;)i+="=";return i}function Oe({name:t,prefix:e,bitsPerChar:n,alphabet:r}){return ji({prefix:e,name:t,encode(s){return jo(s,r,n)},decode(s){return Uo(s,r,n,t)}})}Oe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});Oe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});Oe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});Oe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});Oe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});Oe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});Oe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});Oe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const wr=Oe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),At=$i({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});$i({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});Oe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});Oe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const $e=Oe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});Oe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function $o(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function qo(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function gr(t){const n=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[r,s]=n;return s}var lt=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(u){u(i)})}return new(n||(n=Promise))(function(i,u){function o(E){try{p(r.next(E))}catch(l){u(l)}}function d(E){try{p(r.throw(E))}catch(l){u(l)}}function p(E){E.done?i(E.value):s(E.value).then(o,d)}p((r=r.apply(t,e||[])).next())})},mr=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(u){return new Promise(function(o,d){u=t[i](u),s(o,d,u.done,u.value)})}}function s(i,u,o,d){Promise.resolve(d).then(function(p){i({value:p,done:o})},u)}};const Tt=new TextEncoder,et=new TextDecoder;class de{constructor(e,n){this.data=e,this.format=n}static arrayBuffer(e){return new de(e,"ArrayBuffer")}static asyncIterable(e){if(!qo(e))throw new TypeError("Input must be of type AsyncIterable.");return new de(e,"AsyncIterable")}static base32Z(e){return new de(e,"Base32Z")}static base58Btc(e){return new de(e,"Base58Btc")}static base64Url(e){return new de(e,"Base64Url")}static bufferSource(e){return new de(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new de(e,"Hex")}static multibase(e){return new de(e,"Multibase")}static object(e){return new de(e,"Object")}static string(e){return new de(e,"String")}static uint8Array(e){return new de(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return At.baseDecode(this.data).buffer;case"Base64Url":return $e.baseDecode(this.data).buffer;case"BufferSource":{if(gr(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return $o(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return lt(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return wr.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return At.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return At.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return $e.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return $e.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),n=Tt.encode(e);return $e.baseEncode(n)}case"String":{const e=Tt.encode(this.data);return $e.baseEncode(e)}case"Uint8Array":return $e.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return lt(this,void 0,void 0,function*(){var e,n,r,s;switch(this.format){case"AsyncIterable":{const d=[];try{for(var i=!0,u=mr(this.data),o;o=yield u.next(),e=o.done,!e;i=!0){s=o.value,i=!1;const E=s;d.push(E)}}catch(E){n={error:E}}finally{try{!i&&!e&&(r=u.return)&&(yield r.call(u))}finally{if(n)throw n.error}}return new Blob(d)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},(n,r)=>r.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const n=this.toUint8Array();return de.uint8Array(n).toHex()}case"Base64Url":{const n=this.toUint8Array();return de.uint8Array(n).toHex()}case"Uint8Array":{let n="";for(let r=0;r<this.data.length;r++)n+=e[this.data[r]];return n}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=$e.baseDecode(this.data),n=et.decode(e);return JSON.parse(n)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=et.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return lt(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return et.decode(this.data);case"Base64Url":{const e=$e.baseDecode(this.data);return et.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return et.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return lt(this,void 0,void 0,function*(){var e,n,r,s;switch(this.format){case"AsyncIterable":{let d="";try{for(var i=!0,u=mr(this.data),o;o=yield u.next(),e=o.done,!e;i=!0){s=o.value,i=!1;const p=s;typeof p=="string"?d+=p:d+=et.decode(p,{stream:!0})}}catch(p){n={error:p}}finally{try{!i&&!e&&(r=u.return)&&(yield r.call(u))}finally{if(n)throw n.error}}return d+=et.decode(void 0,{stream:!1}),d}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return wr.baseDecode(this.data);case"Base58Btc":return At.baseDecode(this.data);case"Base64Url":return $e.baseDecode(this.data);case"BufferSource":{const e=gr(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let n=0;n<this.data.length;n+=2){const r=parseInt(this.data.substring(n,n+2),16);if(isNaN(r))throw new TypeError("Input is not a valid hexadecimal string.");e[n/2]=r}return e}case"Object":{const e=JSON.stringify(this.data);return Tt.encode(e)}case"String":return Tt.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return lt(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}}var gt;(function(t){t.Debug="debug",t.Silent="silent"})(gt||(gt={}));class Vo{constructor(){this.logLevel=gt.Silent}setLogLevel(e){this.logLevel=e}log(e){this.info(e)}info(e){this.logLevel,gt.Silent}error(e){this.logLevel,gt.Silent}}const Fo=new Vo;typeof window<"u"&&(window.web5logger=Fo);var Wo=qi,_r=128,Ko=-128,Ho=Math.pow(2,31);function qi(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Ho;)e[n++]=t&255|_r,t/=128;for(;t&Ko;)e[n++]=t&255|_r,t>>>=7;return e[n]=t|0,qi.bytes=n-r+1,e}var Go=Gn,zo=128,Er=127;function Gn(t,r){var n=0,r=r||0,s=0,i=r,u,o=t.length;do{if(i>=o)throw Gn.bytes=0,new RangeError("Could not decode varint");u=t[i++],n+=s<28?(u&Er)<<s:(u&Er)*Math.pow(2,s),s+=7}while(u>=zo);return Gn.bytes=i-r,n}var Yo=Math.pow(2,7),Zo=Math.pow(2,14),Jo=Math.pow(2,21),Xo=Math.pow(2,28),Qo=Math.pow(2,35),es=Math.pow(2,42),ts=Math.pow(2,49),ns=Math.pow(2,56),rs=Math.pow(2,63),is=function(t){return t<Yo?1:t<Zo?2:t<Jo?3:t<Xo?4:t<Qo?5:t<es?6:t<ts?7:t<ns?8:t<rs?9:10},os={encode:Wo,decode:Go,encodingLength:is},Ut=os;function vr(t,e=0){return[Ut.decode(t,e),Ut.decode.bytes]}function ss(t,e,n=0){return Ut.encode(t,e,n),e}function as(t){return Ut.encodingLength(t)}class me{static addPrefix(e){var n;let{code:r,data:s,name:i}=e;if(!(i?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(r=me.codeToName.has(r)?r:me.nameToCode.get(i),r===void 0)throw new Error(`Unsupported multicodec: ${(n=e.name)!==null&&n!==void 0?n:e.code}`);const u=as(r),o=new Uint8Array(u+s.byteLength);return o.set(s,u),ss(r,o),o}static getCodeFromData(e){const{prefixedData:n}=e,[r]=vr(n);return r}static getCodeFromName(e){const{name:n}=e,r=me.nameToCode.get(n);if(r===void 0)throw new Error(`Unsupported multicodec: ${n}`);return r}static getNameFromCode(e){const{code:n}=e,r=me.codeToName.get(n);if(r===void 0)throw new Error(`Unsupported multicodec: ${n}`);return r}static registerCodec(e){me.codeToName.set(e.code,e.name),me.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:n}=e,[r,s]=vr(n),i=me.codeToName.get(r);if(i===void 0)throw new Error(`Unsupported multicodec: ${r}`);return{code:r,data:n.slice(s),name:i}}}me.codeToName=new Map;me.nameToCode=new Map;me.registerCodec({code:237,name:"ed25519-pub"});me.registerCodec({code:4864,name:"ed25519-priv"});me.registerCodec({code:236,name:"x25519-pub"});me.registerCodec({code:4866,name:"x25519-priv"});me.registerCodec({code:231,name:"secp256k1-pub"});me.registerCodec({code:4865,name:"secp256k1-priv"});function Vi(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&Vi(t[e])})}var Zt={},Jt={},He={},Rt={},Xt={},Sr;function fs(){return Sr||(Sr=1,Xt.supports=function(...e){const n=e.reduce((r,s)=>Object.assign(r,s),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}),Xt}var Qt={},en,xr;function Ue(){return xr||(xr=1,en=class extends Error{constructor(e,n){super(e||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}),en}var Ge={},tn,Ar;function Fi(){if(Ar)return tn;Ar=1;let t=null;return tn=function(){return t===null&&(t={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),t},tn}var dt={},nn={},Tr;function Wi(){if(Tr)return nn;Tr=1;const t=Ue(),e=new Set(["buffer","view","utf8"]);class n{constructor(s){if(this.encode=s.encode||this.encode,this.decode=s.decode||this.decode,this.name=s.name||this.name,this.format=s.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!e.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");s.createViewTranscoder&&(this.createViewTranscoder=s.createViewTranscoder),s.createBufferTranscoder&&(this.createBufferTranscoder=s.createBufferTranscoder),s.createUTF8Transcoder&&(this.createUTF8Transcoder=s.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}return nn.Encoding=n,nn}var Rr;function Ki(){if(Rr)return dt;Rr=1;const{Buffer:t}=Ce()||{},{Encoding:e}=Wi(),n=Fi();class r extends e{constructor(o){super({...o,format:"buffer"})}createViewTranscoder(){return new s({encode:this.encode,decode:o=>this.decode(t.from(o.buffer,o.byteOffset,o.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class s extends e{constructor(o){super({...o,format:"view"})}createBufferTranscoder(){return new r({encode:o=>{const d=this.encode(o);return t.from(d.buffer,d.byteOffset,d.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class i extends e{constructor(o){super({...o,format:"utf8"})}createBufferTranscoder(){return new r({encode:o=>t.from(this.encode(o),"utf8"),decode:o=>this.decode(o.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:o,textDecoder:d}=n();return new s({encode:p=>o.encode(this.encode(p)),decode:p=>this.decode(d.decode(p)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}return dt.BufferFormat=r,dt.ViewFormat=s,dt.UTF8Format=i,dt}var Or;function us(){if(Or)return Ge;Or=1;const{Buffer:t}=Ce()||{Buffer:{isBuffer:()=>!1}},{textEncoder:e,textDecoder:n}=Fi()(),{BufferFormat:r,ViewFormat:s,UTF8Format:i}=Ki(),u=o=>o;return Ge.utf8=new i({encode:function(o){return t.isBuffer(o)?o.toString("utf8"):ArrayBuffer.isView(o)?n.decode(o):String(o)},decode:u,name:"utf8",createViewTranscoder(){return new s({encode:function(o){return ArrayBuffer.isView(o)?o:e.encode(o)},decode:function(o){return n.decode(o)},name:`${this.name}+view`})},createBufferTranscoder(){return new r({encode:function(o){return t.isBuffer(o)?o:ArrayBuffer.isView(o)?t.from(o.buffer,o.byteOffset,o.byteLength):t.from(String(o),"utf8")},decode:function(o){return o.toString("utf8")},name:`${this.name}+buffer`})}}),Ge.json=new i({encode:JSON.stringify,decode:JSON.parse,name:"json"}),Ge.buffer=new r({encode:function(o){return t.isBuffer(o)?o:ArrayBuffer.isView(o)?t.from(o.buffer,o.byteOffset,o.byteLength):t.from(String(o),"utf8")},decode:u,name:"buffer",createViewTranscoder(){return new s({encode:function(o){return ArrayBuffer.isView(o)?o:t.from(String(o),"utf8")},decode:function(o){return t.from(o.buffer,o.byteOffset,o.byteLength)},name:`${this.name}+view`})}}),Ge.view=new s({encode:function(o){return ArrayBuffer.isView(o)?o:e.encode(o)},decode:u,name:"view",createBufferTranscoder(){return new r({encode:function(o){return t.isBuffer(o)?o:ArrayBuffer.isView(o)?t.from(o.buffer,o.byteOffset,o.byteLength):t.from(String(o),"utf8")},decode:u,name:`${this.name}+buffer`})}}),Ge.hex=new r({encode:function(o){return t.isBuffer(o)?o:t.from(String(o),"hex")},decode:function(o){return o.toString("hex")},name:"hex"}),Ge.base64=new r({encode:function(o){return t.isBuffer(o)?o:t.from(String(o),"base64")},decode:function(o){return o.toString("base64")},name:"base64"}),Ge}var Ir;function cs(){if(Ir)return Qt;Ir=1;const t=Ue(),e=us(),{Encoding:n}=Wi(),{BufferFormat:r,ViewFormat:s,UTF8Format:i}=Ki(),u=Symbol("formats"),o=Symbol("encodings"),d=new Set(["buffer","view","utf8"]);class p{constructor(b){if(Array.isArray(b)){if(!b.every(c=>d.has(c)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[o]=new Map,this[u]=new Set(b);for(const c in e)try{this.encoding(c)}catch(g){if(g.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw g}}encodings(){return Array.from(new Set(this[o].values()))}encoding(b){let c=this[o].get(b);if(c===void 0){if(typeof b=="string"&&b!==""){if(c=A[b],!c)throw new t(`Encoding '${b}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof b!="object"||b===null)throw new TypeError("First argument 'encoding' must be a string or object");c=E(b)}const{name:g,format:_}=c;if(!this[u].has(_))if(this[u].has("view"))c=c.createViewTranscoder();else if(this[u].has("buffer"))c=c.createBufferTranscoder();else if(this[u].has("utf8"))c=c.createUTF8Transcoder();else throw new t(`Encoding '${g}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const y of[b,g,c.name,c.commonName])this[o].set(y,c)}return c}}Qt.Transcoder=p;function E(h){if(h instanceof n)return h;const b="type"in h&&typeof h.type=="string"?h.type:void 0,c=h.name||b||`anonymous-${S++}`;switch(l(h)){case"view":return new s({...h,name:c});case"utf8":return new i({...h,name:c});case"buffer":return new r({...h,name:c});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function l(h){return"format"in h&&h.format!==void 0?h.format:"buffer"in h&&typeof h.buffer=="boolean"?h.buffer?"buffer":"utf8":"code"in h&&Number.isInteger(h.code)?"view":"buffer"}const w={binary:e.buffer,"utf-8":e.utf8},A={...e,...w};let S=0;return Qt}var Ot={exports:{}},Lr;function Et(){if(Lr)return Ot.exports;Lr=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(m,R,O){return Function.prototype.apply.call(m,R,O)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:n=function(m){return Object.getOwnPropertyNames(m)};function r(y){}var s=Number.isNaN||function(m){return m!==m};function i(){i.init.call(this)}Ot.exports=i,Ot.exports.once=c,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var u=10;function o(y){if(typeof y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(y){if(typeof y!="number"||y<0||s(y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");u=y}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||s(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function d(y){return y._maxListeners===void 0?i.defaultMaxListeners:y._maxListeners}i.prototype.getMaxListeners=function(){return d(this)},i.prototype.emit=function(m){for(var R=[],O=1;O<arguments.length;O++)R.push(arguments[O]);var L=m==="error",z=this._events;if(z!==void 0)L=L&&z.error===void 0;else if(!L)return!1;if(L){var I;if(R.length>0&&(I=R[0]),I instanceof Error)throw I;var C=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw C.context=I,C}var F=z[m];if(F===void 0)return!1;if(typeof F=="function")e(F,this,R);else for(var D=F.length,Z=S(F,D),O=0;O<D;++O)e(Z[O],this,R);return!0};function p(y,m,R,O){var L,z,I;if(o(R),z=y._events,z===void 0?(z=y._events=Object.create(null),y._eventsCount=0):(z.newListener!==void 0&&(y.emit("newListener",m,R.listener?R.listener:R),z=y._events),I=z[m]),I===void 0)I=z[m]=R,++y._eventsCount;else if(typeof I=="function"?I=z[m]=O?[R,I]:[I,R]:O?I.unshift(R):I.push(R),L=d(y),L>0&&I.length>L&&!I.warned){I.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=y,C.type=m,C.count=I.length}return y}i.prototype.addListener=function(m,R){return p(this,m,R,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(m,R){return p(this,m,R,!0)};function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(y,m,R){var O={fired:!1,wrapFn:void 0,target:y,type:m,listener:R},L=E.bind(O);return L.listener=R,O.wrapFn=L,L}i.prototype.once=function(m,R){return o(R),this.on(m,l(this,m,R)),this},i.prototype.prependOnceListener=function(m,R){return o(R),this.prependListener(m,l(this,m,R)),this},i.prototype.removeListener=function(m,R){var O,L,z,I,C;if(o(R),L=this._events,L===void 0)return this;if(O=L[m],O===void 0)return this;if(O===R||O.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete L[m],L.removeListener&&this.emit("removeListener",m,O.listener||R));else if(typeof O!="function"){for(z=-1,I=O.length-1;I>=0;I--)if(O[I]===R||O[I].listener===R){C=O[I].listener,z=I;break}if(z<0)return this;z===0?O.shift():h(O,z),O.length===1&&(L[m]=O[0]),L.removeListener!==void 0&&this.emit("removeListener",m,C||R)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(m){var R,O,L;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[m]),this;if(arguments.length===0){var z=Object.keys(O),I;for(L=0;L<z.length;++L)I=z[L],I!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=O[m],typeof R=="function")this.removeListener(m,R);else if(R!==void 0)for(L=R.length-1;L>=0;L--)this.removeListener(m,R[L]);return this};function w(y,m,R){var O=y._events;if(O===void 0)return[];var L=O[m];return L===void 0?[]:typeof L=="function"?R?[L.listener||L]:[L]:R?b(L):S(L,L.length)}i.prototype.listeners=function(m){return w(this,m,!0)},i.prototype.rawListeners=function(m){return w(this,m,!1)},i.listenerCount=function(y,m){return typeof y.listenerCount=="function"?y.listenerCount(m):A.call(y,m)},i.prototype.listenerCount=A;function A(y){var m=this._events;if(m!==void 0){var R=m[y];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function S(y,m){for(var R=new Array(m),O=0;O<m;++O)R[O]=y[O];return R}function h(y,m){for(;m+1<y.length;m++)y[m]=y[m+1];y.pop()}function b(y){for(var m=new Array(y.length),R=0;R<m.length;++R)m[R]=y[R].listener||y[R];return m}function c(y,m){return new Promise(function(R,O){function L(I){y.removeListener(m,z),O(I)}function z(){typeof y.removeListener=="function"&&y.removeListener("error",L),R([].slice.call(arguments))}_(y,m,z,{once:!0}),m!=="error"&&g(y,L,{once:!0})})}function g(y,m,R){typeof y.on=="function"&&_(y,"error",m,R)}function _(y,m,R,O){if(typeof y.on=="function")O.once?y.once(m,R):y.on(m,R);else if(typeof y.addEventListener=="function")y.addEventListener(m,function L(z){O.once&&y.removeEventListener(m,L),R(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof y)}return Ot.exports}var It={},rn,Br;function ls(){return Br||(Br=1,rn=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)),rn}var Nr;function $t(){if(Nr)return It;Nr=1;var t=ls();return It.fromCallback=function(e,n){if(e===void 0){var r=new Promise(function(s,i){e=function(u,o){u?i(u):s(o)}});e[n!==void 0?n:"promise"]=r}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e},It.fromPromise=function(e,n){if(n===void 0)return e;e.then(function(r){t(()=>n(null,r))}).catch(function(r){t(()=>n(r))})},It}var ht={},Lt={},kr;function Qn(){return kr||(kr=1,Lt.getCallback=function(t,e){return typeof t=="function"?t:e},Lt.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}),Lt}var Cr;function it(){if(Cr)return ht;Cr=1;const{fromCallback:t}=$t(),e=Ue(),{getOptions:n,getCallback:r}=Qn(),s=Symbol("promise"),i=Symbol("callback"),u=Symbol("working"),o=Symbol("handleOne"),d=Symbol("handleMany"),p=Symbol("autoClose"),E=Symbol("finishWork"),l=Symbol("returnMany"),w=Symbol("closing"),A=Symbol("handleClose"),S=Symbol("closed"),h=Symbol("closeCallbacks"),b=Symbol("keyEncoding"),c=Symbol("valueEncoding"),g=Symbol("abortOnClose"),_=Symbol("legacy"),y=Symbol("keys"),m=Symbol("values"),R=Symbol("limit"),O=Symbol("count"),L=Object.freeze({}),z=()=>{};let I=!1;class C{constructor(P,f,x){if(typeof P!="object"||P===null){const a=P===null?"null":typeof P;throw new TypeError(`The first argument must be an abstract-level database, received ${a}`)}if(typeof f!="object"||f===null)throw new TypeError("The second argument must be an options object");this[S]=!1,this[h]=[],this[u]=!1,this[w]=!1,this[p]=!1,this[i]=null,this[o]=this[o].bind(this),this[d]=this[d].bind(this),this[A]=this[A].bind(this),this[b]=f[b],this[c]=f[c],this[_]=x,this[R]=Number.isInteger(f.limit)&&f.limit>=0?f.limit:1/0,this[O]=0,this[g]=!!f.abortOnClose,this.db=P,this.db.attachResource(this),this.nextTick=P.nextTick}get count(){return this[O]}get limit(){return this[R]}next(P){let f;if(P===void 0)f=new Promise((x,a)=>{P=(N,K,U)=>{N?a(N):this[_]?K===void 0&&U===void 0?x():x([K,U]):x(K)}});else if(typeof P!="function")throw new TypeError("Callback must be a function");return this[w]?this.nextTick(P,new e("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[u]?this.nextTick(P,new e("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[u]=!0,this[i]=P,this[O]>=this[R]?this.nextTick(this[o],null):this._next(this[o])),f}_next(P){this.nextTick(P)}nextv(P,f,x){return x=r(f,x),x=t(x,s),f=n(f,L),Number.isInteger(P)?(this[w]?this.nextTick(x,new e("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[u]?this.nextTick(x,new e("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(P<1&&(P=1),this[R]<1/0&&(P=Math.min(P,this[R]-this[O])),this[u]=!0,this[i]=x,P<=0?this.nextTick(this[d],null,[]):this._nextv(P,f,this[d])),x[s]):(this.nextTick(x,new TypeError("The first argument 'size' must be an integer")),x[s])}_nextv(P,f,x){const a=[],N=(K,U,Y)=>{if(K)return x(K);if(this[_]?U===void 0&&Y===void 0:U===void 0)return x(null,a);a.push(this[_]?[U,Y]:U),a.length===P?x(null,a):this._next(N)};this._next(N)}all(P,f){return f=r(P,f),f=t(f,s),P=n(P,L),this[w]?this.nextTick(f,new e("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[u]?this.nextTick(f,new e("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[u]=!0,this[i]=f,this[p]=!0,this[O]>=this[R]?this.nextTick(this[d],null,[]):this._all(P,this[d])),f[s]}_all(P,f){let x=this[O];const a=[],N=()=>{const U=this[R]<1/0?Math.min(1e3,this[R]-x):1e3;U<=0?this.nextTick(f,null,a):this._nextv(U,L,K)},K=(U,Y)=>{U?f(U):Y.length===0?f(null,a):(a.push.apply(a,Y),x+=Y.length,N())};N()}[E](){const P=this[i];return this[g]&&P===null?z:(this[u]=!1,this[i]=null,this[w]&&this._close(this[A]),P)}[l](P,f,x){this[p]?this.close(P.bind(null,f,x)):P(f,x)}seek(P,f){if(f=n(f,L),!this[w]){if(this[u])throw new e("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const x=this.db.keyEncoding(f.keyEncoding||this[b]),a=x.format;f.keyEncoding!==a&&(f={...f,keyEncoding:a});const N=this.db.prefixKey(x.encode(P),a);this._seek(N,f)}}}_seek(P,f){throw new e("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(P){return P=t(P,s),this[S]?this.nextTick(P):this[w]?this[h].push(P):(this[w]=!0,this[h].push(P),this[u]?this[g]&&this[E]()(new e("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[A])),P[s]}_close(P){this.nextTick(P)}[A](){this[S]=!0,this.db.detachResource(this);const P=this[h];this[h]=[];for(const f of P)f()}async*[Symbol.asyncIterator](){try{let P;for(;(P=await this.next())!==void 0;)yield P}finally{this[S]||await this.close()}}}class F extends C{constructor(P,f){super(P,f,!0),this[y]=f.keys!==!1,this[m]=f.values!==!1}[o](P,f,x){const a=this[E]();if(P)return a(P);try{f=this[y]&&f!==void 0?this[b].decode(f):void 0,x=this[m]&&x!==void 0?this[c].decode(x):void 0}catch(N){return a(new j("entry",N))}f===void 0&&x===void 0||this[O]++,a(null,f,x)}[d](P,f){const x=this[E]();if(P)return this[l](x,P);try{for(const a of f){const N=a[0],K=a[1];a[0]=this[y]&&N!==void 0?this[b].decode(N):void 0,a[1]=this[m]&&K!==void 0?this[c].decode(K):void 0}}catch(a){return this[l](x,new j("entries",a))}this[O]+=f.length,this[l](x,null,f)}end(P){return!I&&typeof console<"u"&&(I=!0),this.close(P)}}class D extends C{constructor(P,f){super(P,f,!1)}[o](P,f){const x=this[E]();if(P)return x(P);try{f=f!==void 0?this[b].decode(f):void 0}catch(a){return x(new j("key",a))}f!==void 0&&this[O]++,x(null,f)}[d](P,f){const x=this[E]();if(P)return this[l](x,P);try{for(let a=0;a<f.length;a++){const N=f[a];f[a]=N!==void 0?this[b].decode(N):void 0}}catch(a){return this[l](x,new j("keys",a))}this[O]+=f.length,this[l](x,null,f)}}class Z extends C{constructor(P,f){super(P,f,!1)}[o](P,f){const x=this[E]();if(P)return x(P);try{f=f!==void 0?this[c].decode(f):void 0}catch(a){return x(new j("value",a))}f!==void 0&&this[O]++,x(null,f)}[d](P,f){const x=this[E]();if(P)return this[l](x,P);try{for(let a=0;a<f.length;a++){const N=f[a];f[a]=N!==void 0?this[c].decode(N):void 0}}catch(a){return this[l](x,new j("values",a))}this[O]+=f.length,this[l](x,null,f)}}class j extends e{constructor(P,f){super(`Iterator could not decode ${P}`,{code:"LEVEL_DECODE_ERROR",cause:f})}}for(const V of["_ended property","_nexting property","_end method"])Object.defineProperty(F.prototype,V.split(" ")[0],{get(){throw new e(`The ${V} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new e(`The ${V} has been removed`,{code:"LEVEL_LEGACY"})}});return F.keyEncoding=b,F.valueEncoding=c,ht.AbstractIterator=F,ht.AbstractKeyIterator=D,ht.AbstractValueIterator=Z,ht}var Bt={},Dr;function ds(){if(Dr)return Bt;Dr=1;const{AbstractKeyIterator:t,AbstractValueIterator:e}=it(),n=Symbol("iterator"),r=Symbol("callback"),s=Symbol("handleOne"),i=Symbol("handleMany");class u extends t{constructor(p,E){super(p,E),this[n]=p.iterator({...E,keys:!0,values:!1}),this[s]=this[s].bind(this),this[i]=this[i].bind(this)}}class o extends e{constructor(p,E){super(p,E),this[n]=p.iterator({...E,keys:!1,values:!0}),this[s]=this[s].bind(this),this[i]=this[i].bind(this)}}for(const d of[u,o]){const p=d===u,E=p?l=>l[0]:l=>l[1];d.prototype._next=function(l){this[r]=l,this[n].next(this[s])},d.prototype[s]=function(l,w,A){const S=this[r];l?S(l):S(null,p?w:A)},d.prototype._nextv=function(l,w,A){this[r]=A,this[n].nextv(l,w,this[i])},d.prototype._all=function(l,w){this[r]=w,this[n].all(l,this[i])},d.prototype[i]=function(l,w){const A=this[r];l?A(l):A(null,w.map(E))},d.prototype._seek=function(l,w){this[n].seek(l,w)},d.prototype._close=function(l){this[n].close(l)}}return Bt.DefaultKeyIterator=u,Bt.DefaultValueIterator=o,Bt}var yt={},Mr;function hs(){if(Mr)return yt;Mr=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:n}=it(),r=Ue(),s=Symbol("nut"),i=Symbol("undefer"),u=Symbol("factory");class o extends t{constructor(l,w){super(l,w),this[s]=null,this[u]=()=>l.iterator(w),this.db.defer(()=>this[i]())}}class d extends e{constructor(l,w){super(l,w),this[s]=null,this[u]=()=>l.keys(w),this.db.defer(()=>this[i]())}}class p extends n{constructor(l,w){super(l,w),this[s]=null,this[u]=()=>l.values(w),this.db.defer(()=>this[i]())}}for(const E of[o,d,p])E.prototype[i]=function(){this.db.status==="open"&&(this[s]=this[u]())},E.prototype._next=function(l){this[s]!==null?this[s].next(l):this.db.status==="opening"?this.db.defer(()=>this._next(l)):this.nextTick(l,new r("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},E.prototype._nextv=function(l,w,A){this[s]!==null?this[s].nextv(l,w,A):this.db.status==="opening"?this.db.defer(()=>this._nextv(l,w,A)):this.nextTick(A,new r("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},E.prototype._all=function(l,w){this[s]!==null?this[s].all(w):this.db.status==="opening"?this.db.defer(()=>this._all(l,w)):this.nextTick(w,new r("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},E.prototype._seek=function(l,w){this[s]!==null?this[s]._seek(l,w):this.db.status==="opening"&&this.db.defer(()=>this._seek(l,w))},E.prototype._close=function(l){this[s]!==null?this[s].close(l):this.db.status==="opening"?this.db.defer(()=>this._close(l)):this.nextTick(l)};return yt.DeferredIterator=o,yt.DeferredKeyIterator=d,yt.DeferredValueIterator=p,yt}var on={},sn={},Pr;function Hi(){if(Pr)return sn;Pr=1;const{fromCallback:t}=$t(),e=Ue(),{getCallback:n,getOptions:r}=Qn(),s=Symbol("promise"),i=Symbol("status"),u=Symbol("operations"),o=Symbol("finishClose"),d=Symbol("closeCallbacks");class p{constructor(l){if(typeof l!="object"||l===null){const w=l===null?"null":typeof l;throw new TypeError(`The first argument must be an abstract-level database, received ${w}`)}this[u]=[],this[d]=[],this[i]="open",this[o]=this[o].bind(this),this.db=l,this.db.attachResource(this),this.nextTick=l.nextTick}get length(){return this[u].length}put(l,w,A){if(this[i]!=="open")throw new e("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const S=this.db._checkKey(l)||this.db._checkValue(w);if(S)throw S;const h=A&&A.sublevel!=null?A.sublevel:this.db,b=A,c=h.keyEncoding(A&&A.keyEncoding),g=h.valueEncoding(A&&A.valueEncoding),_=c.format;A={...A,keyEncoding:_,valueEncoding:g.format},h!==this.db&&(A.sublevel=null);const y=h.prefixKey(c.encode(l),_),m=g.encode(w);return this._put(y,m,A),this[u].push({...b,type:"put",key:l,value:w}),this}_put(l,w,A){}del(l,w){if(this[i]!=="open")throw new e("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const A=this.db._checkKey(l);if(A)throw A;const S=w&&w.sublevel!=null?w.sublevel:this.db,h=w,b=S.keyEncoding(w&&w.keyEncoding),c=b.format;return w={...w,keyEncoding:c},S!==this.db&&(w.sublevel=null),this._del(S.prefixKey(b.encode(l),c),w),this[u].push({...h,type:"del",key:l}),this}_del(l,w){}clear(){if(this[i]!=="open")throw new e("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[u]=[],this}_clear(){}write(l,w){return w=n(l,w),w=t(w,s),l=r(l),this[i]!=="open"?this.nextTick(w,new e("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(w):(this[i]="writing",this._write(l,A=>{this[i]="closing",this[d].push(()=>w(A)),A||this.db.emit("batch",this[u]),this._close(this[o])})),w[s]}_write(l,w){}close(l){return l=t(l,s),this[i]==="closing"?this[d].push(l):this[i]==="closed"?this.nextTick(l):(this[d].push(l),this[i]!=="writing"&&(this[i]="closing",this._close(this[o]))),l[s]}_close(l){this.nextTick(l)}[o](){this[i]="closed",this.db.detachResource(this);const l=this[d];this[d]=[];for(const w of l)w()}}return sn.AbstractChainedBatch=p,sn}var Ur;function ys(){if(Ur)return on;Ur=1;const{AbstractChainedBatch:t}=Hi(),e=Ue(),n=Symbol("encoded");class r extends t{constructor(i){super(i),this[n]=[]}_put(i,u,o){this[n].push({...o,type:"put",key:i,value:u})}_del(i,u){this[n].push({...u,type:"del",key:i})}_clear(){this[n]=[]}_write(i,u){this.db.status==="opening"?this.db.defer(()=>this._write(i,u)):this.db.status==="open"?this[n].length===0?this.nextTick(u):this.db._batch(this[n],i,u):this.nextTick(u,new e("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}return on.DefaultChainedBatch=r,on}var an,jr;function ps(){if(jr)return an;jr=1;const t=Ue(),e=Object.prototype.hasOwnProperty,n=new Set(["lt","lte","gt","gte"]);return an=function(r,s){const i={};for(const u in r)if(e.call(r,u)&&!(u==="keyEncoding"||u==="valueEncoding")){if(u==="start"||u==="end")throw new t(`The legacy range option '${u}' has been removed`,{code:"LEVEL_LEGACY"});if(u==="encoding")throw new t("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});n.has(u)?i[u]=s.encode(r[u]):i[u]=r[u]}return i.reverse=!!i.reverse,i.limit=Number.isInteger(i.limit)&&i.limit>=0?i.limit:-1,i},an}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var fn,$r;function Gi(){if($r)return fn;$r=1;let t;return fn=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Oo):e=>(t||(t=Promise.resolve())).then(e).catch(n=>setTimeout(()=>{throw n},0)),fn}var un,qr;function bs(){if(qr)return un;qr=1;const t=Gi();return un=function(e,...n){n.length===0?t(e):t(()=>e(...n))},un}var pt={},Vr;function ws(){if(Vr)return pt;Vr=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:n}=it(),r=Symbol("unfix"),s=Symbol("iterator"),i=Symbol("handleOne"),u=Symbol("handleMany"),o=Symbol("callback");class d extends t{constructor(w,A,S,h){super(w,A),this[s]=S,this[r]=h,this[i]=this[i].bind(this),this[u]=this[u].bind(this),this[o]=null}[i](w,A,S){const h=this[o];if(w)return h(w);A!==void 0&&(A=this[r](A)),h(w,A,S)}[u](w,A){const S=this[o];if(w)return S(w);for(const h of A){const b=h[0];b!==void 0&&(h[0]=this[r](b))}S(w,A)}}class p extends e{constructor(w,A,S,h){super(w,A),this[s]=S,this[r]=h,this[i]=this[i].bind(this),this[u]=this[u].bind(this),this[o]=null}[i](w,A){const S=this[o];if(w)return S(w);A!==void 0&&(A=this[r](A)),S(w,A)}[u](w,A){const S=this[o];if(w)return S(w);for(let h=0;h<A.length;h++){const b=A[h];b!==void 0&&(A[h]=this[r](b))}S(w,A)}}class E extends n{constructor(w,A,S){super(w,A),this[s]=S}}for(const l of[d,p])l.prototype._next=function(w){this[o]=w,this[s].next(this[i])},l.prototype._nextv=function(w,A,S){this[o]=S,this[s].nextv(w,A,this[u])},l.prototype._all=function(w,A){this[o]=A,this[s].all(w,this[u])};for(const l of[E])l.prototype._next=function(w){this[s].next(w)},l.prototype._nextv=function(w,A,S){this[s].nextv(w,A,S)},l.prototype._all=function(w,A){this[s].all(w,A)};for(const l of[d,p,E])l.prototype._seek=function(w,A){this[s].seek(w,A)},l.prototype._close=function(w){this[s].close(w)};return pt.AbstractSublevelIterator=d,pt.AbstractSublevelKeyIterator=p,pt.AbstractSublevelValueIterator=E,pt}var cn,Fr;function gs(){if(Fr)return cn;Fr=1;const t=Ue(),{Buffer:e}=Ce()||{},{AbstractSublevelIterator:n,AbstractSublevelKeyIterator:r,AbstractSublevelValueIterator:s}=ws(),i=Symbol("prefix"),u=Symbol("upperBound"),o=Symbol("prefixRange"),d=Symbol("parent"),p=Symbol("unfix"),E=new TextEncoder,l={separator:"!"};cn=function({AbstractLevel:c}){class g extends c{static defaults(y){if(typeof y=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(y&&y.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return y==null?l:y.separator?y:{...y,separator:"!"}}constructor(y,m,R){const{separator:O,manifest:L,...z}=g.defaults(R);m=b(m,O);const I=O.charCodeAt(0)+1,C=y[d]||y;if(!E.encode(m).every(Z=>Z>I&&Z<127))throw new t(`Prefix must use bytes > ${I} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(w(C,L),z);const F=(y.prefix||"")+O+m+O,D=F.slice(0,-1)+String.fromCharCode(I);this[d]=C,this[i]=new S(F),this[u]=new S(D),this[p]=new h,this.nextTick=C.nextTick}prefixKey(y,m){if(m==="utf8")return this[i].utf8+y;if(y.byteLength===0)return this[i][m];if(m==="view"){const R=this[i].view,O=new Uint8Array(R.byteLength+y.byteLength);return O.set(R,0),O.set(y,R.byteLength),O}else{const R=this[i].buffer;return e.concat([R,y],R.byteLength+y.byteLength)}}[o](y,m){y.gte!==void 0?y.gte=this.prefixKey(y.gte,m):y.gt!==void 0?y.gt=this.prefixKey(y.gt,m):y.gte=this[i][m],y.lte!==void 0?y.lte=this.prefixKey(y.lte,m):y.lt!==void 0?y.lt=this.prefixKey(y.lt,m):y.lte=this[u][m]}get prefix(){return this[i].utf8}get db(){return this[d]}_open(y,m){this[d].open({passive:!0},m)}_put(y,m,R,O){this[d].put(y,m,R,O)}_get(y,m,R){this[d].get(y,m,R)}_getMany(y,m,R){this[d].getMany(y,m,R)}_del(y,m,R){this[d].del(y,m,R)}_batch(y,m,R){this[d].batch(y,m,R)}_clear(y,m){this[o](y,y.keyEncoding),this[d].clear(y,m)}_iterator(y){this[o](y,y.keyEncoding);const m=this[d].iterator(y),R=this[p].get(this[i].utf8.length,y.keyEncoding);return new n(this,y,m,R)}_keys(y){this[o](y,y.keyEncoding);const m=this[d].keys(y),R=this[p].get(this[i].utf8.length,y.keyEncoding);return new r(this,y,m,R)}_values(y){this[o](y,y.keyEncoding);const m=this[d].values(y);return new s(this,y,m)}}return{AbstractSublevel:g}};const w=function(c,g){return{...c.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...g,encodings:{utf8:A(c,"utf8"),buffer:A(c,"buffer"),view:A(c,"view")}}},A=function(c,g){return c.supports.encodings[g]?c.keyEncoding(g).name===g:!1};class S{constructor(g){this.utf8=g,this.view=E.encode(g),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class h{constructor(){this.cache=new Map}get(g,_){let y=this.cache.get(_);return y===void 0&&(_==="view"?y=(function(m,R){return R.subarray(m)}).bind(null,g):y=(function(m,R){return R.slice(m)}).bind(null,g),this.cache.set(_,y)),y}}const b=function(c,g){let _=0,y=c.length;for(;_<y&&c[_]===g;)_++;for(;y>_&&c[y-1]===g;)y--;return c.slice(_,y)};return cn}var Wr;function Kr(){if(Wr)return Rt;Wr=1;const{supports:t}=fs(),{Transcoder:e}=cs(),{EventEmitter:n}=Et(),{fromCallback:r}=$t(),s=Ue(),{AbstractIterator:i}=it(),{DefaultKeyIterator:u,DefaultValueIterator:o}=ds(),{DeferredIterator:d,DeferredKeyIterator:p,DeferredValueIterator:E}=hs(),{DefaultChainedBatch:l}=ys(),{getCallback:w,getOptions:A}=Qn(),S=ps(),h=Symbol("promise"),b=Symbol("landed"),c=Symbol("resources"),g=Symbol("closeResources"),_=Symbol("operations"),y=Symbol("undefer"),m=Symbol("deferOpen"),R=Symbol("options"),O=Symbol("status"),L=Symbol("defaultOptions"),z=Symbol("transcoder"),I=Symbol("keyEncoding"),C=Symbol("valueEncoding"),F=()=>{};class D extends n{constructor(f,x){if(super(),typeof f!="object"||f===null)throw new TypeError("The first argument 'manifest' must be an object");x=A(x);const{keyEncoding:a,valueEncoding:N,passive:K,...U}=x;this[c]=new Set,this[_]=[],this[m]=!0,this[R]=U,this[O]="opening",this.supports=t(f,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:f.snapshots!==!1,permanence:f.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:f.encodings||{},events:Object.assign({},f.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[z]=new e(V(this)),this[I]=this[z].encoding(a||"utf8"),this[C]=this[z].encoding(N||"utf8");for(const Y of this[z].encodings())this.supports.encodings[Y.commonName]||(this.supports.encodings[Y.commonName]=!0);this[L]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[I].commonName,valueEncoding:this[C].commonName}),key:Object.freeze({keyEncoding:this[I].commonName})},this.nextTick(()=>{this[m]&&this.open({passive:!1},F)})}get status(){return this[O]}keyEncoding(f){return this[z].encoding(f??this[I])}valueEncoding(f){return this[z].encoding(f??this[C])}open(f,x){x=w(f,x),x=r(x,h),f={...this[R],...A(f)},f.createIfMissing=f.createIfMissing!==!1,f.errorIfExists=!!f.errorIfExists;const a=N=>{this[O]==="closing"||this[O]==="opening"?this.once(b,N?()=>a(N):a):this[O]!=="open"?x(new s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:N})):x()};return f.passive?this[O]==="opening"?this.once(b,a):this.nextTick(a):this[O]==="closed"||this[m]?(this[m]=!1,this[O]="opening",this.emit("opening"),this._open(f,N=>{if(N){this[O]="closed",this[g](()=>{this.emit(b),a(N)}),this[y]();return}this[O]="open",this[y](),this.emit(b),this[O]==="open"&&this.emit("open"),this[O]==="open"&&this.emit("ready"),a()})):this[O]==="open"?this.nextTick(a):this.once(b,()=>this.open(f,x)),x[h]}_open(f,x){this.nextTick(x)}close(f){f=r(f,h);const x=a=>{this[O]==="opening"||this[O]==="closing"?this.once(b,a?x(a):x):this[O]!=="closed"?f(new s("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:a})):f()};if(this[O]==="open"){this[O]="closing",this.emit("closing");const a=N=>{this[O]="open",this[y](),this.emit(b),x(N)};this[g](()=>{this._close(N=>{if(N)return a(N);this[O]="closed",this[y](),this.emit(b),this[O]==="closed"&&this.emit("closed"),x()})})}else this[O]==="closed"?this.nextTick(x):this.once(b,()=>this.close(f));return f[h]}[g](f){if(this[c].size===0)return this.nextTick(f);let x=this[c].size,a=!0;const N=()=>{--x===0&&(a?this.nextTick(f):f())};for(const K of this[c])K.close(N);a=!1,this[c].clear()}_close(f){this.nextTick(f)}get(f,x,a){if(a=w(x,a),a=r(a,h),x=A(x,this[L].entry),this[O]==="opening")return this.defer(()=>this.get(f,x,a)),a[h];if(j(this,a))return a[h];const N=this._checkKey(f);if(N)return this.nextTick(a,N),a[h];const K=this.keyEncoding(x.keyEncoding),U=this.valueEncoding(x.valueEncoding),Y=K.format,oe=U.format;return(x.keyEncoding!==Y||x.valueEncoding!==oe)&&(x=Object.assign({},x,{keyEncoding:Y,valueEncoding:oe})),this._get(this.prefixKey(K.encode(f),Y),x,(te,se)=>{if(te)return(te.code==="LEVEL_NOT_FOUND"||te.notFound||/NotFound/i.test(te))&&(te.code||(te.code="LEVEL_NOT_FOUND"),te.notFound||(te.notFound=!0),te.status||(te.status=404)),a(te);try{se=U.decode(se)}catch($){return a(new s("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:$}))}a(null,se)}),a[h]}_get(f,x,a){this.nextTick(a,new Error("NotFound"))}getMany(f,x,a){if(a=w(x,a),a=r(a,h),x=A(x,this[L].entry),this[O]==="opening")return this.defer(()=>this.getMany(f,x,a)),a[h];if(j(this,a))return a[h];if(!Array.isArray(f))return this.nextTick(a,new TypeError("The first argument 'keys' must be an array")),a[h];if(f.length===0)return this.nextTick(a,null,[]),a[h];const N=this.keyEncoding(x.keyEncoding),K=this.valueEncoding(x.valueEncoding),U=N.format,Y=K.format;(x.keyEncoding!==U||x.valueEncoding!==Y)&&(x=Object.assign({},x,{keyEncoding:U,valueEncoding:Y}));const oe=new Array(f.length);for(let te=0;te<f.length;te++){const se=f[te],$=this._checkKey(se);if($)return this.nextTick(a,$),a[h];oe[te]=this.prefixKey(N.encode(se),U)}return this._getMany(oe,x,(te,se)=>{if(te)return a(te);try{for(let $=0;$<se.length;$++)se[$]!==void 0&&(se[$]=K.decode(se[$]))}catch($){return a(new s(`Could not decode one or more of ${se.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:$}))}a(null,se)}),a[h]}_getMany(f,x,a){this.nextTick(a,null,new Array(f.length).fill(void 0))}put(f,x,a,N){if(N=w(a,N),N=r(N,h),a=A(a,this[L].entry),this[O]==="opening")return this.defer(()=>this.put(f,x,a,N)),N[h];if(j(this,N))return N[h];const K=this._checkKey(f)||this._checkValue(x);if(K)return this.nextTick(N,K),N[h];const U=this.keyEncoding(a.keyEncoding),Y=this.valueEncoding(a.valueEncoding),oe=U.format,te=Y.format;(a.keyEncoding!==oe||a.valueEncoding!==te)&&(a=Object.assign({},a,{keyEncoding:oe,valueEncoding:te}));const se=this.prefixKey(U.encode(f),oe),$=Y.encode(x);return this._put(se,$,a,W=>{if(W)return N(W);this.emit("put",f,x),N()}),N[h]}_put(f,x,a,N){this.nextTick(N)}del(f,x,a){if(a=w(x,a),a=r(a,h),x=A(x,this[L].key),this[O]==="opening")return this.defer(()=>this.del(f,x,a)),a[h];if(j(this,a))return a[h];const N=this._checkKey(f);if(N)return this.nextTick(a,N),a[h];const K=this.keyEncoding(x.keyEncoding),U=K.format;return x.keyEncoding!==U&&(x=Object.assign({},x,{keyEncoding:U})),this._del(this.prefixKey(K.encode(f),U),x,Y=>{if(Y)return a(Y);this.emit("del",f),a()}),a[h]}_del(f,x,a){this.nextTick(a)}batch(f,x,a){if(!arguments.length){if(this[O]==="opening")return new l(this);if(this[O]!=="open")throw new s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof f=="function"?a=f:a=w(x,a),a=r(a,h),x=A(x,this[L].empty),this[O]==="opening")return this.defer(()=>this.batch(f,x,a)),a[h];if(j(this,a))return a[h];if(!Array.isArray(f))return this.nextTick(a,new TypeError("The first argument 'operations' must be an array")),a[h];if(f.length===0)return this.nextTick(a),a[h];const N=new Array(f.length),{keyEncoding:K,valueEncoding:U,...Y}=x;for(let oe=0;oe<f.length;oe++){if(typeof f[oe]!="object"||f[oe]===null)return this.nextTick(a,new TypeError("A batch operation must be an object")),a[h];const te=Object.assign({},f[oe]);if(te.type!=="put"&&te.type!=="del")return this.nextTick(a,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),a[h];const se=this._checkKey(te.key);if(se)return this.nextTick(a,se),a[h];const $=te.sublevel!=null?te.sublevel:this,W=$.keyEncoding(te.keyEncoding||K),ie=W.format;if(te.key=$.prefixKey(W.encode(te.key),ie),te.keyEncoding=ie,te.type==="put"){const ue=this._checkValue(te.value);if(ue)return this.nextTick(a,ue),a[h];const ae=$.valueEncoding(te.valueEncoding||U);te.value=ae.encode(te.value),te.valueEncoding=ae.format}$!==this&&(te.sublevel=null),N[oe]=te}return this._batch(N,Y,oe=>{if(oe)return a(oe);this.emit("batch",f),a()}),a[h]}_batch(f,x,a){this.nextTick(a)}sublevel(f,x){return this._sublevel(f,Z.defaults(x))}_sublevel(f,x){return new Z(this,f,x)}prefixKey(f,x){return f}clear(f,x){if(x=w(f,x),x=r(x,h),f=A(f,this[L].empty),this[O]==="opening")return this.defer(()=>this.clear(f,x)),x[h];if(j(this,x))return x[h];const a=f,N=this.keyEncoding(f.keyEncoding);return f=S(f,N),f.keyEncoding=N.format,f.limit===0?this.nextTick(x):this._clear(f,K=>{if(K)return x(K);this.emit("clear",a),x()}),x[h]}_clear(f,x){this.nextTick(x)}iterator(f){const x=this.keyEncoding(f&&f.keyEncoding),a=this.valueEncoding(f&&f.valueEncoding);if(f=S(f,x),f.keys=f.keys!==!1,f.values=f.values!==!1,f[i.keyEncoding]=x,f[i.valueEncoding]=a,f.keyEncoding=x.format,f.valueEncoding=a.format,this[O]==="opening")return new d(this,f);if(this[O]!=="open")throw new s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(f)}_iterator(f){return new i(this,f)}keys(f){const x=this.keyEncoding(f&&f.keyEncoding),a=this.valueEncoding(f&&f.valueEncoding);if(f=S(f,x),f[i.keyEncoding]=x,f[i.valueEncoding]=a,f.keyEncoding=x.format,f.valueEncoding=a.format,this[O]==="opening")return new p(this,f);if(this[O]!=="open")throw new s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(f)}_keys(f){return new u(this,f)}values(f){const x=this.keyEncoding(f&&f.keyEncoding),a=this.valueEncoding(f&&f.valueEncoding);if(f=S(f,x),f[i.keyEncoding]=x,f[i.valueEncoding]=a,f.keyEncoding=x.format,f.valueEncoding=a.format,this[O]==="opening")return new E(this,f);if(this[O]!=="open")throw new s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(f)}_values(f){return new o(this,f)}defer(f){if(typeof f!="function")throw new TypeError("The first argument must be a function");this[_].push(f)}[y](){if(this[_].length===0)return;const f=this[_];this[_]=[];for(const x of f)x()}attachResource(f){if(typeof f!="object"||f===null||typeof f.close!="function")throw new TypeError("The first argument must be a resource object");this[c].add(f)}detachResource(f){this[c].delete(f)}_chainedBatch(){return new l(this)}_checkKey(f){if(f==null)return new s("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(f){if(f==null)return new s("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}D.prototype.nextTick=bs();const{AbstractSublevel:Z}=gs()({AbstractLevel:D});Rt.AbstractLevel=D,Rt.AbstractSublevel=Z;const j=function(P,f){return P[O]!=="open"?(P.nextTick(f,new s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},V=function(P){return Object.keys(P.supports.encodings).filter(f=>!!P.supports.encodings[f])};return Rt}var Hr;function zi(){return Hr||(Hr=1,He.AbstractLevel=Kr().AbstractLevel,He.AbstractSublevel=Kr().AbstractSublevel,He.AbstractIterator=it().AbstractIterator,He.AbstractKeyIterator=it().AbstractKeyIterator,He.AbstractValueIterator=it().AbstractValueIterator,He.AbstractChainedBatch=Hi().AbstractChainedBatch),He}/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ln,Gr;function ms(){if(Gr)return ln;Gr=1,ln=e;const t=Gi();function e(n,r,s){if(typeof r!="number")throw new Error("second argument must be a Number");let i,u,o,d,p,E=!0,l;Array.isArray(n)?(i=[],o=u=n.length):(d=Object.keys(n),i={},o=u=d.length);function w(S){function h(){s&&s(S,i),s=null}E?t(h):h()}function A(S,h,b){if(i[S]=b,h&&(p=!0),--o===0||h)w(h);else if(!p&&l<u){let c;d?(c=d[l],l+=1,n[c](function(g,_){A(c,g,_)})):(c=l,l+=1,n[c](function(g,_){A(c,g,_)}))}}l=r,o?d?d.some(function(S,h){return n[S](function(b,c){A(S,b,c)}),h===r-1}):n.some(function(S,h){return S(function(b,c){A(h,b,c)}),h===r-1}):w(null),E=!1}return ln}var dn={},hn,zr;function Yi(){return zr||(zr=1,hn=function(e){const n=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,r=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,s=e.gte===void 0,i=e.lte===void 0;return n!==void 0&&r!==void 0?IDBKeyRange.bound(n,r,s,i):n!==void 0?IDBKeyRange.lowerBound(n,s):r!==void 0?IDBKeyRange.upperBound(r,i):null}),hn}var yn,Yr;function Zi(){if(Yr)return yn;Yr=1;const t=new TextEncoder;return yn=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):t.encode(e)},yn}var Zr;function _s(){if(Zr)return dn;Zr=1;const{AbstractIterator:t}=zi(),e=Yi(),n=Zi(),r=Symbol("cache"),s=Symbol("finished"),i=Symbol("options"),u=Symbol("currentOptions"),o=Symbol("position"),d=Symbol("location"),p=Symbol("first"),E={};class l extends t{constructor(S,h,b){super(S,b),this[r]=[],this[s]=this.limit===0,this[i]=b,this[u]={...b},this[o]=void 0,this[d]=h,this[p]=!0}_nextv(S,h,b){if(this[p]=!1,this[s])return this.nextTick(b,null,[]);if(this[r].length>0)return S=Math.min(S,this[r].length),this.nextTick(b,null,this[r].splice(0,S));this[o]!==void 0&&(this[i].reverse?(this[u].lt=this[o],this[u].lte=void 0):(this[u].gt=this[o],this[u].gte=void 0));let c;try{c=e(this[u])}catch{return this[s]=!0,this.nextTick(b,null,[])}const g=this.db.db.transaction([this[d]],"readonly"),_=g.objectStore(this[d]),y=[];if(this[i].reverse){const m=!this[i].values&&_.openKeyCursor?"openKeyCursor":"openCursor";_[m](c,"prev").onsuccess=R=>{const O=R.target.result;if(O){const{key:L,value:z}=O;this[o]=L,y.push([this[i].keys&&L!==void 0?n(L):void 0,this[i].values&&z!==void 0?n(z):void 0]),y.length<S?O.continue():w(g)}else this[s]=!0}}else{let m,R;const O=()=>{if(m===void 0||R===void 0)return;const L=Math.max(m.length,R.length);L===0||S===1/0?this[s]=!0:this[o]=m[L-1],y.length=L;for(let z=0;z<L;z++){const I=m[z],C=R[z];y[z]=[this[i].keys&&I!==void 0?n(I):void 0,this[i].values&&C!==void 0?n(C):void 0]}w(g)};this[i].keys||S<1/0?_.getAllKeys(c,S<1/0?S:void 0).onsuccess=L=>{m=L.target.result,O()}:(m=[],this.nextTick(O)),this[i].values?_.getAll(c,S<1/0?S:void 0).onsuccess=L=>{R=L.target.result,O()}:(R=[],this.nextTick(O))}g.onabort=()=>{b(g.error||new Error("aborted by user")),b=null},g.oncomplete=()=>{b(null,y),b=null}}_next(S){if(this[r].length>0){const[h,b]=this[r].shift();this.nextTick(S,null,h,b)}else if(this[s])this.nextTick(S);else{let h=Math.min(100,this.limit-this.count);this[p]&&(this[p]=!1,h=1),this._nextv(h,E,(b,c)=>{if(b)return S(b);this[r]=c,this._next(S)})}}_all(S,h){this[p]=!1;const b=this[r].splice(0,this[r].length),c=this.limit-this.count-b.length;if(c<=0)return this.nextTick(h,null,b);this._nextv(c,E,(g,_)=>{if(g)return h(g);b.length>0&&(_=b.concat(_)),h(null,_)})}_seek(S,h){this[p]=!0,this[r]=[],this[s]=!1,this[o]=void 0,this[u]={...this[i]};let b;try{b=e(this[i])}catch{this[s]=!0;return}b!==null&&!b.includes(S)?this[s]=!0:this[i].reverse?this[u].lte=S:this[u].gte=S}}dn.Iterator=l;function w(A){typeof A.commit=="function"&&A.commit()}return dn}var pn,Jr;function Es(){return Jr||(Jr=1,pn=function(e,n,r,s,i){if(s.limit===0)return e.nextTick(i);const u=e.db.transaction([n],"readwrite"),o=u.objectStore(n);let d=0;u.oncomplete=function(){i()},u.onabort=function(){i(u.error||new Error("aborted by user"))};const p=o.openKeyCursor?"openKeyCursor":"openCursor",E=s.reverse?"prev":"next";o[p](r,E).onsuccess=function(l){const w=l.target.result;w&&(o.delete(w.key).onsuccess=function(){(s.limit<=0||++d<s.limit)&&w.continue()})}}),pn}var Xr;function vs(){if(Xr)return Jt;Xr=1;const{AbstractLevel:t}=zi(),e=Ue(),n=ms(),{fromCallback:r}=$t(),{Iterator:s}=_s(),i=Zi(),u=Es(),o=Yi(),d="level-js-",p=Symbol("idb"),E=Symbol("namePrefix"),l=Symbol("location"),w=Symbol("version"),A=Symbol("store"),S=Symbol("onComplete"),h=Symbol("promise");class b extends t{constructor(g,_,y){if(typeof _=="function"||typeof y=="function")throw new e("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:m,version:R,...O}=_||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},O),typeof g!="string")throw new Error("constructor requires a location string argument");this[l]=g,this[E]=m??d,this[w]=parseInt(R||1,10),this[p]=null}get location(){return this[l]}get namePrefix(){return this[E]}get version(){return this[w]}get db(){return this[p]}get type(){return"browser-level"}_open(g,_){const y=indexedDB.open(this[E]+this[l],this[w]);y.onerror=function(){_(y.error||new Error("unknown error"))},y.onsuccess=()=>{this[p]=y.result,_()},y.onupgradeneeded=m=>{const R=m.target.result;R.objectStoreNames.contains(this[l])||R.createObjectStore(this[l])}}[A](g){return this[p].transaction([this[l]],g).objectStore(this[l])}[S](g,_){const y=g.transaction;y.onabort=function(){_(y.error||new Error("aborted by user"))},y.oncomplete=function(){_(null,g.result)}}_get(g,_,y){const m=this[A]("readonly");let R;try{R=m.get(g)}catch(O){return this.nextTick(y,O)}this[S](R,function(O,L){if(O)return y(O);if(L===void 0)return y(new e("Entry not found",{code:"LEVEL_NOT_FOUND"}));y(null,i(L))})}_getMany(g,_,y){const m=this[A]("readonly"),R=g.map(O=>L=>{let z;try{z=m.get(O)}catch(I){return L(I)}z.onsuccess=()=>{const I=z.result;L(null,I===void 0?I:i(I))},z.onerror=I=>{I.stopPropagation(),L(z.error)}});n(R,16,y)}_del(g,_,y){const m=this[A]("readwrite");let R;try{R=m.delete(g)}catch(O){return this.nextTick(y,O)}this[S](R,y)}_put(g,_,y,m){const R=this[A]("readwrite");let O;try{O=R.put(_,g)}catch(L){return this.nextTick(m,L)}this[S](O,m)}_iterator(g){return new s(this,this[l],g)}_batch(g,_,y){const m=this[A]("readwrite"),R=m.transaction;let O=0,L;R.onabort=function(){y(L||R.error||new Error("aborted by user"))},R.oncomplete=function(){y()};function z(){const I=g[O++],C=I.key;let F;try{F=I.type==="del"?m.delete(C):m.put(I.value,C)}catch(D){L=D,R.abort();return}O<g.length?F.onsuccess=z:typeof R.commit=="function"&&R.commit()}z()}_clear(g,_){let y,m;try{y=o(g)}catch{return this.nextTick(_)}if(g.limit>=0)return u(this,this[l],y,g,_);try{const R=this[A]("readwrite");m=y?R.delete(y):R.clear()}catch(R){return this.nextTick(_,R)}this[S](m,_)}_close(g){this[p].close(),this.nextTick(g)}}return b.destroy=function(c,g,_){typeof g=="function"&&(_=g,g=d),_=r(_,h);const y=indexedDB.deleteDatabase(g+c);return y.onsuccess=function(){_()},y.onerror=function(m){_(m)},_[h]},Jt.BrowserLevel=b,Jt}var Qr;function Ss(){return Qr||(Qr=1,Zt.Level=vs().BrowserLevel),Zt}Ss();var bn={exports:{}},wn={exports:{}},gn,ei;function he(){return ei||(ei=1,gn={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}),gn}var mn={exports:{}},bt={exports:{}},ti;function mt(){if(ti)return bt.exports;ti=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return bt.exports=t,bt.exports.AbortSignal=e,bt.exports.default=t,bt.exports}var ni;function Ee(){return ni||(ni=1,(function(t){const e=Ce(),{kResistStopPropagation:n,SymbolDispose:r}=he(),s=globalThis.AbortSignal||mt().AbortSignal,i=globalThis.AbortController||mt().AbortController,u=Object.getPrototypeOf(async function(){}).constructor,o=globalThis.Blob||e.Blob,d=typeof o<"u"?function(A){return A instanceof o}:function(A){return!1},p=(w,A)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new ERR_INVALID_ARG_TYPE(A,"AbortSignal",w)},E=(w,A)=>{if(typeof w!="function")throw new ERR_INVALID_ARG_TYPE(A,"Function",w)};class l extends Error{constructor(A){if(!Array.isArray(A))throw new TypeError(`Expected input to be an Array, got ${typeof A}`);let S="";for(let h=0;h<A.length;h++)S+=`    ${A[h].stack}
`;super(S),this.name="AggregateError",this.errors=A}}t.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(w){let A=!1;return function(...S){A||(A=!0,w.apply(this,S))}},createDeferredPromise:function(){let w,A;return{promise:new Promise((h,b)=>{w=h,A=b}),resolve:w,reject:A}},promisify(w){return new Promise((A,S)=>{w((h,...b)=>h?S(h):A(...b))})},debuglog(){return function(){}},format(w,...A){return w.replace(/%([sdifj])/g,function(...[S,h]){const b=A.shift();return h==="f"?b.toFixed(6):h==="j"?JSON.stringify(b):h==="s"&&typeof b=="object"?`${b.constructor!==Object?b.constructor.name:""} {}`.trim():b.toString()})},inspect(w){switch(typeof w){case"string":if(w.includes("'"))if(w.includes('"')){if(!w.includes("`")&&!w.includes("${"))return`\`${w}\``}else return`"${w}"`;return`'${w}'`;case"number":return isNaN(w)?"NaN":Object.is(w,-0)?String(w):w;case"bigint":return`${String(w)}n`;case"boolean":case"undefined":return String(w);case"object":return"{}"}},types:{isAsyncFunction(w){return w instanceof u},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:d,deprecate(w,A){return w},addAbortListener:Et().addAbortListener||function(A,S){if(A===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",A);p(A,"signal"),E(S,"listener");let h;return A.aborted?queueMicrotask(()=>S()):(A.addEventListener("abort",S,{__proto__:null,once:!0,[n]:!0}),h=()=>{A.removeEventListener("abort",S)}),{__proto__:null,[r](){var b;(b=h)===null||b===void 0||b()}}},AbortSignalAny:s.any||function(A){if(A.length===1)return A[0];const S=new i,h=()=>S.abort();return A.forEach(b=>{p(b,"signals"),b.addEventListener("abort",h,{once:!0})}),S.signal.addEventListener("abort",()=>{A.forEach(b=>b.removeEventListener("abort",h))},{once:!0}),S.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(mn)),mn.exports}var Nt={},_n,ri;function xe(){if(ri)return _n;ri=1;const{format:t,inspect:e,AggregateError:n}=Ee(),r=globalThis.AggregateError||n,s=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",d={};function p(b,c){if(!b)throw new d.ERR_INTERNAL_ASSERTION(c)}function E(b){let c="",g=b.length;const _=b[0]==="-"?1:0;for(;g>=_+4;g-=3)c=`_${b.slice(g-3,g)}${c}`;return`${b.slice(0,g)}${c}`}function l(b,c,g){if(typeof c=="function")return p(c.length<=g.length,`Code: ${b}; The provided arguments length (${g.length}) does not match the required ones (${c.length}).`),c(...g);const _=(c.match(/%[dfijoOs]/g)||[]).length;return p(_===g.length,`Code: ${b}; The provided arguments length (${g.length}) does not match the required ones (${_}).`),g.length===0?c:t(c,...g)}function w(b,c,g){g||(g=Error);class _ extends g{constructor(...m){super(l(b,c,m))}toString(){return`${this.name} [${b}]: ${this.message}`}}Object.defineProperties(_.prototype,{name:{value:g.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${b}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),_.prototype.code=b,_.prototype[s]=!0,d[b]=_}function A(b){const c=o+b.name;return Object.defineProperty(b,"name",{value:c}),b}function S(b,c){if(b&&c&&b!==c){if(Array.isArray(c.errors))return c.errors.push(b),c;const g=new r([c,b],c.message);return g.code=c.code,g}return b||c}class h extends Error{constructor(c="The operation was aborted",g=void 0){if(g!==void 0&&typeof g!="object")throw new d.ERR_INVALID_ARG_TYPE("options","Object",g);super(c,g),this.code="ABORT_ERR",this.name="AbortError"}}return w("ERR_ASSERTION","%s",Error),w("ERR_INVALID_ARG_TYPE",(b,c,g)=>{p(typeof b=="string","'name' must be a string"),Array.isArray(c)||(c=[c]);let _="The ";b.endsWith(" argument")?_+=`${b} `:_+=`"${b}" ${b.includes(".")?"property":"argument"} `,_+="must be ";const y=[],m=[],R=[];for(const L of c)p(typeof L=="string","All expected entries have to be of type string"),i.includes(L)?y.push(L.toLowerCase()):u.test(L)?m.push(L):(p(L!=="object",'The value "object" should be written as "Object"'),R.push(L));if(m.length>0){const L=y.indexOf("object");L!==-1&&(y.splice(y,L,1),m.push("Object"))}if(y.length>0){switch(y.length){case 1:_+=`of type ${y[0]}`;break;case 2:_+=`one of type ${y[0]} or ${y[1]}`;break;default:{const L=y.pop();_+=`one of type ${y.join(", ")}, or ${L}`}}(m.length>0||R.length>0)&&(_+=" or ")}if(m.length>0){switch(m.length){case 1:_+=`an instance of ${m[0]}`;break;case 2:_+=`an instance of ${m[0]} or ${m[1]}`;break;default:{const L=m.pop();_+=`an instance of ${m.join(", ")}, or ${L}`}}R.length>0&&(_+=" or ")}switch(R.length){case 0:break;case 1:R[0].toLowerCase()!==R[0]&&(_+="an "),_+=`${R[0]}`;break;case 2:_+=`one of ${R[0]} or ${R[1]}`;break;default:{const L=R.pop();_+=`one of ${R.join(", ")}, or ${L}`}}if(g==null)_+=`. Received ${g}`;else if(typeof g=="function"&&g.name)_+=`. Received function ${g.name}`;else if(typeof g=="object"){var O;if((O=g.constructor)!==null&&O!==void 0&&O.name)_+=`. Received an instance of ${g.constructor.name}`;else{const L=e(g,{depth:-1});_+=`. Received ${L}`}}else{let L=e(g,{colors:!1});L.length>25&&(L=`${L.slice(0,25)}...`),_+=`. Received type ${typeof g} (${L})`}return _},TypeError),w("ERR_INVALID_ARG_VALUE",(b,c,g="is invalid")=>{let _=e(c);return _.length>128&&(_=_.slice(0,128)+"..."),`The ${b.includes(".")?"property":"argument"} '${b}' ${g}. Received ${_}`},TypeError),w("ERR_INVALID_RETURN_VALUE",(b,c,g)=>{var _;const y=g!=null&&(_=g.constructor)!==null&&_!==void 0&&_.name?`instance of ${g.constructor.name}`:`type ${typeof g}`;return`Expected ${b} to be returned from the "${c}" function but got ${y}.`},TypeError),w("ERR_MISSING_ARGS",(...b)=>{p(b.length>0,"At least one arg needs to be specified");let c;const g=b.length;switch(b=(Array.isArray(b)?b:[b]).map(_=>`"${_}"`).join(" or "),g){case 1:c+=`The ${b[0]} argument`;break;case 2:c+=`The ${b[0]} and ${b[1]} arguments`;break;default:{const _=b.pop();c+=`The ${b.join(", ")}, and ${_} arguments`}break}return`${c} must be specified`},TypeError),w("ERR_OUT_OF_RANGE",(b,c,g)=>{p(c,'Missing "range" argument');let _;return Number.isInteger(g)&&Math.abs(g)>2**32?_=E(String(g)):typeof g=="bigint"?(_=String(g),(g>2n**32n||g<-(2n**32n))&&(_=E(_)),_+="n"):_=e(g),`The value of "${b}" is out of range. It must be ${c}. Received ${_}`},RangeError),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),w("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),w("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),w("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),w("ERR_STREAM_WRITE_AFTER_END","write after end",Error),w("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),_n={AbortError:h,aggregateTwoErrors:A(S),hideStackFrames:A,codes:d},_n}var En,ii;function vt(){if(ii)return En;ii=1;const{ArrayIsArray:t,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:s,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:o,NumberParseInt:d,ObjectPrototypeHasOwnProperty:p,RegExpPrototypeExec:E,String:l,StringPrototypeToUpperCase:w,StringPrototypeTrim:A}=he(),{hideStackFrames:S,codes:{ERR_SOCKET_BAD_PORT:h,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:c,ERR_OUT_OF_RANGE:g,ERR_UNKNOWN_SIGNAL:_}}=xe(),{normalizeEncoding:y}=Ee(),{isAsyncFunction:m,isArrayBufferView:R}=Ee().types,O={};function L(k){return k===(k|0)}function z(k){return k===k>>>0}const I=/^[0-7]+$/,C="must be a 32-bit unsigned integer or an octal string";function F(k,G,Q){if(typeof k>"u"&&(k=Q),typeof k=="string"){if(E(I,k)===null)throw new c(G,k,C);k=d(k,8)}return j(k,G),k}const D=S((k,G,Q=o,H=u)=>{if(typeof k!="number")throw new b(G,"number",k);if(!s(k))throw new g(G,"an integer",k);if(k<Q||k>H)throw new g(G,`>= ${Q} && <= ${H}`,k)}),Z=S((k,G,Q=-2147483648,H=2147483647)=>{if(typeof k!="number")throw new b(G,"number",k);if(!s(k))throw new g(G,"an integer",k);if(k<Q||k>H)throw new g(G,`>= ${Q} && <= ${H}`,k)}),j=S((k,G,Q=!1)=>{if(typeof k!="number")throw new b(G,"number",k);if(!s(k))throw new g(G,"an integer",k);const H=Q?1:0,ce=4294967295;if(k<H||k>ce)throw new g(G,`>= ${H} && <= ${ce}`,k)});function V(k,G){if(typeof k!="string")throw new b(G,"string",k)}function P(k,G,Q=void 0,H){if(typeof k!="number")throw new b(G,"number",k);if(Q!=null&&k<Q||H!=null&&k>H||(Q!=null||H!=null)&&i(k))throw new g(G,`${Q!=null?`>= ${Q}`:""}${Q!=null&&H!=null?" && ":""}${H!=null?`<= ${H}`:""}`,k)}const f=S((k,G,Q)=>{if(!e(Q,k)){const ce="must be one of: "+n(r(Q,ve=>typeof ve=="string"?`'${ve}'`:l(ve)),", ");throw new c(G,k,ce)}});function x(k,G){if(typeof k!="boolean")throw new b(G,"boolean",k)}function a(k,G,Q){return k==null||!p(k,G)?Q:k[G]}const N=S((k,G,Q=null)=>{const H=a(Q,"allowArray",!1),ce=a(Q,"allowFunction",!1);if(!a(Q,"nullable",!1)&&k===null||!H&&t(k)||typeof k!="object"&&(!ce||typeof k!="function"))throw new b(G,"Object",k)}),K=S((k,G)=>{if(k!=null&&typeof k!="object"&&typeof k!="function")throw new b(G,"a dictionary",k)}),U=S((k,G,Q=0)=>{if(!t(k))throw new b(G,"Array",k);if(k.length<Q){const H=`must be longer than ${Q}`;throw new c(G,k,H)}});function Y(k,G){U(k,G);for(let Q=0;Q<k.length;Q++)V(k[Q],`${G}[${Q}]`)}function oe(k,G){U(k,G);for(let Q=0;Q<k.length;Q++)x(k[Q],`${G}[${Q}]`)}function te(k,G){U(k,G);for(let Q=0;Q<k.length;Q++){const H=k[Q],ce=`${G}[${Q}]`;if(H==null)throw new b(ce,"AbortSignal",H);ue(H,ce)}}function se(k,G="signal"){if(V(k,G),O[k]===void 0)throw O[w(k)]!==void 0?new _(k+" (signals must use all capital letters)"):new _(k)}const $=S((k,G="buffer")=>{if(!R(k))throw new b(G,["Buffer","TypedArray","DataView"],k)});function W(k,G){const Q=y(G),H=k.length;if(Q==="hex"&&H%2!==0)throw new c("encoding",G,`is invalid for data of length ${H}`)}function ie(k,G="Port",Q=!0){if(typeof k!="number"&&typeof k!="string"||typeof k=="string"&&A(k).length===0||+k!==+k>>>0||k>65535||k===0&&!Q)throw new h(G,k,Q);return k|0}const ue=S((k,G)=>{if(k!==void 0&&(k===null||typeof k!="object"||!("aborted"in k)))throw new b(G,"AbortSignal",k)}),ae=S((k,G)=>{if(typeof k!="function")throw new b(G,"Function",k)}),B=S((k,G)=>{if(typeof k!="function"||m(k))throw new b(G,"Function",k)}),M=S((k,G)=>{if(k!==void 0)throw new b(G,"undefined",k)});function q(k,G,Q){if(!e(Q,k))throw new b(G,`('${n(Q,"|")}')`,k)}const J=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ee(k,G){if(typeof k>"u"||!E(J,k))throw new c(G,k,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function X(k){if(typeof k=="string")return ee(k,"hints"),k;if(t(k)){const G=k.length;let Q="";if(G===0)return Q;for(let H=0;H<G;H++){const ce=k[H];ee(ce,"hints"),Q+=ce,H!==G-1&&(Q+=", ")}return Q}throw new c("hints",k,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return En={isInt32:L,isUint32:z,parseFileMode:F,validateArray:U,validateStringArray:Y,validateBooleanArray:oe,validateAbortSignalArray:te,validateBoolean:x,validateBuffer:$,validateDictionary:K,validateEncoding:W,validateFunction:ae,validateInt32:Z,validateInteger:D,validateNumber:P,validateObject:N,validateOneOf:f,validatePlainFunction:B,validatePort:ie,validateSignalName:se,validateString:V,validateUint32:j,validateUndefined:M,validateUnion:q,validateAbortSignal:ue,validateLinkHeaderValue:X},En}var kt={exports:{}},vn={exports:{}},oi;function st(){if(oi)return vn.exports;oi=1;var t=vn.exports={},e,n;function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=r}catch{e=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=s}catch{n=s}})();function i(h){if(e===setTimeout)return setTimeout(h,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(h,0);try{return e(h,0)}catch{try{return e.call(null,h,0)}catch{return e.call(this,h,0)}}}function u(h){if(n===clearTimeout)return clearTimeout(h);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(h);try{return n(h)}catch{try{return n.call(null,h)}catch{return n.call(this,h)}}}var o=[],d=!1,p,E=-1;function l(){!d||!p||(d=!1,p.length?o=p.concat(o):E=-1,o.length&&w())}function w(){if(!d){var h=i(l);d=!0;for(var b=o.length;b;){for(p=o,o=[];++E<b;)p&&p[E].run();E=-1,b=o.length}p=null,d=!1,u(h)}}t.nextTick=function(h){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new A(h,b)),o.length===1&&!d&&i(w)};function A(h,b){this.fun=h,this.array=b}A.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function S(){}return t.on=S,t.addListener=S,t.once=S,t.off=S,t.removeListener=S,t.removeAllListeners=S,t.emit=S,t.prependListener=S,t.prependOnceListener=S,t.listeners=function(h){return[]},t.binding=function(h){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(h){throw new Error("process.chdir is not supported")},t.umask=function(){return 0},vn.exports}var Sn,si;function We(){if(si)return Sn;si=1;const{SymbolAsyncIterator:t,SymbolIterator:e,SymbolFor:n}=he(),r=n("nodejs.stream.destroyed"),s=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),u=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),d=n("nodejs.webstream.isClosedPromise"),p=n("nodejs.webstream.controllerErrorFunction");function E(a,N=!1){var K;return!!(a&&typeof a.pipe=="function"&&typeof a.on=="function"&&(!N||typeof a.pause=="function"&&typeof a.resume=="function")&&(!a._writableState||((K=a._readableState)===null||K===void 0?void 0:K.readable)!==!1)&&(!a._writableState||a._readableState))}function l(a){var N;return!!(a&&typeof a.write=="function"&&typeof a.on=="function"&&(!a._readableState||((N=a._writableState)===null||N===void 0?void 0:N.writable)!==!1))}function w(a){return!!(a&&typeof a.pipe=="function"&&a._readableState&&typeof a.on=="function"&&typeof a.write=="function")}function A(a){return a&&(a._readableState||a._writableState||typeof a.write=="function"&&typeof a.on=="function"||typeof a.pipe=="function"&&typeof a.on=="function")}function S(a){return!!(a&&!A(a)&&typeof a.pipeThrough=="function"&&typeof a.getReader=="function"&&typeof a.cancel=="function")}function h(a){return!!(a&&!A(a)&&typeof a.getWriter=="function"&&typeof a.abort=="function")}function b(a){return!!(a&&!A(a)&&typeof a.readable=="object"&&typeof a.writable=="object")}function c(a){return S(a)||h(a)||b(a)}function g(a,N){return a==null?!1:N===!0?typeof a[t]=="function":N===!1?typeof a[e]=="function":typeof a[t]=="function"||typeof a[e]=="function"}function _(a){if(!A(a))return null;const N=a._writableState,K=a._readableState,U=N||K;return!!(a.destroyed||a[r]||U!=null&&U.destroyed)}function y(a){if(!l(a))return null;if(a.writableEnded===!0)return!0;const N=a._writableState;return N!=null&&N.errored?!1:typeof(N==null?void 0:N.ended)!="boolean"?null:N.ended}function m(a,N){if(!l(a))return null;if(a.writableFinished===!0)return!0;const K=a._writableState;return K!=null&&K.errored?!1:typeof(K==null?void 0:K.finished)!="boolean"?null:!!(K.finished||N===!1&&K.ended===!0&&K.length===0)}function R(a){if(!E(a))return null;if(a.readableEnded===!0)return!0;const N=a._readableState;return!N||N.errored?!1:typeof(N==null?void 0:N.ended)!="boolean"?null:N.ended}function O(a,N){if(!E(a))return null;const K=a._readableState;return K!=null&&K.errored?!1:typeof(K==null?void 0:K.endEmitted)!="boolean"?null:!!(K.endEmitted||N===!1&&K.ended===!0&&K.length===0)}function L(a){return a&&a[i]!=null?a[i]:typeof(a==null?void 0:a.readable)!="boolean"?null:_(a)?!1:E(a)&&a.readable&&!O(a)}function z(a){return a&&a[u]!=null?a[u]:typeof(a==null?void 0:a.writable)!="boolean"?null:_(a)?!1:l(a)&&a.writable&&!y(a)}function I(a,N){return A(a)?_(a)?!0:!((N==null?void 0:N.readable)!==!1&&L(a)||(N==null?void 0:N.writable)!==!1&&z(a)):null}function C(a){var N,K;return A(a)?a.writableErrored?a.writableErrored:(N=(K=a._writableState)===null||K===void 0?void 0:K.errored)!==null&&N!==void 0?N:null:null}function F(a){var N,K;return A(a)?a.readableErrored?a.readableErrored:(N=(K=a._readableState)===null||K===void 0?void 0:K.errored)!==null&&N!==void 0?N:null:null}function D(a){if(!A(a))return null;if(typeof a.closed=="boolean")return a.closed;const N=a._writableState,K=a._readableState;return typeof(N==null?void 0:N.closed)=="boolean"||typeof(K==null?void 0:K.closed)=="boolean"?(N==null?void 0:N.closed)||(K==null?void 0:K.closed):typeof a._closed=="boolean"&&Z(a)?a._closed:null}function Z(a){return typeof a._closed=="boolean"&&typeof a._defaultKeepAlive=="boolean"&&typeof a._removedConnection=="boolean"&&typeof a._removedContLen=="boolean"}function j(a){return typeof a._sent100=="boolean"&&Z(a)}function V(a){var N;return typeof a._consuming=="boolean"&&typeof a._dumped=="boolean"&&((N=a.req)===null||N===void 0?void 0:N.upgradeOrConnect)===void 0}function P(a){if(!A(a))return null;const N=a._writableState,K=a._readableState,U=N||K;return!U&&j(a)||!!(U&&U.autoDestroy&&U.emitClose&&U.closed===!1)}function f(a){var N;return!!(a&&((N=a[o])!==null&&N!==void 0?N:a.readableDidRead||a.readableAborted))}function x(a){var N,K,U,Y,oe,te,se,$,W,ie;return!!(a&&((N=(K=(U=(Y=(oe=(te=a[s])!==null&&te!==void 0?te:a.readableErrored)!==null&&oe!==void 0?oe:a.writableErrored)!==null&&Y!==void 0?Y:(se=a._readableState)===null||se===void 0?void 0:se.errorEmitted)!==null&&U!==void 0?U:($=a._writableState)===null||$===void 0?void 0:$.errorEmitted)!==null&&K!==void 0?K:(W=a._readableState)===null||W===void 0?void 0:W.errored)!==null&&N!==void 0?N:!((ie=a._writableState)===null||ie===void 0)&&ie.errored))}return Sn={isDestroyed:_,kIsDestroyed:r,isDisturbed:f,kIsDisturbed:o,isErrored:x,kIsErrored:s,isReadable:L,kIsReadable:i,kIsClosedPromise:d,kControllerErrorFunction:p,kIsWritable:u,isClosed:D,isDuplexNodeStream:w,isFinished:I,isIterable:g,isReadableNodeStream:E,isReadableStream:S,isReadableEnded:R,isReadableFinished:O,isReadableErrored:F,isNodeStream:A,isWebStream:c,isWritable:z,isWritableNodeStream:l,isWritableStream:h,isWritableEnded:y,isWritableFinished:m,isWritableErrored:C,isServerRequest:V,isServerResponse:j,willEmitClose:P,isTransformStream:b},Sn}var ai;function Je(){if(ai)return kt.exports;ai=1;const t=st(),{AbortError:e,codes:n}=xe(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:s}=n,{kEmptyObject:i,once:u}=Ee(),{validateAbortSignal:o,validateFunction:d,validateObject:p,validateBoolean:E}=vt(),{Promise:l,PromisePrototypeThen:w,SymbolDispose:A}=he(),{isClosed:S,isReadable:h,isReadableNodeStream:b,isReadableStream:c,isReadableFinished:g,isReadableErrored:_,isWritable:y,isWritableNodeStream:m,isWritableStream:R,isWritableFinished:O,isWritableErrored:L,isNodeStream:z,willEmitClose:I,kIsClosedPromise:C}=We();let F;function D(f){return f.setHeader&&typeof f.abort=="function"}const Z=()=>{};function j(f,x,a){var N,K;if(arguments.length===2?(a=x,x=i):x==null?x=i:p(x,"options"),d(a,"callback"),o(x.signal,"options.signal"),a=u(a),c(f)||R(f))return V(f,x,a);if(!z(f))throw new r("stream",["ReadableStream","WritableStream","Stream"],f);const U=(N=x.readable)!==null&&N!==void 0?N:b(f),Y=(K=x.writable)!==null&&K!==void 0?K:m(f),oe=f._writableState,te=f._readableState,se=()=>{f.writable||ie()};let $=I(f)&&b(f)===U&&m(f)===Y,W=O(f,!1);const ie=()=>{W=!0,f.destroyed&&($=!1),!($&&(!f.readable||U))&&(!U||ue)&&a.call(f)};let ue=g(f,!1);const ae=()=>{ue=!0,f.destroyed&&($=!1),!($&&(!f.writable||Y))&&(!Y||W)&&a.call(f)},B=k=>{a.call(f,k)};let M=S(f);const q=()=>{M=!0;const k=L(f)||_(f);if(k&&typeof k!="boolean")return a.call(f,k);if(U&&!ue&&b(f,!0)&&!g(f,!1))return a.call(f,new s);if(Y&&!W&&!O(f,!1))return a.call(f,new s);a.call(f)},J=()=>{M=!0;const k=L(f)||_(f);if(k&&typeof k!="boolean")return a.call(f,k);a.call(f)},ee=()=>{f.req.on("finish",ie)};D(f)?(f.on("complete",ie),$||f.on("abort",q),f.req?ee():f.on("request",ee)):Y&&!oe&&(f.on("end",se),f.on("close",se)),!$&&typeof f.aborted=="boolean"&&f.on("aborted",q),f.on("end",ae),f.on("finish",ie),x.error!==!1&&f.on("error",B),f.on("close",q),M?t.nextTick(q):oe!=null&&oe.errorEmitted||te!=null&&te.errorEmitted?$||t.nextTick(J):(!U&&(!$||h(f))&&(W||y(f)===!1)||!Y&&(!$||y(f))&&(ue||h(f)===!1)||te&&f.req&&f.aborted)&&t.nextTick(J);const X=()=>{a=Z,f.removeListener("aborted",q),f.removeListener("complete",ie),f.removeListener("abort",q),f.removeListener("request",ee),f.req&&f.req.removeListener("finish",ie),f.removeListener("end",se),f.removeListener("close",se),f.removeListener("finish",ie),f.removeListener("end",ae),f.removeListener("error",B),f.removeListener("close",q)};if(x.signal&&!M){const k=()=>{const G=a;X(),G.call(f,new e(void 0,{cause:x.signal.reason}))};if(x.signal.aborted)t.nextTick(k);else{F=F||Ee().addAbortListener;const G=F(x.signal,k),Q=a;a=u((...H)=>{G[A](),Q.apply(f,H)})}}return X}function V(f,x,a){let N=!1,K=Z;if(x.signal)if(K=()=>{N=!0,a.call(f,new e(void 0,{cause:x.signal.reason}))},x.signal.aborted)t.nextTick(K);else{F=F||Ee().addAbortListener;const Y=F(x.signal,K),oe=a;a=u((...te)=>{Y[A](),oe.apply(f,te)})}const U=(...Y)=>{N||t.nextTick(()=>a.apply(f,Y))};return w(f[C].promise,U,U),Z}function P(f,x){var a;let N=!1;return x===null&&(x=i),(a=x)!==null&&a!==void 0&&a.cleanup&&(E(x.cleanup,"cleanup"),N=x.cleanup),new l((K,U)=>{const Y=j(f,x,oe=>{N&&Y(),oe?U(oe):K()})})}return kt.exports=j,kt.exports.finished=P,kt.exports}var xn,fi;function ut(){if(fi)return xn;fi=1;const t=st(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=xe(),{Symbol:s}=he(),{kIsDestroyed:i,isDestroyed:u,isFinished:o,isServerRequest:d}=We(),p=s("kDestroy"),E=s("kConstruct");function l(I,C,F){I&&(I.stack,C&&!C.errored&&(C.errored=I),F&&!F.errored&&(F.errored=I))}function w(I,C){const F=this._readableState,D=this._writableState,Z=D||F;return D!=null&&D.destroyed||F!=null&&F.destroyed?(typeof C=="function"&&C(),this):(l(I,D,F),D&&(D.destroyed=!0),F&&(F.destroyed=!0),Z.constructed?A(this,I,C):this.once(p,function(j){A(this,e(j,I),C)}),this)}function A(I,C,F){let D=!1;function Z(j){if(D)return;D=!0;const V=I._readableState,P=I._writableState;l(j,P,V),P&&(P.closed=!0),V&&(V.closed=!0),typeof F=="function"&&F(j),j?t.nextTick(S,I,j):t.nextTick(h,I)}try{I._destroy(C||null,Z)}catch(j){Z(j)}}function S(I,C){b(I,C),h(I)}function h(I){const C=I._readableState,F=I._writableState;F&&(F.closeEmitted=!0),C&&(C.closeEmitted=!0),(F!=null&&F.emitClose||C!=null&&C.emitClose)&&I.emit("close")}function b(I,C){const F=I._readableState,D=I._writableState;D!=null&&D.errorEmitted||F!=null&&F.errorEmitted||(D&&(D.errorEmitted=!0),F&&(F.errorEmitted=!0),I.emit("error",C))}function c(){const I=this._readableState,C=this._writableState;I&&(I.constructed=!0,I.closed=!1,I.closeEmitted=!1,I.destroyed=!1,I.errored=null,I.errorEmitted=!1,I.reading=!1,I.ended=I.readable===!1,I.endEmitted=I.readable===!1),C&&(C.constructed=!0,C.destroyed=!1,C.closed=!1,C.closeEmitted=!1,C.errored=null,C.errorEmitted=!1,C.finalCalled=!1,C.prefinished=!1,C.ended=C.writable===!1,C.ending=C.writable===!1,C.finished=C.writable===!1)}function g(I,C,F){const D=I._readableState,Z=I._writableState;if(Z!=null&&Z.destroyed||D!=null&&D.destroyed)return this;D!=null&&D.autoDestroy||Z!=null&&Z.autoDestroy?I.destroy(C):C&&(C.stack,Z&&!Z.errored&&(Z.errored=C),D&&!D.errored&&(D.errored=C),F?t.nextTick(b,I,C):b(I,C))}function _(I,C){if(typeof I._construct!="function")return;const F=I._readableState,D=I._writableState;F&&(F.constructed=!1),D&&(D.constructed=!1),I.once(E,C),!(I.listenerCount(E)>1)&&t.nextTick(y,I)}function y(I){let C=!1;function F(D){if(C){g(I,D??new n);return}C=!0;const Z=I._readableState,j=I._writableState,V=j||Z;Z&&(Z.constructed=!0),j&&(j.constructed=!0),V.destroyed?I.emit(p,D):D?g(I,D,!0):t.nextTick(m,I)}try{I._construct(D=>{t.nextTick(F,D)})}catch(D){t.nextTick(F,D)}}function m(I){I.emit(E)}function R(I){return(I==null?void 0:I.setHeader)&&typeof I.abort=="function"}function O(I){I.emit("close")}function L(I,C){I.emit("error",C),t.nextTick(O,I)}function z(I,C){!I||u(I)||(!C&&!o(I)&&(C=new r),d(I)?(I.socket=null,I.destroy(C)):R(I)?I.abort():R(I.req)?I.req.abort():typeof I.destroy=="function"?I.destroy(C):typeof I.close=="function"?I.close():C?t.nextTick(L,I,C):t.nextTick(O,I),I.destroyed||(I[i]=!0))}return xn={construct:_,destroyer:z,destroy:w,undestroy:c,errorOrDestroy:g},xn}var An,ui;function er(){if(ui)return An;ui=1;const{ArrayIsArray:t,ObjectSetPrototypeOf:e}=he(),{EventEmitter:n}=Et();function r(i){n.call(this,i)}e(r.prototype,n.prototype),e(r,n),r.prototype.pipe=function(i,u){const o=this;function d(h){i.writable&&i.write(h)===!1&&o.pause&&o.pause()}o.on("data",d);function p(){o.readable&&o.resume&&o.resume()}i.on("drain",p),!i._isStdio&&(!u||u.end!==!1)&&(o.on("end",l),o.on("close",w));let E=!1;function l(){E||(E=!0,i.end())}function w(){E||(E=!0,typeof i.destroy=="function"&&i.destroy())}function A(h){S(),n.listenerCount(this,"error")===0&&this.emit("error",h)}s(o,"error",A),s(i,"error",A);function S(){o.removeListener("data",d),i.removeListener("drain",p),o.removeListener("end",l),o.removeListener("close",w),o.removeListener("error",A),i.removeListener("error",A),o.removeListener("end",S),o.removeListener("close",S),i.removeListener("close",S)}return o.on("end",S),o.on("close",S),i.on("close",S),i.emit("pipe",o),i};function s(i,u,o){if(typeof i.prependListener=="function")return i.prependListener(u,o);!i._events||!i._events[u]?i.on(u,o):t(i._events[u])?i._events[u].unshift(o):i._events[u]=[o,i._events[u]]}return An={Stream:r,prependListener:s},An}var Tn={exports:{}},ci;function qt(){return ci||(ci=1,(function(t){const{SymbolDispose:e}=he(),{AbortError:n,codes:r}=xe(),{isNodeStream:s,isWebStream:i,kControllerErrorFunction:u}=We(),o=Je(),{ERR_INVALID_ARG_TYPE:d}=r;let p;const E=(l,w)=>{if(typeof l!="object"||!("aborted"in l))throw new d(w,"AbortSignal",l)};t.exports.addAbortSignal=function(w,A){if(E(w,"signal"),!s(A)&&!i(A))throw new d("stream",["ReadableStream","WritableStream","Stream"],A);return t.exports.addAbortSignalNoValidate(w,A)},t.exports.addAbortSignalNoValidate=function(l,w){if(typeof l!="object"||!("aborted"in l))return w;const A=s(w)?()=>{w.destroy(new n(void 0,{cause:l.reason}))}:()=>{w[u](new n(void 0,{cause:l.reason}))};if(l.aborted)A();else{p=p||Ee().addAbortListener;const S=p(l,A);o(w,S[e])}return w}})(Tn)),Tn.exports}var Rn,li;function xs(){if(li)return Rn;li=1;const{StringPrototypeSlice:t,SymbolIterator:e,TypedArrayPrototypeSet:n,Uint8Array:r}=he(),{Buffer:s}=Ce(),{inspect:i}=Ee();return Rn=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const d={data:o,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}unshift(o){const d={data:o,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let d=this.head,p=""+d.data;for(;(d=d.next)!==null;)p+=o+d.data;return p}concat(o){if(this.length===0)return s.alloc(0);const d=s.allocUnsafe(o>>>0);let p=this.head,E=0;for(;p;)n(d,p.data,E),E+=p.data.length,p=p.next;return d}consume(o,d){const p=this.head.data;if(o<p.length){const E=p.slice(0,o);return this.head.data=p.slice(o),E}return o===p.length?this.shift():d?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[e](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let d="",p=this.head,E=0;do{const l=p.data;if(o>l.length)d+=l,o-=l.length;else{o===l.length?(d+=l,++E,p.next?this.head=p.next:this.head=this.tail=null):(d+=t(l,0,o),this.head=p,p.data=t(l,o));break}++E}while((p=p.next)!==null);return this.length-=E,d}_getBuffer(o){const d=s.allocUnsafe(o),p=o;let E=this.head,l=0;do{const w=E.data;if(o>w.length)n(d,w,p-o),o-=w.length;else{o===w.length?(n(d,w,p-o),++l,E.next?this.head=E.next:this.head=this.tail=null):(n(d,new r(w.buffer,w.byteOffset,o),p-o),this.head=E,E.data=w.slice(o));break}++l}while((E=E.next)!==null);return this.length-=l,d}[Symbol.for("nodejs.util.inspect.custom")](o,d){return i(this,{...d,depth:0,customInspect:!1})}},Rn}var On,di;function Vt(){if(di)return On;di=1;const{MathFloor:t,NumberIsInteger:e}=he(),{validateInteger:n}=vt(),{ERR_INVALID_ARG_VALUE:r}=xe().codes;let s=16*1024,i=16;function u(E,l,w){return E.highWaterMark!=null?E.highWaterMark:l?E[w]:null}function o(E){return E?i:s}function d(E,l){n(l,"value",0),E?i=l:s=l}function p(E,l,w,A){const S=u(l,A,w);if(S!=null){if(!e(S)||S<0){const h=A?`options.${w}`:"options.highWaterMark";throw new r(h,S)}return t(S)}return o(E.objectMode)}return On={getHighWaterMark:p,getDefaultHighWaterMark:o,setDefaultHighWaterMark:d},On}var In={},Ct={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hi;function As(){return hi||(hi=1,(function(t,e){var n=Ce(),r=n.Buffer;function s(u,o){for(var d in u)o[d]=u[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(u,o,d){return r(u,o,d)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(u,o,d){if(typeof u=="number")throw new TypeError("Argument must not be a number");return r(u,o,d)},i.alloc=function(u,o,d){if(typeof u!="number")throw new TypeError("Argument must be a number");var p=r(u);return o!==void 0?typeof d=="string"?p.fill(o,d):p.fill(o):p.fill(0),p},i.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r(u)},i.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(u)}})(Ct,Ct.exports)),Ct.exports}var yi;function Ts(){if(yi)return In;yi=1;var t=As().Buffer,e=t.isEncoding||function(c){switch(c=""+c,c&&c.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(c){if(!c)return"utf8";for(var g;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(g)return;c=(""+c).toLowerCase(),g=!0}}function r(c){var g=n(c);if(typeof g!="string"&&(t.isEncoding===e||!e(c)))throw new Error("Unknown encoding: "+c);return g||c}In.StringDecoder=s;function s(c){this.encoding=r(c);var g;switch(this.encoding){case"utf16le":this.text=l,this.end=w,g=4;break;case"utf8":this.fillLast=d,g=4;break;case"base64":this.text=A,this.end=S,g=3;break;default:this.write=h,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(g)}s.prototype.write=function(c){if(c.length===0)return"";var g,_;if(this.lastNeed){if(g=this.fillLast(c),g===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;return _<c.length?g?g+this.text(c,_):this.text(c,_):g||""},s.prototype.end=E,s.prototype.text=p,s.prototype.fillLast=function(c){if(this.lastNeed<=c.length)return c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,c.length),this.lastNeed-=c.length};function i(c){return c<=127?0:c>>5===6?2:c>>4===14?3:c>>3===30?4:c>>6===2?-1:-2}function u(c,g,_){var y=g.length-1;if(y<_)return 0;var m=i(g[y]);return m>=0?(m>0&&(c.lastNeed=m-1),m):--y<_||m===-2?0:(m=i(g[y]),m>=0?(m>0&&(c.lastNeed=m-2),m):--y<_||m===-2?0:(m=i(g[y]),m>=0?(m>0&&(m===2?m=0:c.lastNeed=m-3),m):0))}function o(c,g,_){if((g[0]&192)!==128)return c.lastNeed=0,"";if(c.lastNeed>1&&g.length>1){if((g[1]&192)!==128)return c.lastNeed=1,"";if(c.lastNeed>2&&g.length>2&&(g[2]&192)!==128)return c.lastNeed=2,""}}function d(c){var g=this.lastTotal-this.lastNeed,_=o(this,c);if(_!==void 0)return _;if(this.lastNeed<=c.length)return c.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,g,0,c.length),this.lastNeed-=c.length}function p(c,g){var _=u(this,c,g);if(!this.lastNeed)return c.toString("utf8",g);this.lastTotal=_;var y=c.length-(_-this.lastNeed);return c.copy(this.lastChar,0,y),c.toString("utf8",g,y)}function E(c){var g=c&&c.length?this.write(c):"";return this.lastNeed?g+"":g}function l(c,g){if((c.length-g)%2===0){var _=c.toString("utf16le",g);if(_){var y=_.charCodeAt(_.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=c[c.length-1],c.toString("utf16le",g,c.length-1)}function w(c){var g=c&&c.length?this.write(c):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,_)}return g}function A(c,g){var _=(c.length-g)%3;return _===0?c.toString("base64",g):(this.lastNeed=3-_,this.lastTotal=3,_===1?this.lastChar[0]=c[c.length-1]:(this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1]),c.toString("base64",g,c.length-_))}function S(c){var g=c&&c.length?this.write(c):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function h(c){return c.toString(this.encoding)}function b(c){return c&&c.length?this.write(c):""}return In}var Ln,pi;function Ji(){if(pi)return Ln;pi=1;const t=st(),{PromisePrototypeThen:e,SymbolAsyncIterator:n,SymbolIterator:r}=he(),{Buffer:s}=Ce(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:u}=xe().codes;function o(d,p,E){let l;if(typeof p=="string"||p instanceof s)return new d({objectMode:!0,...E,read(){this.push(p),this.push(null)}});let w;if(p&&p[n])w=!0,l=p[n]();else if(p&&p[r])w=!1,l=p[r]();else throw new i("iterable",["Iterable"],p);const A=new d({objectMode:!0,highWaterMark:1,...E});let S=!1;A._read=function(){S||(S=!0,b())},A._destroy=function(c,g){e(h(c),()=>t.nextTick(g,c),_=>t.nextTick(g,_||c))};async function h(c){const g=c!=null,_=typeof l.throw=="function";if(g&&_){const{value:y,done:m}=await l.throw(c);if(await y,m)return}if(typeof l.return=="function"){const{value:y}=await l.return();await y}}async function b(){for(;;){try{const{value:c,done:g}=w?await l.next():l.next();if(g)A.push(null);else{const _=c&&typeof c.then=="function"?await c:c;if(_===null)throw S=!1,new u;if(A.push(_))continue;S=!1}}catch(c){A.destroy(c)}break}}return A}return Ln=o,Ln}var Bn,bi;function Ft(){if(bi)return Bn;bi=1;const t=st(),{ArrayPrototypeIndexOf:e,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:s,ObjectDefineProperties:i,ObjectKeys:u,ObjectSetPrototypeOf:o,Promise:d,SafeSet:p,SymbolAsyncDispose:E,SymbolAsyncIterator:l,Symbol:w}=he();Bn=H,H.ReadableState=Q;const{EventEmitter:A}=Et(),{Stream:S,prependListener:h}=er(),{Buffer:b}=Ce(),{addAbortSignal:c}=qt(),g=Je();let _=Ee().debuglog("stream",v=>{_=v});const y=xs(),m=ut(),{getHighWaterMark:R,getDefaultHighWaterMark:O}=Vt(),{aggregateTwoErrors:L,codes:{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:F,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:D},AbortError:Z}=xe(),{validateObject:j}=vt(),V=w("kPaused"),{StringDecoder:P}=Ts(),f=Ji();o(H.prototype,S.prototype),o(H,S);const x=()=>{},{errorOrDestroy:a}=m,N=1,K=2,U=4,Y=8,oe=16,te=32,se=64,$=128,W=256,ie=512,ue=1024,ae=2048,B=4096,M=8192,q=16384,J=32768,ee=65536,X=1<<17,k=1<<18;function G(v){return{enumerable:!1,get(){return(this.state&v)!==0},set(T){T?this.state|=v:this.state&=~v}}}i(Q.prototype,{objectMode:G(N),ended:G(K),endEmitted:G(U),reading:G(Y),constructed:G(oe),sync:G(te),needReadable:G(se),emittedReadable:G($),readableListening:G(W),resumeScheduled:G(ie),errorEmitted:G(ue),emitClose:G(ae),autoDestroy:G(B),destroyed:G(M),closed:G(q),closeEmitted:G(J),multiAwaitDrain:G(ee),readingMore:G(X),dataEmitted:G(k)});function Q(v,T,ne){typeof ne!="boolean"&&(ne=T instanceof Fe()),this.state=ae|B|oe|te,v&&v.objectMode&&(this.state|=N),ne&&v&&v.readableObjectMode&&(this.state|=N),this.highWaterMark=v?R(this,v,"readableHighWaterMark",ne):O(!1),this.buffer=new y,this.length=0,this.pipes=[],this.flowing=null,this[V]=null,v&&v.emitClose===!1&&(this.state&=~ae),v&&v.autoDestroy===!1&&(this.state&=~B),this.errored=null,this.defaultEncoding=v&&v.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,v&&v.encoding&&(this.decoder=new P(v.encoding),this.encoding=v.encoding)}function H(v){if(!(this instanceof H))return new H(v);const T=this instanceof Fe();this._readableState=new Q(v,this,T),v&&(typeof v.read=="function"&&(this._read=v.read),typeof v.destroy=="function"&&(this._destroy=v.destroy),typeof v.construct=="function"&&(this._construct=v.construct),v.signal&&!T&&c(v.signal,this)),S.call(this,v),m.construct(this,()=>{this._readableState.needReadable&&Te(this,this._readableState)})}H.prototype.destroy=m.destroy,H.prototype._undestroy=m.undestroy,H.prototype._destroy=function(v,T){T(v)},H.prototype[A.captureRejectionSymbol]=function(v){this.destroy(v)},H.prototype[E]=function(){let v;return this.destroyed||(v=this.readableEnded?null:new Z,this.destroy(v)),new d((T,ne)=>g(this,re=>re&&re!==v?ne(re):T(null)))},H.prototype.push=function(v,T){return ce(this,v,T,!1)},H.prototype.unshift=function(v,T){return ce(this,v,T,!0)};function ce(v,T,ne,re){_("readableAddChunk",T);const fe=v._readableState;let ge;if((fe.state&N)===0&&(typeof T=="string"?(ne=ne||fe.defaultEncoding,fe.encoding!==ne&&(re&&fe.encoding?T=b.from(T,ne).toString(fe.encoding):(T=b.from(T,ne),ne=""))):T instanceof b?ne="":S._isUint8Array(T)?(T=S._uint8ArrayToBuffer(T),ne=""):T!=null&&(ge=new z("chunk",["string","Buffer","Uint8Array"],T))),ge)a(v,ge);else if(T===null)fe.state&=~Y,Ne(v,fe);else if((fe.state&N)!==0||T&&T.length>0)if(re)if((fe.state&U)!==0)a(v,new D);else{if(fe.destroyed||fe.errored)return!1;ve(v,fe,T,!0)}else if(fe.ended)a(v,new F);else{if(fe.destroyed||fe.errored)return!1;fe.state&=~Y,fe.decoder&&!ne?(T=fe.decoder.write(T),fe.objectMode||T.length!==0?ve(v,fe,T,!1):Te(v,fe)):ve(v,fe,T,!1)}else re||(fe.state&=~Y,Te(v,fe));return!fe.ended&&(fe.length<fe.highWaterMark||fe.length===0)}function ve(v,T,ne,re){T.flowing&&T.length===0&&!T.sync&&v.listenerCount("data")>0?((T.state&ee)!==0?T.awaitDrainWriters.clear():T.awaitDrainWriters=null,T.dataEmitted=!0,v.emit("data",ne)):(T.length+=T.objectMode?1:ne.length,re?T.buffer.unshift(ne):T.buffer.push(ne),(T.state&se)!==0&&Ke(v)),Te(v,T)}H.prototype.isPaused=function(){const v=this._readableState;return v[V]===!0||v.flowing===!1},H.prototype.setEncoding=function(v){const T=new P(v);this._readableState.decoder=T,this._readableState.encoding=this._readableState.decoder.encoding;const ne=this._readableState.buffer;let re="";for(const fe of ne)re+=T.write(fe);return ne.clear(),re!==""&&ne.push(re),this._readableState.length=re.length,this};const le=1073741824;function Ae(v){if(v>le)throw new C("size","<= 1GiB",v);return v--,v|=v>>>1,v|=v>>>2,v|=v>>>4,v|=v>>>8,v|=v>>>16,v++,v}function we(v,T){return v<=0||T.length===0&&T.ended?0:(T.state&N)!==0?1:r(v)?T.flowing&&T.length?T.buffer.first().length:T.length:v<=T.length?v:T.ended?T.length:0}H.prototype.read=function(v){_("read",v),v===void 0?v=NaN:n(v)||(v=s(v,10));const T=this._readableState,ne=v;if(v>T.highWaterMark&&(T.highWaterMark=Ae(v)),v!==0&&(T.state&=~$),v===0&&T.needReadable&&((T.highWaterMark!==0?T.length>=T.highWaterMark:T.length>0)||T.ended))return _("read: emitReadable",T.length,T.ended),T.length===0&&T.ended?Kt(this):Ke(this),null;if(v=we(v,T),v===0&&T.ended)return T.length===0&&Kt(this),null;let re=(T.state&se)!==0;if(_("need readable",re),(T.length===0||T.length-v<T.highWaterMark)&&(re=!0,_("length less than watermark",re)),T.ended||T.reading||T.destroyed||T.errored||!T.constructed)re=!1,_("reading, ended or constructing",re);else if(re){_("do read"),T.state|=Y|te,T.length===0&&(T.state|=se);try{this._read(T.highWaterMark)}catch(ge){a(this,ge)}T.state&=~te,T.reading||(v=we(ne,T))}let fe;return v>0?fe=lr(v,T):fe=null,fe===null?(T.needReadable=T.length<=T.highWaterMark,v=0):(T.length-=v,T.multiAwaitDrain?T.awaitDrainWriters.clear():T.awaitDrainWriters=null),T.length===0&&(T.ended||(T.needReadable=!0),ne!==v&&T.ended&&Kt(this)),fe!==null&&!T.errorEmitted&&!T.closeEmitted&&(T.dataEmitted=!0,this.emit("data",fe)),fe};function Ne(v,T){if(_("onEofChunk"),!T.ended){if(T.decoder){const ne=T.decoder.end();ne&&ne.length&&(T.buffer.push(ne),T.length+=T.objectMode?1:ne.length)}T.ended=!0,T.sync?Ke(v):(T.needReadable=!1,T.emittedReadable=!0,xt(v))}}function Ke(v){const T=v._readableState;_("emitReadable",T.needReadable,T.emittedReadable),T.needReadable=!1,T.emittedReadable||(_("emitReadable",T.flowing),T.emittedReadable=!0,t.nextTick(xt,v))}function xt(v){const T=v._readableState;_("emitReadable_",T.destroyed,T.length,T.ended),!T.destroyed&&!T.errored&&(T.length||T.ended)&&(v.emit("readable"),T.emittedReadable=!1),T.needReadable=!T.flowing&&!T.ended&&T.length<=T.highWaterMark,ur(v)}function Te(v,T){!T.readingMore&&T.constructed&&(T.readingMore=!0,t.nextTick(wo,v,T))}function wo(v,T){for(;!T.reading&&!T.ended&&(T.length<T.highWaterMark||T.flowing&&T.length===0);){const ne=T.length;if(_("maybeReadMore read 0"),v.read(0),ne===T.length)break}T.readingMore=!1}H.prototype._read=function(v){throw new I("_read()")},H.prototype.pipe=function(v,T){const ne=this,re=this._readableState;re.pipes.length===1&&(re.multiAwaitDrain||(re.multiAwaitDrain=!0,re.awaitDrainWriters=new p(re.awaitDrainWriters?[re.awaitDrainWriters]:[]))),re.pipes.push(v),_("pipe count=%d opts=%j",re.pipes.length,T);const ge=(!T||T.end!==!1)&&v!==t.stdout&&v!==t.stderr?hr:ct;re.endEmitted?t.nextTick(ge):ne.once("end",ge),v.on("unpipe",Ie);function Ie(Qe,je){_("onunpipe"),Qe===ne&&je&&je.hasUnpiped===!1&&(je.hasUnpiped=!0,Ao())}function hr(){_("onend"),v.end()}let Xe,yr=!1;function Ao(){_("cleanup"),v.removeListener("close",zt),v.removeListener("finish",Yt),Xe&&v.removeListener("drain",Xe),v.removeListener("error",Gt),v.removeListener("unpipe",Ie),ne.removeListener("end",hr),ne.removeListener("end",ct),ne.removeListener("data",br),yr=!0,Xe&&re.awaitDrainWriters&&(!v._writableState||v._writableState.needDrain)&&Xe()}function pr(){yr||(re.pipes.length===1&&re.pipes[0]===v?(_("false write response, pause",0),re.awaitDrainWriters=v,re.multiAwaitDrain=!1):re.pipes.length>1&&re.pipes.includes(v)&&(_("false write response, pause",re.awaitDrainWriters.size),re.awaitDrainWriters.add(v)),ne.pause()),Xe||(Xe=go(ne,v),v.on("drain",Xe))}ne.on("data",br);function br(Qe){_("ondata");const je=v.write(Qe);_("dest.write",je),je===!1&&pr()}function Gt(Qe){if(_("onerror",Qe),ct(),v.removeListener("error",Gt),v.listenerCount("error")===0){const je=v._writableState||v._readableState;je&&!je.errorEmitted?a(v,Qe):v.emit("error",Qe)}}h(v,"error",Gt);function zt(){v.removeListener("finish",Yt),ct()}v.once("close",zt);function Yt(){_("onfinish"),v.removeListener("close",zt),ct()}v.once("finish",Yt);function ct(){_("unpipe"),ne.unpipe(v)}return v.emit("pipe",ne),v.writableNeedDrain===!0?pr():re.flowing||(_("pipe resume"),ne.resume()),v};function go(v,T){return function(){const re=v._readableState;re.awaitDrainWriters===T?(_("pipeOnDrain",1),re.awaitDrainWriters=null):re.multiAwaitDrain&&(_("pipeOnDrain",re.awaitDrainWriters.size),re.awaitDrainWriters.delete(T)),(!re.awaitDrainWriters||re.awaitDrainWriters.size===0)&&v.listenerCount("data")&&v.resume()}}H.prototype.unpipe=function(v){const T=this._readableState,ne={hasUnpiped:!1};if(T.pipes.length===0)return this;if(!v){const fe=T.pipes;T.pipes=[],this.pause();for(let ge=0;ge<fe.length;ge++)fe[ge].emit("unpipe",this,{hasUnpiped:!1});return this}const re=e(T.pipes,v);return re===-1?this:(T.pipes.splice(re,1),T.pipes.length===0&&this.pause(),v.emit("unpipe",this,ne),this)},H.prototype.on=function(v,T){const ne=S.prototype.on.call(this,v,T),re=this._readableState;return v==="data"?(re.readableListening=this.listenerCount("readable")>0,re.flowing!==!1&&this.resume()):v==="readable"&&!re.endEmitted&&!re.readableListening&&(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,_("on readable",re.length,re.reading),re.length?Ke(this):re.reading||t.nextTick(mo,this)),ne},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(v,T){const ne=S.prototype.removeListener.call(this,v,T);return v==="readable"&&t.nextTick(fr,this),ne},H.prototype.off=H.prototype.removeListener,H.prototype.removeAllListeners=function(v){const T=S.prototype.removeAllListeners.apply(this,arguments);return(v==="readable"||v===void 0)&&t.nextTick(fr,this),T};function fr(v){const T=v._readableState;T.readableListening=v.listenerCount("readable")>0,T.resumeScheduled&&T[V]===!1?T.flowing=!0:v.listenerCount("data")>0?v.resume():T.readableListening||(T.flowing=null)}function mo(v){_("readable nexttick read 0"),v.read(0)}H.prototype.resume=function(){const v=this._readableState;return v.flowing||(_("resume"),v.flowing=!v.readableListening,_o(this,v)),v[V]=!1,this};function _o(v,T){T.resumeScheduled||(T.resumeScheduled=!0,t.nextTick(Eo,v,T))}function Eo(v,T){_("resume",T.reading),T.reading||v.read(0),T.resumeScheduled=!1,v.emit("resume"),ur(v),T.flowing&&!T.reading&&v.read(0)}H.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[V]=!0,this};function ur(v){const T=v._readableState;for(_("flow",T.flowing);T.flowing&&v.read()!==null;);}H.prototype.wrap=function(v){let T=!1;v.on("data",re=>{!this.push(re)&&v.pause&&(T=!0,v.pause())}),v.on("end",()=>{this.push(null)}),v.on("error",re=>{a(this,re)}),v.on("close",()=>{this.destroy()}),v.on("destroy",()=>{this.destroy()}),this._read=()=>{T&&v.resume&&(T=!1,v.resume())};const ne=u(v);for(let re=1;re<ne.length;re++){const fe=ne[re];this[fe]===void 0&&typeof v[fe]=="function"&&(this[fe]=v[fe].bind(v))}return this},H.prototype[l]=function(){return cr(this)},H.prototype.iterator=function(v){return v!==void 0&&j(v,"options"),cr(this,v)};function cr(v,T){typeof v.read!="function"&&(v=H.wrap(v,{objectMode:!0}));const ne=vo(v,T);return ne.stream=v,ne}async function*vo(v,T){let ne=x;function re(Ie){this===v?(ne(),ne=x):ne=Ie}v.on("readable",re);let fe;const ge=g(v,{writable:!1},Ie=>{fe=Ie?L(fe,Ie):null,ne(),ne=x});try{for(;;){const Ie=v.destroyed?null:v.read();if(Ie!==null)yield Ie;else{if(fe)throw fe;if(fe===null)return;await new d(re)}}}catch(Ie){throw fe=L(fe,Ie),fe}finally{(fe||(T==null?void 0:T.destroyOnReturn)!==!1)&&(fe===void 0||v._readableState.autoDestroy)?m.destroyer(v,null):(v.off("readable",re),ge())}}i(H.prototype,{readable:{__proto__:null,get(){const v=this._readableState;return!!v&&v.readable!==!1&&!v.destroyed&&!v.errorEmitted&&!v.endEmitted},set(v){this._readableState&&(this._readableState.readable=!!v)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(v){this._readableState&&(this._readableState.flowing=v)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(v){this._readableState&&(this._readableState.destroyed=v)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Q.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[V]!==!1},set(v){this[V]=!!v}}}),H._fromList=lr;function lr(v,T){if(T.length===0)return null;let ne;return T.objectMode?ne=T.buffer.shift():!v||v>=T.length?(T.decoder?ne=T.buffer.join(""):T.buffer.length===1?ne=T.buffer.first():ne=T.buffer.concat(T.length),T.buffer.clear()):ne=T.buffer.consume(v,T.decoder),ne}function Kt(v){const T=v._readableState;_("endReadable",T.endEmitted),T.endEmitted||(T.ended=!0,t.nextTick(So,T,v))}function So(v,T){if(_("endReadableNT",v.endEmitted,v.length),!v.errored&&!v.closeEmitted&&!v.endEmitted&&v.length===0){if(v.endEmitted=!0,T.emit("end"),T.writable&&T.allowHalfOpen===!1)t.nextTick(xo,T);else if(v.autoDestroy){const ne=T._writableState;(!ne||ne.autoDestroy&&(ne.finished||ne.writable===!1))&&T.destroy()}}}function xo(v){v.writable&&!v.writableEnded&&!v.destroyed&&v.end()}H.from=function(v,T){return f(H,v,T)};let Ht;function dr(){return Ht===void 0&&(Ht={}),Ht}return H.fromWeb=function(v,T){return dr().newStreamReadableFromReadableStream(v,T)},H.toWeb=function(v,T){return dr().newReadableStreamFromStreamReadable(v,T)},H.wrap=function(v,T){var ne,re;return new H({objectMode:(ne=(re=v.readableObjectMode)!==null&&re!==void 0?re:v.objectMode)!==null&&ne!==void 0?ne:!0,...T,destroy(fe,ge){m.destroyer(v,fe),ge(fe)}}).wrap(v)},Bn}var Nn,wi;function tr(){if(wi)return Nn;wi=1;const t=st(),{ArrayPrototypeSlice:e,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:s,ObjectDefineProperties:i,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:o,Symbol:d,SymbolHasInstance:p}=he();Nn=j,j.WritableState=D;const{EventEmitter:E}=Et(),l=er().Stream,{Buffer:w}=Ce(),A=ut(),{addAbortSignal:S}=qt(),{getHighWaterMark:h,getDefaultHighWaterMark:b}=Vt(),{ERR_INVALID_ARG_TYPE:c,ERR_METHOD_NOT_IMPLEMENTED:g,ERR_MULTIPLE_CALLBACK:_,ERR_STREAM_CANNOT_PIPE:y,ERR_STREAM_DESTROYED:m,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:O,ERR_STREAM_WRITE_AFTER_END:L,ERR_UNKNOWN_ENCODING:z}=xe().codes,{errorOrDestroy:I}=A;u(j.prototype,l.prototype),u(j,l);function C(){}const F=d("kOnFinished");function D(B,M,q){typeof q!="boolean"&&(q=M instanceof Fe()),this.objectMode=!!(B&&B.objectMode),q&&(this.objectMode=this.objectMode||!!(B&&B.writableObjectMode)),this.highWaterMark=B?h(this,B,"writableHighWaterMark",q):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const J=!!(B&&B.decodeStrings===!1);this.decodeStrings=!J,this.defaultEncoding=B&&B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=a.bind(void 0,M),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Z(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!B||B.emitClose!==!1,this.autoDestroy=!B||B.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[F]=[]}function Z(B){B.buffered=[],B.bufferedIndex=0,B.allBuffers=!0,B.allNoop=!0}D.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},s(D.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function j(B){const M=this instanceof Fe();if(!M&&!r(j,this))return new j(B);this._writableState=new D(B,this,M),B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final),typeof B.construct=="function"&&(this._construct=B.construct),B.signal&&S(B.signal,this)),l.call(this,B),A.construct(this,()=>{const q=this._writableState;q.writing||Y(this,q),$(this,q)})}s(j,p,{__proto__:null,value:function(B){return r(this,B)?!0:this!==j?!1:B&&B._writableState instanceof D}}),j.prototype.pipe=function(){I(this,new y)};function V(B,M,q,J){const ee=B._writableState;if(typeof q=="function")J=q,q=ee.defaultEncoding;else{if(!q)q=ee.defaultEncoding;else if(q!=="buffer"&&!w.isEncoding(q))throw new z(q);typeof J!="function"&&(J=C)}if(M===null)throw new O;if(!ee.objectMode)if(typeof M=="string")ee.decodeStrings!==!1&&(M=w.from(M,q),q="buffer");else if(M instanceof w)q="buffer";else if(l._isUint8Array(M))M=l._uint8ArrayToBuffer(M),q="buffer";else throw new c("chunk",["string","Buffer","Uint8Array"],M);let X;return ee.ending?X=new L:ee.destroyed&&(X=new m("write")),X?(t.nextTick(J,X),I(B,X,!0),X):(ee.pendingcb++,P(B,ee,M,q,J))}j.prototype.write=function(B,M,q){return V(this,B,M,q)===!0},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){const B=this._writableState;B.corked&&(B.corked--,B.writing||Y(this,B))},j.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=o(M)),!w.isEncoding(M))throw new z(M);return this._writableState.defaultEncoding=M,this};function P(B,M,q,J,ee){const X=M.objectMode?1:q.length;M.length+=X;const k=M.length<M.highWaterMark;return k||(M.needDrain=!0),M.writing||M.corked||M.errored||!M.constructed?(M.buffered.push({chunk:q,encoding:J,callback:ee}),M.allBuffers&&J!=="buffer"&&(M.allBuffers=!1),M.allNoop&&ee!==C&&(M.allNoop=!1)):(M.writelen=X,M.writecb=ee,M.writing=!0,M.sync=!0,B._write(q,J,M.onwrite),M.sync=!1),k&&!M.errored&&!M.destroyed}function f(B,M,q,J,ee,X,k){M.writelen=J,M.writecb=k,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new m("write")):q?B._writev(ee,M.onwrite):B._write(ee,X,M.onwrite),M.sync=!1}function x(B,M,q,J){--M.pendingcb,J(q),U(M),I(B,q)}function a(B,M){const q=B._writableState,J=q.sync,ee=q.writecb;if(typeof ee!="function"){I(B,new _);return}q.writing=!1,q.writecb=null,q.length-=q.writelen,q.writelen=0,M?(M.stack,q.errored||(q.errored=M),B._readableState&&!B._readableState.errored&&(B._readableState.errored=M),J?t.nextTick(x,B,q,M,ee):x(B,q,M,ee)):(q.buffered.length>q.bufferedIndex&&Y(B,q),J?q.afterWriteTickInfo!==null&&q.afterWriteTickInfo.cb===ee?q.afterWriteTickInfo.count++:(q.afterWriteTickInfo={count:1,cb:ee,stream:B,state:q},t.nextTick(N,q.afterWriteTickInfo)):K(B,q,1,ee))}function N({stream:B,state:M,count:q,cb:J}){return M.afterWriteTickInfo=null,K(B,M,q,J)}function K(B,M,q,J){for(!M.ending&&!B.destroyed&&M.length===0&&M.needDrain&&(M.needDrain=!1,B.emit("drain"));q-- >0;)M.pendingcb--,J();M.destroyed&&U(M),$(B,M)}function U(B){if(B.writing)return;for(let ee=B.bufferedIndex;ee<B.buffered.length;++ee){var M;const{chunk:X,callback:k}=B.buffered[ee],G=B.objectMode?1:X.length;B.length-=G,k((M=B.errored)!==null&&M!==void 0?M:new m("write"))}const q=B[F].splice(0);for(let ee=0;ee<q.length;ee++){var J;q[ee]((J=B.errored)!==null&&J!==void 0?J:new m("end"))}Z(B)}function Y(B,M){if(M.corked||M.bufferProcessing||M.destroyed||!M.constructed)return;const{buffered:q,bufferedIndex:J,objectMode:ee}=M,X=q.length-J;if(!X)return;let k=J;if(M.bufferProcessing=!0,X>1&&B._writev){M.pendingcb-=X-1;const G=M.allNoop?C:H=>{for(let ce=k;ce<q.length;++ce)q[ce].callback(H)},Q=M.allNoop&&k===0?q:e(q,k);Q.allBuffers=M.allBuffers,f(B,M,!0,M.length,Q,"",G),Z(M)}else{do{const{chunk:G,encoding:Q,callback:H}=q[k];q[k++]=null;const ce=ee?1:G.length;f(B,M,!1,ce,G,Q,H)}while(k<q.length&&!M.writing);k===q.length?Z(M):k>256?(q.splice(0,k),M.bufferedIndex=0):M.bufferedIndex=k}M.bufferProcessing=!1}j.prototype._write=function(B,M,q){if(this._writev)this._writev([{chunk:B,encoding:M}],q);else throw new g("_write()")},j.prototype._writev=null,j.prototype.end=function(B,M,q){const J=this._writableState;typeof B=="function"?(q=B,B=null,M=null):typeof M=="function"&&(q=M,M=null);let ee;if(B!=null){const X=V(this,B,M);X instanceof n&&(ee=X)}return J.corked&&(J.corked=1,this.uncork()),ee||(!J.errored&&!J.ending?(J.ending=!0,$(this,J,!0),J.ended=!0):J.finished?ee=new R("end"):J.destroyed&&(ee=new m("end"))),typeof q=="function"&&(ee||J.finished?t.nextTick(q,ee):J[F].push(q)),this};function oe(B){return B.ending&&!B.destroyed&&B.constructed&&B.length===0&&!B.errored&&B.buffered.length===0&&!B.finished&&!B.writing&&!B.errorEmitted&&!B.closeEmitted}function te(B,M){let q=!1;function J(ee){if(q){I(B,ee??_());return}if(q=!0,M.pendingcb--,ee){const X=M[F].splice(0);for(let k=0;k<X.length;k++)X[k](ee);I(B,ee,M.sync)}else oe(M)&&(M.prefinished=!0,B.emit("prefinish"),M.pendingcb++,t.nextTick(W,B,M))}M.sync=!0,M.pendingcb++;try{B._final(J)}catch(ee){J(ee)}M.sync=!1}function se(B,M){!M.prefinished&&!M.finalCalled&&(typeof B._final=="function"&&!M.destroyed?(M.finalCalled=!0,te(B,M)):(M.prefinished=!0,B.emit("prefinish")))}function $(B,M,q){oe(M)&&(se(B,M),M.pendingcb===0&&(q?(M.pendingcb++,t.nextTick((J,ee)=>{oe(ee)?W(J,ee):ee.pendingcb--},B,M)):oe(M)&&(M.pendingcb++,W(B,M))))}function W(B,M){M.pendingcb--,M.finished=!0;const q=M[F].splice(0);for(let J=0;J<q.length;J++)q[J]();if(B.emit("finish"),M.autoDestroy){const J=B._readableState;(!J||J.autoDestroy&&(J.endEmitted||J.readable===!1))&&B.destroy()}}i(j.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(B){this._writableState&&(this._writableState.destroyed=B)}},writable:{__proto__:null,get(){const B=this._writableState;return!!B&&B.writable!==!1&&!B.destroyed&&!B.errored&&!B.ending&&!B.ended},set(B){this._writableState&&(this._writableState.writable=!!B)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const B=this._writableState;return B?!B.destroyed&&!B.ending&&B.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ie=A.destroy;j.prototype.destroy=function(B,M){const q=this._writableState;return!q.destroyed&&(q.bufferedIndex<q.buffered.length||q[F].length)&&t.nextTick(U,q),ie.call(this,B,M),this},j.prototype._undestroy=A.undestroy,j.prototype._destroy=function(B,M){M(B)},j.prototype[E.captureRejectionSymbol]=function(B){this.destroy(B)};let ue;function ae(){return ue===void 0&&(ue={}),ue}return j.fromWeb=function(B,M){return ae().newStreamWritableFromWritableStream(B,M)},j.toWeb=function(B){return ae().newWritableStreamFromStreamWritable(B)},Nn}var kn,gi;function Rs(){if(gi)return kn;gi=1;const t=st(),e=Ce(),{isReadable:n,isWritable:r,isIterable:s,isNodeStream:i,isReadableNodeStream:u,isWritableNodeStream:o,isDuplexNodeStream:d,isReadableStream:p,isWritableStream:E}=We(),l=Je(),{AbortError:w,codes:{ERR_INVALID_ARG_TYPE:A,ERR_INVALID_RETURN_VALUE:S}}=xe(),{destroyer:h}=ut(),b=Fe(),c=Ft(),g=tr(),{createDeferredPromise:_}=Ee(),y=Ji(),m=globalThis.Blob||e.Blob,R=typeof m<"u"?function(D){return D instanceof m}:function(D){return!1},O=globalThis.AbortController||mt().AbortController,{FunctionPrototypeCall:L}=he();class z extends b{constructor(D){super(D),(D==null?void 0:D.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(D==null?void 0:D.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}kn=function F(D,Z){if(d(D))return D;if(u(D))return C({readable:D});if(o(D))return C({writable:D});if(i(D))return C({writable:!1,readable:!1});if(p(D))return C({readable:c.fromWeb(D)});if(E(D))return C({writable:g.fromWeb(D)});if(typeof D=="function"){const{value:V,write:P,final:f,destroy:x}=I(D);if(s(V))return y(z,V,{objectMode:!0,write:P,final:f,destroy:x});const a=V==null?void 0:V.then;if(typeof a=="function"){let N;const K=L(a,V,U=>{if(U!=null)throw new S("nully","body",U)},U=>{h(N,U)});return N=new z({objectMode:!0,readable:!1,write:P,final(U){f(async()=>{try{await K,t.nextTick(U,null)}catch(Y){t.nextTick(U,Y)}})},destroy:x})}throw new S("Iterable, AsyncIterable or AsyncFunction",Z,V)}if(R(D))return F(D.arrayBuffer());if(s(D))return y(z,D,{objectMode:!0,writable:!1});if(p(D==null?void 0:D.readable)&&E(D==null?void 0:D.writable))return z.fromWeb(D);if(typeof(D==null?void 0:D.writable)=="object"||typeof(D==null?void 0:D.readable)=="object"){const V=D!=null&&D.readable?u(D==null?void 0:D.readable)?D==null?void 0:D.readable:F(D.readable):void 0,P=D!=null&&D.writable?o(D==null?void 0:D.writable)?D==null?void 0:D.writable:F(D.writable):void 0;return C({readable:V,writable:P})}const j=D==null?void 0:D.then;if(typeof j=="function"){let V;return L(j,D,P=>{P!=null&&V.push(P),V.push(null)},P=>{h(V,P)}),V=new z({objectMode:!0,writable:!1,read(){}})}throw new A(Z,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],D)};function I(F){let{promise:D,resolve:Z}=_();const j=new O,V=j.signal;return{value:F((async function*(){for(;;){const f=D;D=null;const{chunk:x,done:a,cb:N}=await f;if(t.nextTick(N),a)return;if(V.aborted)throw new w(void 0,{cause:V.reason});({promise:D,resolve:Z}=_()),yield x}})(),{signal:V}),write(f,x,a){const N=Z;Z=null,N({chunk:f,done:!1,cb:a})},final(f){const x=Z;Z=null,x({done:!0,cb:f})},destroy(f,x){j.abort(),x(f)}}}function C(F){const D=F.readable&&typeof F.readable.read!="function"?c.wrap(F.readable):F.readable,Z=F.writable;let j=!!n(D),V=!!r(Z),P,f,x,a,N;function K(U){const Y=a;a=null,Y?Y(U):U&&N.destroy(U)}return N=new z({readableObjectMode:!!(D!=null&&D.readableObjectMode),writableObjectMode:!!(Z!=null&&Z.writableObjectMode),readable:j,writable:V}),V&&(l(Z,U=>{V=!1,U&&h(D,U),K(U)}),N._write=function(U,Y,oe){Z.write(U,Y)?oe():P=oe},N._final=function(U){Z.end(),f=U},Z.on("drain",function(){if(P){const U=P;P=null,U()}}),Z.on("finish",function(){if(f){const U=f;f=null,U()}})),j&&(l(D,U=>{j=!1,U&&h(D,U),K(U)}),D.on("readable",function(){if(x){const U=x;x=null,U()}}),D.on("end",function(){N.push(null)}),N._read=function(){for(;;){const U=D.read();if(U===null){x=N._read;return}if(!N.push(U))return}}),N._destroy=function(U,Y){!U&&a!==null&&(U=new w),x=null,P=null,f=null,a===null?Y(U):(a=Y,h(Z,U),h(D,U))},N}return kn}var Cn,mi;function Fe(){if(mi)return Cn;mi=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:n,ObjectSetPrototypeOf:r}=he();Cn=u;const s=Ft(),i=tr();r(u.prototype,s.prototype),r(u,s);{const E=n(i.prototype);for(let l=0;l<E.length;l++){const w=E[l];u.prototype[w]||(u.prototype[w]=i.prototype[w])}}function u(E){if(!(this instanceof u))return new u(E);s.call(this,E),i.call(this,E),E?(this.allowHalfOpen=E.allowHalfOpen!==!1,E.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),E.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(u.prototype,{writable:{__proto__:null,...e(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(i.prototype,"writableLength")},writableFinished:{__proto__:null,...e(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(E){this._readableState&&this._writableState&&(this._readableState.destroyed=E,this._writableState.destroyed=E)}}});let o;function d(){return o===void 0&&(o={}),o}u.fromWeb=function(E,l){return d().newStreamDuplexFromReadableWritablePair(E,l)},u.toWeb=function(E){return d().newReadableWritablePairFromDuplex(E)};let p;return u.from=function(E){return p||(p=Rs()),p(E,"body")},Cn}var Dn,_i;function Xi(){if(_i)return Dn;_i=1;const{ObjectSetPrototypeOf:t,Symbol:e}=he();Dn=u;const{ERR_METHOD_NOT_IMPLEMENTED:n}=xe().codes,r=Fe(),{getHighWaterMark:s}=Vt();t(u.prototype,r.prototype),t(u,r);const i=e("kCallback");function u(p){if(!(this instanceof u))return new u(p);const E=p?s(this,p,"readableHighWaterMark",!0):null;E===0&&(p={...p,highWaterMark:null,readableHighWaterMark:E,writableHighWaterMark:p.writableHighWaterMark||0}),r.call(this,p),this._readableState.sync=!1,this[i]=null,p&&(typeof p.transform=="function"&&(this._transform=p.transform),typeof p.flush=="function"&&(this._flush=p.flush)),this.on("prefinish",d)}function o(p){typeof this._flush=="function"&&!this.destroyed?this._flush((E,l)=>{if(E){p?p(E):this.destroy(E);return}l!=null&&this.push(l),this.push(null),p&&p()}):(this.push(null),p&&p())}function d(){this._final!==o&&o.call(this)}return u.prototype._final=o,u.prototype._transform=function(p,E,l){throw new n("_transform()")},u.prototype._write=function(p,E,l){const w=this._readableState,A=this._writableState,S=w.length;this._transform(p,E,(h,b)=>{if(h){l(h);return}b!=null&&this.push(b),A.ended||S===w.length||w.length<w.highWaterMark?l():this[i]=l})},u.prototype._read=function(){if(this[i]){const p=this[i];this[i]=null,p()}},Dn}var Mn,Ei;function Qi(){if(Ei)return Mn;Ei=1;const{ObjectSetPrototypeOf:t}=he();Mn=n;const e=Xi();t(n.prototype,e.prototype),t(n,e);function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype._transform=function(r,s,i){i(null,r)},Mn}var Pn,vi;function nr(){if(vi)return Pn;vi=1;const t=st(),{ArrayIsArray:e,Promise:n,SymbolAsyncIterator:r,SymbolDispose:s}=he(),i=Je(),{once:u}=Ee(),o=ut(),d=Fe(),{aggregateTwoErrors:p,codes:{ERR_INVALID_ARG_TYPE:E,ERR_INVALID_RETURN_VALUE:l,ERR_MISSING_ARGS:w,ERR_STREAM_DESTROYED:A,ERR_STREAM_PREMATURE_CLOSE:S},AbortError:h}=xe(),{validateFunction:b,validateAbortSignal:c}=vt(),{isIterable:g,isReadable:_,isReadableNodeStream:y,isNodeStream:m,isTransformStream:R,isWebStream:O,isReadableStream:L,isReadableFinished:z}=We(),I=globalThis.AbortController||mt().AbortController;let C,F,D;function Z(U,Y,oe){let te=!1;U.on("close",()=>{te=!0});const se=i(U,{readable:Y,writable:oe},$=>{te=!$});return{destroy:$=>{te||(te=!0,o.destroyer(U,$||new A("pipe")))},cleanup:se}}function j(U){return b(U[U.length-1],"streams[stream.length - 1]"),U.pop()}function V(U){if(g(U))return U;if(y(U))return P(U);throw new E("val",["Readable","Iterable","AsyncIterable"],U)}async function*P(U){F||(F=Ft()),yield*F.prototype[r].call(U)}async function f(U,Y,oe,{end:te}){let se,$=null;const W=ae=>{if(ae&&(se=ae),$){const B=$;$=null,B()}},ie=()=>new n((ae,B)=>{se?B(se):$=()=>{se?B(se):ae()}});Y.on("drain",W);const ue=i(Y,{readable:!1},W);try{Y.writableNeedDrain&&await ie();for await(const ae of U)Y.write(ae)||await ie();te&&(Y.end(),await ie()),oe()}catch(ae){oe(se!==ae?p(se,ae):ae)}finally{ue(),Y.off("drain",W)}}async function x(U,Y,oe,{end:te}){R(Y)&&(Y=Y.writable);const se=Y.getWriter();try{for await(const $ of U)await se.ready,se.write($).catch(()=>{});await se.ready,te&&await se.close(),oe()}catch($){try{await se.abort($),oe($)}catch(W){oe(W)}}}function a(...U){return N(U,u(j(U)))}function N(U,Y,oe){if(U.length===1&&e(U[0])&&(U=U[0]),U.length<2)throw new w("streams");const te=new I,se=te.signal,$=oe==null?void 0:oe.signal,W=[];c($,"options.signal");function ie(){ee(new h)}D=D||Ee().addAbortListener;let ue;$&&(ue=D($,ie));let ae,B;const M=[];let q=0;function J(Q){ee(Q,--q===0)}function ee(Q,H){var ce;if(Q&&(!ae||ae.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ae=Q),!(!ae&&!H)){for(;M.length;)M.shift()(ae);(ce=ue)===null||ce===void 0||ce[s](),te.abort(),H&&(ae||W.forEach(ve=>ve()),t.nextTick(Y,ae,B))}}let X;for(let Q=0;Q<U.length;Q++){const H=U[Q],ce=Q<U.length-1,ve=Q>0,le=ce||(oe==null?void 0:oe.end)!==!1,Ae=Q===U.length-1;if(m(H)){let we=function(Ne){Ne&&Ne.name!=="AbortError"&&Ne.code!=="ERR_STREAM_PREMATURE_CLOSE"&&J(Ne)};if(le){const{destroy:Ne,cleanup:Ke}=Z(H,ce,ve);M.push(Ne),_(H)&&Ae&&W.push(Ke)}H.on("error",we),_(H)&&Ae&&W.push(()=>{H.removeListener("error",we)})}if(Q===0)if(typeof H=="function"){if(X=H({signal:se}),!g(X))throw new l("Iterable, AsyncIterable or Stream","source",X)}else g(H)||y(H)||R(H)?X=H:X=d.from(H);else if(typeof H=="function"){if(R(X)){var k;X=V((k=X)===null||k===void 0?void 0:k.readable)}else X=V(X);if(X=H(X,{signal:se}),ce){if(!g(X,!0))throw new l("AsyncIterable",`transform[${Q-1}]`,X)}else{var G;C||(C=Qi());const we=new C({objectMode:!0}),Ne=(G=X)===null||G===void 0?void 0:G.then;if(typeof Ne=="function")q++,Ne.call(X,Te=>{B=Te,Te!=null&&we.write(Te),le&&we.end(),t.nextTick(J)},Te=>{we.destroy(Te),t.nextTick(J,Te)});else if(g(X,!0))q++,f(X,we,J,{end:le});else if(L(X)||R(X)){const Te=X.readable||X;q++,f(Te,we,J,{end:le})}else throw new l("AsyncIterable or Promise","destination",X);X=we;const{destroy:Ke,cleanup:xt}=Z(X,!1,!0);M.push(Ke),Ae&&W.push(xt)}}else if(m(H)){if(y(X)){q+=2;const we=K(X,H,J,{end:le});_(H)&&Ae&&W.push(we)}else if(R(X)||L(X)){const we=X.readable||X;q++,f(we,H,J,{end:le})}else if(g(X))q++,f(X,H,J,{end:le});else throw new E("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=H}else if(O(H)){if(y(X))q++,x(V(X),H,J,{end:le});else if(L(X)||g(X))q++,x(X,H,J,{end:le});else if(R(X))q++,x(X.readable,H,J,{end:le});else throw new E("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=H}else X=d.from(H)}return(se!=null&&se.aborted||$!=null&&$.aborted)&&t.nextTick(ie),X}function K(U,Y,oe,{end:te}){let se=!1;if(Y.on("close",()=>{se||oe(new S)}),U.pipe(Y,{end:!1}),te){let $=function(){se=!0,Y.end()};z(U)?t.nextTick($):U.once("end",$)}else oe();return i(U,{readable:!0,writable:!1},$=>{const W=U._readableState;$&&$.code==="ERR_STREAM_PREMATURE_CLOSE"&&W&&W.ended&&!W.errored&&!W.errorEmitted?U.once("end",oe).once("error",oe):oe($)}),i(Y,{readable:!1,writable:!0},oe)}return Pn={pipelineImpl:N,pipeline:a},Pn}var Un,Si;function eo(){if(Si)return Un;Si=1;const{pipeline:t}=nr(),e=Fe(),{destroyer:n}=ut(),{isNodeStream:r,isReadable:s,isWritable:i,isWebStream:u,isTransformStream:o,isWritableStream:d,isReadableStream:p}=We(),{AbortError:E,codes:{ERR_INVALID_ARG_VALUE:l,ERR_MISSING_ARGS:w}}=xe(),A=Je();return Un=function(...h){if(h.length===0)throw new w("streams");if(h.length===1)return e.from(h[0]);const b=[...h];if(typeof h[0]=="function"&&(h[0]=e.from(h[0])),typeof h[h.length-1]=="function"){const C=h.length-1;h[C]=e.from(h[C])}for(let C=0;C<h.length;++C)if(!(!r(h[C])&&!u(h[C]))){if(C<h.length-1&&!(s(h[C])||p(h[C])||o(h[C])))throw new l(`streams[${C}]`,b[C],"must be readable");if(C>0&&!(i(h[C])||d(h[C])||o(h[C])))throw new l(`streams[${C}]`,b[C],"must be writable")}let c,g,_,y,m;function R(C){const F=y;y=null,F?F(C):C?m.destroy(C):!I&&!z&&m.destroy()}const O=h[0],L=t(h,R),z=!!(i(O)||d(O)||o(O)),I=!!(s(L)||p(L)||o(L));if(m=new e({writableObjectMode:!!(O!=null&&O.writableObjectMode),readableObjectMode:!!(L!=null&&L.readableObjectMode),writable:z,readable:I}),z){if(r(O))m._write=function(F,D,Z){O.write(F,D)?Z():c=Z},m._final=function(F){O.end(),g=F},O.on("drain",function(){if(c){const F=c;c=null,F()}});else if(u(O)){const D=(o(O)?O.writable:O).getWriter();m._write=async function(Z,j,V){try{await D.ready,D.write(Z).catch(()=>{}),V()}catch(P){V(P)}},m._final=async function(Z){try{await D.ready,D.close().catch(()=>{}),g=Z}catch(j){Z(j)}}}const C=o(L)?L.readable:L;A(C,()=>{if(g){const F=g;g=null,F()}})}if(I){if(r(L))L.on("readable",function(){if(_){const C=_;_=null,C()}}),L.on("end",function(){m.push(null)}),m._read=function(){for(;;){const C=L.read();if(C===null){_=m._read;return}if(!m.push(C))return}};else if(u(L)){const F=(o(L)?L.readable:L).getReader();m._read=async function(){for(;;)try{const{value:D,done:Z}=await F.read();if(!m.push(D))return;if(Z){m.push(null);return}}catch{return}}}}return m._destroy=function(C,F){!C&&y!==null&&(C=new E),_=null,c=null,g=null,y===null?F(C):(y=F,r(L)&&n(L,C))},m},Un}var xi;function Os(){if(xi)return Nt;xi=1;const t=globalThis.AbortController||mt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:s},AbortError:i}=xe(),{validateAbortSignal:u,validateInteger:o,validateObject:d}=vt(),p=he().Symbol("kWeak"),E=he().Symbol("kResistStopPropagation"),{finished:l}=Je(),w=eo(),{addAbortSignalNoValidate:A}=qt(),{isWritable:S,isNodeStream:h}=We(),{deprecate:b}=Ee(),{ArrayPrototypePush:c,Boolean:g,MathFloor:_,Number:y,NumberIsNaN:m,Promise:R,PromiseReject:O,PromiseResolve:L,PromisePrototypeThen:z,Symbol:I}=he(),C=I("kEmpty"),F=I("kEof");function D($,W){if(W!=null&&d(W,"options"),(W==null?void 0:W.signal)!=null&&u(W.signal,"options.signal"),h($)&&!S($))throw new e("stream",$,"must be writable");const ie=w(this,$);return W!=null&&W.signal&&A(W.signal,ie),ie}function Z($,W){if(typeof $!="function")throw new n("fn",["Function","AsyncFunction"],$);W!=null&&d(W,"options"),(W==null?void 0:W.signal)!=null&&u(W.signal,"options.signal");let ie=1;(W==null?void 0:W.concurrency)!=null&&(ie=_(W.concurrency));let ue=ie-1;return(W==null?void 0:W.highWaterMark)!=null&&(ue=_(W.highWaterMark)),o(ie,"options.concurrency",1),o(ue,"options.highWaterMark",0),ue+=ie,(async function*(){const B=Ee().AbortSignalAny([W==null?void 0:W.signal].filter(g)),M=this,q=[],J={signal:B};let ee,X,k=!1,G=0;function Q(){k=!0,H()}function H(){G-=1,ce()}function ce(){X&&!k&&G<ie&&q.length<ue&&(X(),X=null)}async function ve(){try{for await(let le of M){if(k)return;if(B.aborted)throw new i;try{if(le=$(le,J),le===C)continue;le=L(le)}catch(Ae){le=O(Ae)}G+=1,z(le,H,Q),q.push(le),ee&&(ee(),ee=null),!k&&(q.length>=ue||G>=ie)&&await new R(Ae=>{X=Ae})}q.push(F)}catch(le){const Ae=O(le);z(Ae,H,Q),q.push(Ae)}finally{k=!0,ee&&(ee(),ee=null)}}ve();try{for(;;){for(;q.length>0;){const le=await q[0];if(le===F)return;if(B.aborted)throw new i;le!==C&&(yield le),q.shift(),ce()}await new R(le=>{ee=le})}}finally{k=!0,X&&(X(),X=null)}}).call(this)}function j($=void 0){return $!=null&&d($,"options"),($==null?void 0:$.signal)!=null&&u($.signal,"options.signal"),(async function*(){let ie=0;for await(const ae of this){var ue;if($!=null&&(ue=$.signal)!==null&&ue!==void 0&&ue.aborted)throw new i({cause:$.signal.reason});yield[ie++,ae]}}).call(this)}async function V($,W=void 0){for await(const ie of a.call(this,$,W))return!0;return!1}async function P($,W=void 0){if(typeof $!="function")throw new n("fn",["Function","AsyncFunction"],$);return!await V.call(this,async(...ie)=>!await $(...ie),W)}async function f($,W){for await(const ie of a.call(this,$,W))return ie}async function x($,W){if(typeof $!="function")throw new n("fn",["Function","AsyncFunction"],$);async function ie(ue,ae){return await $(ue,ae),C}for await(const ue of Z.call(this,ie,W));}function a($,W){if(typeof $!="function")throw new n("fn",["Function","AsyncFunction"],$);async function ie(ue,ae){return await $(ue,ae)?ue:C}return Z.call(this,ie,W)}class N extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function K($,W,ie){var ue;if(typeof $!="function")throw new n("reducer",["Function","AsyncFunction"],$);ie!=null&&d(ie,"options"),(ie==null?void 0:ie.signal)!=null&&u(ie.signal,"options.signal");let ae=arguments.length>1;if(ie!=null&&(ue=ie.signal)!==null&&ue!==void 0&&ue.aborted){const ee=new i(void 0,{cause:ie.signal.reason});throw this.once("error",()=>{}),await l(this.destroy(ee)),ee}const B=new t,M=B.signal;if(ie!=null&&ie.signal){const ee={once:!0,[p]:this,[E]:!0};ie.signal.addEventListener("abort",()=>B.abort(),ee)}let q=!1;try{for await(const ee of this){var J;if(q=!0,ie!=null&&(J=ie.signal)!==null&&J!==void 0&&J.aborted)throw new i;ae?W=await $(W,ee,{signal:M}):(W=ee,ae=!0)}if(!q&&!ae)throw new N}finally{B.abort()}return W}async function U($){$!=null&&d($,"options"),($==null?void 0:$.signal)!=null&&u($.signal,"options.signal");const W=[];for await(const ue of this){var ie;if($!=null&&(ie=$.signal)!==null&&ie!==void 0&&ie.aborted)throw new i(void 0,{cause:$.signal.reason});c(W,ue)}return W}function Y($,W){const ie=Z.call(this,$,W);return(async function*(){for await(const ae of ie)yield*ae}).call(this)}function oe($){if($=y($),m($))return 0;if($<0)throw new s("number",">= 0",$);return $}function te($,W=void 0){return W!=null&&d(W,"options"),(W==null?void 0:W.signal)!=null&&u(W.signal,"options.signal"),$=oe($),(async function*(){var ue;if(W!=null&&(ue=W.signal)!==null&&ue!==void 0&&ue.aborted)throw new i;for await(const B of this){var ae;if(W!=null&&(ae=W.signal)!==null&&ae!==void 0&&ae.aborted)throw new i;$--<=0&&(yield B)}}).call(this)}function se($,W=void 0){return W!=null&&d(W,"options"),(W==null?void 0:W.signal)!=null&&u(W.signal,"options.signal"),$=oe($),(async function*(){var ue;if(W!=null&&(ue=W.signal)!==null&&ue!==void 0&&ue.aborted)throw new i;for await(const B of this){var ae;if(W!=null&&(ae=W.signal)!==null&&ae!==void 0&&ae.aborted)throw new i;if($-- >0&&(yield B),$<=0)return}}).call(this)}return Nt.streamReturningOperators={asIndexedPairs:b(j,"readable.asIndexedPairs will be removed in a future version."),drop:te,filter:a,flatMap:Y,map:Z,take:se,compose:D},Nt.promiseReturningOperators={every:P,forEach:x,reduce:K,toArray:U,some:V,find:f},Nt}var jn,Ai;function to(){if(Ai)return jn;Ai=1;const{ArrayPrototypePop:t,Promise:e}=he(),{isIterable:n,isNodeStream:r,isWebStream:s}=We(),{pipelineImpl:i}=nr(),{finished:u}=Je();no();function o(...d){return new e((p,E)=>{let l,w;const A=d[d.length-1];if(A&&typeof A=="object"&&!r(A)&&!n(A)&&!s(A)){const S=t(d);l=S.signal,w=S.end}i(d,(S,h)=>{S?E(S):p(h)},{signal:l,end:w})})}return jn={finished:u,pipeline:o},jn}var Ti;function no(){if(Ti)return wn.exports;Ti=1;const{Buffer:t}=Ce(),{ObjectDefineProperty:e,ObjectKeys:n,ReflectApply:r}=he(),{promisify:{custom:s}}=Ee(),{streamReturningOperators:i,promiseReturningOperators:u}=Os(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=xe(),d=eo(),{setDefaultHighWaterMark:p,getDefaultHighWaterMark:E}=Vt(),{pipeline:l}=nr(),{destroyer:w}=ut(),A=Je(),S=to(),h=We(),b=wn.exports=er().Stream;b.isDestroyed=h.isDestroyed,b.isDisturbed=h.isDisturbed,b.isErrored=h.isErrored,b.isReadable=h.isReadable,b.isWritable=h.isWritable,b.Readable=Ft();for(const g of n(i)){let y=function(...m){if(new.target)throw o();return b.Readable.from(r(_,this,m))};const _=i[g];e(y,"name",{__proto__:null,value:_.name}),e(y,"length",{__proto__:null,value:_.length}),e(b.Readable.prototype,g,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}for(const g of n(u)){let y=function(...m){if(new.target)throw o();return r(_,this,m)};const _=u[g];e(y,"name",{__proto__:null,value:_.name}),e(y,"length",{__proto__:null,value:_.length}),e(b.Readable.prototype,g,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}b.Writable=tr(),b.Duplex=Fe(),b.Transform=Xi(),b.PassThrough=Qi(),b.pipeline=l;const{addAbortSignal:c}=qt();return b.addAbortSignal=c,b.finished=A,b.destroy=w,b.compose=d,b.setDefaultHighWaterMark=p,b.getDefaultHighWaterMark=E,e(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return S}}),e(l,s,{__proto__:null,enumerable:!0,get(){return S.pipeline}}),e(A,s,{__proto__:null,enumerable:!0,get(){return S.finished}}),b.Stream=b,b._isUint8Array=function(_){return _ instanceof Uint8Array},b._uint8ArrayToBuffer=function(_){return t.from(_.buffer,_.byteOffset,_.byteLength)},wn.exports}var Ri;function Is(){return Ri||(Ri=1,(function(t){const e=no(),n=to(),r=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=r,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return n}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(bn)),bn.exports}Is();var Ls=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(u){u(i)})}return new(n||(n=Promise))(function(i,u){function o(E){try{p(r.next(E))}catch(l){u(l)}}function d(E){try{p(r.throw(E))}catch(l){u(l)}}function p(E){E.done?i(E.value):s(E.value).then(o,d)}p((r=r.apply(t,e||[])).next())})};class Bs{static digest(e){return Ls(this,arguments,void 0,function*({data:n}){return Kn(n)})}}function Oi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ns(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function ro(t,...e){if(!Ns(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function ks(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Oi(t.outputLen),Oi(t.blockLen)}function jt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Cs(t,e){ro(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const $n=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function io(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const qn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),De=(t,e)=>t<<32-e|t>>>e,Ds=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ds)throw new Error("Non little-endian hardware is not supported");function Ms(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function rr(t){if(typeof t=="string"&&(t=Ms(t)),!io(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Ps(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];if(!io(s))throw new Error("Uint8Array expected");e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class oo{clone(){return this._cloneInto()}}function Us(t){const e=r=>t().update(rr(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function js(t=32){if($n&&typeof $n.getRandomValues=="function")return $n.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function $s(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),u=Number(n>>s&i),o=Number(n&i),d=r?4:0,p=r?0:4;t.setUint32(e+d,u,r),t.setUint32(e+p,o,r)}class qs extends oo{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=qn(this.buffer)}update(e){jt(this);const{view:n,buffer:r,blockLen:s}=this;e=rr(e);const i=e.length;for(let u=0;u<i;){const o=Math.min(s-this.pos,i-u);if(o===s){const d=qn(e);for(;s<=i-u;u+=s)this.process(d,u);continue}r.set(e.subarray(u,u+o),this.pos),this.pos+=o,u+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){jt(this),Cs(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:u}=this;n[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>s-u&&(this.process(r,0),u=0);for(let l=u;l<s;l++)n[l]=0;$s(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=qn(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=d/4,E=this.get();if(p>E.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<p;l++)o.setUint32(4*l,E[l],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:u,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=u,s%n&&e.buffer.set(r),e}}const Vs=(t,e,n)=>t&e^~t&n,Fs=(t,e,n)=>t&e^t&n^e&n,Ws=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ze=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ye=new Uint32Array(64);class Ks extends qs{constructor(){super(64,32,8,!1),this.A=ze[0]|0,this.B=ze[1]|0,this.C=ze[2]|0,this.D=ze[3]|0,this.E=ze[4]|0,this.F=ze[5]|0,this.G=ze[6]|0,this.H=ze[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:u,G:o,H:d}=this;return[e,n,r,s,i,u,o,d]}set(e,n,r,s,i,u,o,d){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=u|0,this.G=o|0,this.H=d|0}process(e,n){for(let l=0;l<16;l++,n+=4)Ye[l]=e.getUint32(n,!1);for(let l=16;l<64;l++){const w=Ye[l-15],A=Ye[l-2],S=De(w,7)^De(w,18)^w>>>3,h=De(A,17)^De(A,19)^A>>>10;Ye[l]=h+Ye[l-7]+S+Ye[l-16]|0}let{A:r,B:s,C:i,D:u,E:o,F:d,G:p,H:E}=this;for(let l=0;l<64;l++){const w=De(o,6)^De(o,11)^De(o,25),A=E+w+Vs(o,d,p)+Ws[l]+Ye[l]|0,h=(De(r,2)^De(r,13)^De(r,22))+Fs(r,s,i)|0;E=p,p=d,d=o,o=u+A|0,u=i,i=s,s=r,r=A+h|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,u=u+this.D|0,o=o+this.E|0,d=d+this.F|0,p=p+this.G|0,E=E+this.H|0,this.set(r,s,i,u,o,d,p,E)}roundClean(){Ye.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Hs=Us(()=>new Ks);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const so=BigInt(0),Wt=BigInt(1),Gs=BigInt(2);function Pe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const zs=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function at(t){if(!Pe(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=zs[t[n]];return e}function ao(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function ir(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const qe={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ii(t){if(t>=qe._0&&t<=qe._9)return t-qe._0;if(t>=qe._A&&t<=qe._F)return t-(qe._A-10);if(t>=qe._a&&t<=qe._f)return t-(qe._a-10)}function ft(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const u=Ii(t.charCodeAt(i)),o=Ii(t.charCodeAt(i+1));if(u===void 0||o===void 0){const d=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[s]=u*16+o}return r}function ot(t){return ir(at(t))}function or(t){if(!Pe(t))throw new Error("Uint8Array expected");return ir(at(Uint8Array.from(t).reverse()))}function Ze(t,e){return ft(t.toString(16).padStart(e*2,"0"))}function sr(t,e){return Ze(t,e).reverse()}function Ys(t){return ft(ao(t))}function ke(t,e,n){let r;if(typeof e=="string")try{r=ft(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Pe(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function _t(...t){let e=0;for(let s=0;s<t.length;s++){const i=t[s];if(!Pe(i))throw new Error("Uint8Array expected");e+=i.length}let n=new Uint8Array(e),r=0;for(let s=0;s<t.length;s++){const i=t[s];n.set(i,r),r+=i.length}return n}function Zs(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function Js(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Xs(t){let e;for(e=0;t>so;t>>=Wt,e+=1);return e}function Qs(t,e){return t>>BigInt(e)&Wt}const ea=(t,e,n)=>t|(n?Wt:so)<<BigInt(e),ar=t=>(Gs<<BigInt(t-1))-Wt,Vn=t=>new Uint8Array(t),Li=t=>Uint8Array.from(t);function fo(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Vn(t),s=Vn(t),i=0;const u=()=>{r.fill(1),s.fill(0),i=0},o=(...l)=>n(s,r,...l),d=(l=Vn())=>{s=o(Li([0]),l),r=o(),l.length!==0&&(s=o(Li([1]),l),r=o())},p=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const w=[];for(;l<e;){r=o();const A=r.slice();w.push(A),l+=r.length}return _t(...w)};return(l,w)=>{u(),d(l);let A;for(;!(A=w(p()));)d();return u(),A}}const ta={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Pe(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function St(t,e,n={}){const r=(s,i,u)=>{const o=ta[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const d=t[s];if(!(u&&d===void 0)&&!o(d,t))throw new Error(`Invalid param ${String(s)}=${d} (${typeof d}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const na=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Qs,bitLen:Xs,bitMask:ar,bitSet:ea,bytesToHex:at,bytesToNumberBE:ot,bytesToNumberLE:or,concatBytes:_t,createHmacDrbg:fo,ensureBytes:ke,equalBytes:Zs,hexToBytes:ft,hexToNumber:ir,isBytes:Pe,numberToBytesBE:Ze,numberToBytesLE:sr,numberToHexUnpadded:ao,numberToVarBytesBE:Ys,utf8ToBytes:Js,validateObject:St},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pe=BigInt(0),ye=BigInt(1),tt=BigInt(2),ra=BigInt(3),zn=BigInt(4),Bi=BigInt(5),Ni=BigInt(8);BigInt(9);BigInt(16);function Se(t,e){const n=t%e;return n>=pe?n:e+n}function ia(t,e,n){if(n<=pe||e<pe)throw new Error("Expected power/modulo > 0");if(n===ye)return pe;let r=ye;for(;e>pe;)e&ye&&(r=r*t%n),t=t*t%n,e>>=ye;return r}function Le(t,e,n){let r=t;for(;e-- >pe;)r*=r,r%=n;return r}function Yn(t,e){if(t===pe||e<=pe)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Se(t,e),r=e,s=pe,i=ye;for(;n!==pe;){const o=r/n,d=r%n,p=s-i*o;r=n,n=d,s=i,i=p}if(r!==ye)throw new Error("invert: does not exist");return Se(s,e)}function oa(t){const e=(t-ye)/tt;let n,r,s;for(n=t-ye,r=0;n%tt===pe;n/=tt,r++);for(s=tt;s<t&&ia(s,e,t)!==t-ye;s++);if(r===1){const u=(t+ye)/zn;return function(d,p){const E=d.pow(p,u);if(!d.eql(d.sqr(E),p))throw new Error("Cannot find square root");return E}}const i=(n+ye)/tt;return function(o,d){if(o.pow(d,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let p=r,E=o.pow(o.mul(o.ONE,s),n),l=o.pow(d,i),w=o.pow(d,n);for(;!o.eql(w,o.ONE);){if(o.eql(w,o.ZERO))return o.ZERO;let A=1;for(let h=o.sqr(w);A<p&&!o.eql(h,o.ONE);A++)h=o.sqr(h);const S=o.pow(E,ye<<BigInt(p-A-1));E=o.sqr(S),l=o.mul(l,S),w=o.mul(w,E),p=A}return l}}function sa(t){if(t%zn===ra){const e=(t+ye)/zn;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%Ni===Bi){const e=(t-Bi)/Ni;return function(r,s){const i=r.mul(s,tt),u=r.pow(i,e),o=r.mul(s,u),d=r.mul(r.mul(o,tt),u),p=r.mul(o,r.sub(d,r.ONE));if(!r.eql(r.sqr(p),s))throw new Error("Cannot find square root");return p}}return oa(t)}const aa=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fa(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=aa.reduce((r,s)=>(r[s]="function",r),e);return St(t,n)}function ua(t,e,n){if(n<pe)throw new Error("Expected power > 0");if(n===pe)return t.ONE;if(n===ye)return e;let r=t.ONE,s=e;for(;n>pe;)n&ye&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ye;return r}function ca(t,e){const n=new Array(e.length),r=e.reduce((i,u,o)=>t.is0(u)?i:(n[o]=i,t.mul(i,u)),t.ONE),s=t.inv(r);return e.reduceRight((i,u,o)=>t.is0(u)?i:(n[o]=t.mul(i,n[o]),t.mul(i,u)),s),n}function uo(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function la(t,e,n=!1,r={}){if(t<=pe)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=uo(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=sa(t),o=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:ar(s),ZERO:pe,ONE:ye,create:d=>Se(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return pe<=d&&d<t},is0:d=>d===pe,isOdd:d=>(d&ye)===ye,neg:d=>Se(-d,t),eql:(d,p)=>d===p,sqr:d=>Se(d*d,t),add:(d,p)=>Se(d+p,t),sub:(d,p)=>Se(d-p,t),mul:(d,p)=>Se(d*p,t),pow:(d,p)=>ua(o,d,p),div:(d,p)=>Se(d*Yn(p,t),t),sqrN:d=>d*d,addN:(d,p)=>d+p,subN:(d,p)=>d-p,mulN:(d,p)=>d*p,inv:d=>Yn(d,t),sqrt:r.sqrt||(d=>u(o,d)),invertBatch:d=>ca(o,d),cmov:(d,p,E)=>E?p:d,toBytes:d=>n?sr(d,i):Ze(d,i),fromBytes:d=>{if(d.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${d.length}`);return n?or(d):ot(d)}});return Object.freeze(o)}function co(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function lo(t){const e=co(t);return e+Math.ceil(e/2)}function da(t,e,n=!1){const r=t.length,s=co(e),i=lo(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const u=n?ot(t):or(t),o=Se(u,e-ye)+ye;return n?sr(o,s):Ze(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ha=BigInt(0),Fn=BigInt(1);function ya(t,e){const n=(s,i)=>{const u=i.negate();return s?u:i},r=s=>{const i=Math.ceil(e/s)+1,u=2**(s-1);return{windows:i,windowSize:u}};return{constTimeNegate:n,unsafeLadder(s,i){let u=t.ZERO,o=s;for(;i>ha;)i&Fn&&(u=u.add(o)),o=o.double(),i>>=Fn;return u},precomputeWindow(s,i){const{windows:u,windowSize:o}=r(i),d=[];let p=s,E=p;for(let l=0;l<u;l++){E=p,d.push(E);for(let w=1;w<o;w++)E=E.add(p),d.push(E);p=E.double()}return d},wNAF(s,i,u){const{windows:o,windowSize:d}=r(s);let p=t.ZERO,E=t.BASE;const l=BigInt(2**s-1),w=2**s,A=BigInt(s);for(let S=0;S<o;S++){const h=S*d;let b=Number(u&l);u>>=A,b>d&&(b-=w,u+=Fn);const c=h,g=h+Math.abs(b)-1,_=S%2!==0,y=b<0;b===0?E=E.add(n(_,i[c])):p=p.add(n(y,i[g]))}return{p,f:E}},wNAFCached(s,i,u,o){const d=s._WINDOW_SIZE||1;let p=i.get(s);return p||(p=this.precomputeWindow(s,d),d!==1&&i.set(s,o(p))),this.wNAF(d,p,u)}}}function ho(t){return fa(t.Fp),St(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...uo(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pa(t){const e=ho(t);St(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ba,hexToBytes:wa}=na,rt={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=rt;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ba(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=rt,n=typeof t=="string"?wa(t):t;if(!Pe(n))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=rt._parseInt(n.subarray(2)),{d:u,l:o}=rt._parseInt(i);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:u}},hexFromSig(t){const e=p=>Number.parseInt(p[0],16)&8?"00"+p:p,n=p=>{const E=p.toString(16);return E.length&1?`0${E}`:E},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,u=s.length/2,o=n(i),d=n(u);return`30${n(u+i+4)}02${d}${s}02${o}${r}`}},Ve=BigInt(0),Be=BigInt(1);BigInt(2);const ki=BigInt(3);BigInt(4);function ga(t){const e=pa(t),{Fp:n}=e,r=e.toBytes||((S,h,b)=>{const c=h.toAffine();return _t(Uint8Array.from([4]),n.toBytes(c.x),n.toBytes(c.y))}),s=e.fromBytes||(S=>{const h=S.subarray(1),b=n.fromBytes(h.subarray(0,n.BYTES)),c=n.fromBytes(h.subarray(n.BYTES,2*n.BYTES));return{x:b,y:c}});function i(S){const{a:h,b}=e,c=n.sqr(S),g=n.mul(c,S);return n.add(n.add(g,n.mul(S,h)),b)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function u(S){return typeof S=="bigint"&&Ve<S&&S<e.n}function o(S){if(!u(S))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(S){const{allowedPrivateKeyLengths:h,nByteLength:b,wrapPrivateKey:c,n:g}=e;if(h&&typeof S!="bigint"){if(Pe(S)&&(S=at(S)),typeof S!="string"||!h.includes(S.length))throw new Error("Invalid key");S=S.padStart(b*2,"0")}let _;try{_=typeof S=="bigint"?S:ot(ke("private key",S,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof S}`)}return c&&(_=Se(_,g)),o(_),_}const p=new Map;function E(S){if(!(S instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(h,b,c){if(this.px=h,this.py=b,this.pz=c,h==null||!n.isValid(h))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(c==null||!n.isValid(c))throw new Error("z required")}static fromAffine(h){const{x:b,y:c}=h||{};if(!h||!n.isValid(b)||!n.isValid(c))throw new Error("invalid affine point");if(h instanceof l)throw new Error("projective point not allowed");const g=_=>n.eql(_,n.ZERO);return g(b)&&g(c)?l.ZERO:new l(b,c,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const b=n.invertBatch(h.map(c=>c.pz));return h.map((c,g)=>c.toAffine(b[g])).map(l.fromAffine)}static fromHex(h){const b=l.fromAffine(s(ke("pointHex",h)));return b.assertValidity(),b}static fromPrivateKey(h){return l.BASE.multiply(d(h))}_setWindowSize(h){this._WINDOW_SIZE=h,p.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:h,y:b}=this.toAffine();if(!n.isValid(h)||!n.isValid(b))throw new Error("bad point: x or y not FE");const c=n.sqr(b),g=i(h);if(!n.eql(c,g))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(n.isOdd)return!n.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){E(h);const{px:b,py:c,pz:g}=this,{px:_,py:y,pz:m}=h,R=n.eql(n.mul(b,m),n.mul(_,g)),O=n.eql(n.mul(c,m),n.mul(y,g));return R&&O}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:h,b}=e,c=n.mul(b,ki),{px:g,py:_,pz:y}=this;let m=n.ZERO,R=n.ZERO,O=n.ZERO,L=n.mul(g,g),z=n.mul(_,_),I=n.mul(y,y),C=n.mul(g,_);return C=n.add(C,C),O=n.mul(g,y),O=n.add(O,O),m=n.mul(h,O),R=n.mul(c,I),R=n.add(m,R),m=n.sub(z,R),R=n.add(z,R),R=n.mul(m,R),m=n.mul(C,m),O=n.mul(c,O),I=n.mul(h,I),C=n.sub(L,I),C=n.mul(h,C),C=n.add(C,O),O=n.add(L,L),L=n.add(O,L),L=n.add(L,I),L=n.mul(L,C),R=n.add(R,L),I=n.mul(_,y),I=n.add(I,I),L=n.mul(I,C),m=n.sub(m,L),O=n.mul(I,z),O=n.add(O,O),O=n.add(O,O),new l(m,R,O)}add(h){E(h);const{px:b,py:c,pz:g}=this,{px:_,py:y,pz:m}=h;let R=n.ZERO,O=n.ZERO,L=n.ZERO;const z=e.a,I=n.mul(e.b,ki);let C=n.mul(b,_),F=n.mul(c,y),D=n.mul(g,m),Z=n.add(b,c),j=n.add(_,y);Z=n.mul(Z,j),j=n.add(C,F),Z=n.sub(Z,j),j=n.add(b,g);let V=n.add(_,m);return j=n.mul(j,V),V=n.add(C,D),j=n.sub(j,V),V=n.add(c,g),R=n.add(y,m),V=n.mul(V,R),R=n.add(F,D),V=n.sub(V,R),L=n.mul(z,j),R=n.mul(I,D),L=n.add(R,L),R=n.sub(F,L),L=n.add(F,L),O=n.mul(R,L),F=n.add(C,C),F=n.add(F,C),D=n.mul(z,D),j=n.mul(I,j),F=n.add(F,D),D=n.sub(C,D),D=n.mul(z,D),j=n.add(j,D),C=n.mul(F,j),O=n.add(O,C),C=n.mul(V,j),R=n.mul(Z,R),R=n.sub(R,C),C=n.mul(Z,F),L=n.mul(V,L),L=n.add(L,C),new l(R,O,L)}subtract(h){return this.add(h.negate())}is0(){return this.equals(l.ZERO)}wNAF(h){return A.wNAFCached(this,p,h,b=>{const c=n.invertBatch(b.map(g=>g.pz));return b.map((g,_)=>g.toAffine(c[_])).map(l.fromAffine)})}multiplyUnsafe(h){const b=l.ZERO;if(h===Ve)return b;if(o(h),h===Be)return this;const{endo:c}=e;if(!c)return A.unsafeLadder(this,h);let{k1neg:g,k1:_,k2neg:y,k2:m}=c.splitScalar(h),R=b,O=b,L=this;for(;_>Ve||m>Ve;)_&Be&&(R=R.add(L)),m&Be&&(O=O.add(L)),L=L.double(),_>>=Be,m>>=Be;return g&&(R=R.negate()),y&&(O=O.negate()),O=new l(n.mul(O.px,c.beta),O.py,O.pz),R.add(O)}multiply(h){o(h);let b=h,c,g;const{endo:_}=e;if(_){const{k1neg:y,k1:m,k2neg:R,k2:O}=_.splitScalar(b);let{p:L,f:z}=this.wNAF(m),{p:I,f:C}=this.wNAF(O);L=A.constTimeNegate(y,L),I=A.constTimeNegate(R,I),I=new l(n.mul(I.px,_.beta),I.py,I.pz),c=L.add(I),g=z.add(C)}else{const{p:y,f:m}=this.wNAF(b);c=y,g=m}return l.normalizeZ([c,g])[0]}multiplyAndAddUnsafe(h,b,c){const g=l.BASE,_=(m,R)=>R===Ve||R===Be||!m.equals(g)?m.multiplyUnsafe(R):m.multiply(R),y=_(this,b).add(_(h,c));return y.is0()?void 0:y}toAffine(h){const{px:b,py:c,pz:g}=this,_=this.is0();h==null&&(h=_?n.ONE:n.inv(g));const y=n.mul(b,h),m=n.mul(c,h),R=n.mul(g,h);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:y,y:m}}isTorsionFree(){const{h,isTorsionFree:b}=e;if(h===Be)return!0;if(b)return b(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:b}=e;return h===Be?this:b?b(l,this):this.multiplyUnsafe(e.h)}toRawBytes(h=!0){return this.assertValidity(),r(l,this,h)}toHex(h=!0){return at(this.toRawBytes(h))}}l.BASE=new l(e.Gx,e.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const w=e.nBitLength,A=ya(l,e.endo?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:u}}function ma(t){const e=ho(t);return St(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function _a(t){const e=ma(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function u(j){return Ve<j&&j<n.ORDER}function o(j){return Se(j,r)}function d(j){return Yn(j,r)}const{ProjectivePoint:p,normPrivateKeyToScalar:E,weierstrassEquation:l,isWithinCurveOrder:w}=ga({...e,toBytes(j,V,P){const f=V.toAffine(),x=n.toBytes(f.x),a=_t;return P?a(Uint8Array.from([V.hasEvenY()?2:3]),x):a(Uint8Array.from([4]),x,n.toBytes(f.y))},fromBytes(j){const V=j.length,P=j[0],f=j.subarray(1);if(V===s&&(P===2||P===3)){const x=ot(f);if(!u(x))throw new Error("Point is not on curve");const a=l(x);let N=n.sqrt(a);const K=(N&Be)===Be;return(P&1)===1!==K&&(N=n.neg(N)),{x,y:N}}else if(V===i&&P===4){const x=n.fromBytes(f.subarray(0,n.BYTES)),a=n.fromBytes(f.subarray(n.BYTES,2*n.BYTES));return{x,y:a}}else throw new Error(`Point of length ${V} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),A=j=>at(Ze(j,e.nByteLength));function S(j){const V=r>>Be;return j>V}function h(j){return S(j)?o(-j):j}const b=(j,V,P)=>ot(j.slice(V,P));class c{constructor(V,P,f){this.r=V,this.s=P,this.recovery=f,this.assertValidity()}static fromCompact(V){const P=e.nByteLength;return V=ke("compactSignature",V,P*2),new c(b(V,0,P),b(V,P,2*P))}static fromDER(V){const{r:P,s:f}=rt.toSig(ke("DER",V));return new c(P,f)}assertValidity(){if(!w(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(V){return new c(this.r,this.s,V)}recoverPublicKey(V){const{r:P,s:f,recovery:x}=this,a=O(ke("msgHash",V));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const N=x===2||x===3?P+e.n:P;if(N>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=(x&1)===0?"02":"03",U=p.fromHex(K+A(N)),Y=d(N),oe=o(-a*Y),te=o(f*Y),se=p.BASE.multiplyAndAddUnsafe(U,oe,te);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new c(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ft(this.toDERHex())}toDERHex(){return rt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ft(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}const g={isValidPrivateKey(j){try{return E(j),!0}catch{return!1}},normPrivateKeyToScalar:E,randomPrivateKey:()=>{const j=lo(e.n);return da(e.randomBytes(j),e.n)},precompute(j=8,V=p.BASE){return V._setWindowSize(j),V.multiply(BigInt(3)),V}};function _(j,V=!0){return p.fromPrivateKey(j).toRawBytes(V)}function y(j){const V=Pe(j),P=typeof j=="string",f=(V||P)&&j.length;return V?f===s||f===i:P?f===2*s||f===2*i:j instanceof p}function m(j,V,P=!0){if(y(j))throw new Error("first arg must be private key");if(!y(V))throw new Error("second arg must be public key");return p.fromHex(V).multiply(E(j)).toRawBytes(P)}const R=e.bits2int||function(j){const V=ot(j),P=j.length*8-e.nBitLength;return P>0?V>>BigInt(P):V},O=e.bits2int_modN||function(j){return o(R(j))},L=ar(e.nBitLength);function z(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(Ve<=j&&j<L))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ze(j,e.nByteLength)}function I(j,V,P=C){if(["recovered","canonical"].some(W=>W in P))throw new Error("sign() legacy options not supported");const{hash:f,randomBytes:x}=e;let{lowS:a,prehash:N,extraEntropy:K}=P;a==null&&(a=!0),j=ke("msgHash",j),N&&(j=ke("prehashed msgHash",f(j)));const U=O(j),Y=E(V),oe=[z(Y),z(U)];if(K!=null){const W=K===!0?x(n.BYTES):K;oe.push(ke("extraEntropy",W))}const te=_t(...oe),se=U;function $(W){const ie=R(W);if(!w(ie))return;const ue=d(ie),ae=p.BASE.multiply(ie).toAffine(),B=o(ae.x);if(B===Ve)return;const M=o(ue*o(se+B*Y));if(M===Ve)return;let q=(ae.x===B?0:2)|Number(ae.y&Be),J=M;return a&&S(M)&&(J=h(M),q^=1),new c(B,J,q)}return{seed:te,k2sig:$}}const C={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function D(j,V,P=C){const{seed:f,k2sig:x}=I(j,V,P),a=e;return fo(a.hash.outputLen,a.nByteLength,a.hmac)(f,x)}p.BASE._setWindowSize(8);function Z(j,V,P,f=F){var ae;const x=j;if(V=ke("msgHash",V),P=ke("publicKey",P),"strict"in f)throw new Error("options.strict was renamed to lowS");const{lowS:a,prehash:N}=f;let K,U;try{if(typeof x=="string"||Pe(x))try{K=c.fromDER(x)}catch(B){if(!(B instanceof rt.Err))throw B;K=c.fromCompact(x)}else if(typeof x=="object"&&typeof x.r=="bigint"&&typeof x.s=="bigint"){const{r:B,s:M}=x;K=new c(B,M)}else throw new Error("PARSE");U=p.fromHex(P)}catch(B){if(B.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(a&&K.hasHighS())return!1;N&&(V=e.hash(V));const{r:Y,s:oe}=K,te=O(V),se=d(oe),$=o(te*se),W=o(Y*se),ie=(ae=p.BASE.multiplyAndAddUnsafe(U,$,W))==null?void 0:ae.toAffine();return ie?o(ie.x)===Y:!1}return{CURVE:e,getPublicKey:_,getSharedSecret:m,sign:D,verify:Z,ProjectivePoint:p,Signature:c,utils:g}}class yo extends oo{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,ks(e);const r=rr(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let u=0;u<i.length;u++)i[u]^=54;this.iHash.update(i),this.oHash=e.create();for(let u=0;u<i.length;u++)i[u]^=106;this.oHash.update(i),i.fill(0)}update(e){return jt(this),this.iHash.update(e),this}digestInto(e){jt(this),ro(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:u,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=u,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const po=(t,e,n)=>new yo(t,e).update(n).digest();po.create=(t,e)=>new yo(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ea(t){return{hash:t,hmac:(e,...n)=>po(t,e,Ps(...n)),randomBytes:js}}function va(t,e){const n=r=>_a({...t,...Ea(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ci=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Sa=BigInt(1),Zn=BigInt(2),Di=(t,e)=>(t+e/Zn)/e;function xa(t){const e=bo,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),u=BigInt(23),o=BigInt(44),d=BigInt(88),p=t*t*t%e,E=p*p*t%e,l=Le(E,n,e)*E%e,w=Le(l,n,e)*E%e,A=Le(w,Zn,e)*p%e,S=Le(A,s,e)*A%e,h=Le(S,i,e)*S%e,b=Le(h,o,e)*h%e,c=Le(b,d,e)*b%e,g=Le(c,o,e)*h%e,_=Le(g,n,e)*E%e,y=Le(_,u,e)*S%e,m=Le(y,r,e)*p%e,R=Le(m,Zn,e);if(!Jn.eql(Jn.sqr(R),t))throw new Error("Cannot find square root");return R}const Jn=la(bo,void 0,void 0,{sqrt:xa}),Re=va({a:BigInt(0),b:BigInt(7),Fp:Jn,n:Ci,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Ci,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Sa*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,u=BigInt("0x100000000000000000000000000000000"),o=Di(i*t,e),d=Di(-r*t,e);let p=Se(t-o*n-d*s,e),E=Se(-o*r-d*i,e);const l=p>u,w=E>u;if(l&&(p=e-p),w&&(E=e-E),p>u||E>u)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:p,k2neg:w,k2:E}}}},Hs);BigInt(0);Re.ProjectivePoint;function Aa(t){const e=r=>{if(r!==null&&typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r).sort(),i={};for(const u of s)i[u]=e(r[u]);return i}return r},n=e(t);return JSON.stringify(n)}var Ta=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(u){u(i)})}return new(n||(n=Promise))(function(i,u){function o(E){try{p(r.next(E))}catch(l){u(l)}}function d(E){try{p(r.throw(E))}catch(l){u(l)}}function p(E){E.done?i(E.value):s(E.value).then(o,d)}p((r=r.apply(t,e||[])).next())})};function nt(t){return Ta(this,arguments,void 0,function*({jwk:e}){const n=e.kty;let r;if(n==="EC")r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(n==="oct")r={k:e.k,kty:e.kty};else if(n==="OKP")r={crv:e.crv,kty:e.kty,x:e.x};else if(n==="RSA")r={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${n}`);Vi(r);const s=Aa(r),i=de.string(s).toUint8Array(),u=yield Bs.digest({data:i});return de.uint8Array(u).toBase64Url()})}function Mi(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function Ra(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function Oa(t){return!(!t||typeof t!="object"||!("kty"in t&&"k"in t)||t.kty!=="oct"||typeof t.k!="string")}var be=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(u){u(i)})}return new(n||(n=Promise))(function(i,u){function o(E){try{p(r.next(E))}catch(l){u(l)}}function d(E){try{p(r.throw(E))}catch(l){u(l)}}function p(E){E.done?i(E.value):s(E.value).then(o,d)}p((r=r.apply(t,e||[])).next())})},Ia=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Me{static adjustSignatureToLowS(e){return be(this,arguments,void 0,function*({signature:n}){const r=Re.Signature.fromCompact(n);return r.hasHighS()?r.normalizeS().toCompactRawBytes():n})}static bytesToPrivateKey(e){return be(this,arguments,void 0,function*({privateKeyBytes:n}){const r=yield Me.getCurvePoint({keyBytes:n}),s={kty:"EC",crv:"secp256k1",d:de.uint8Array(n).toBase64Url(),x:de.uint8Array(r.x).toBase64Url(),y:de.uint8Array(r.y).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static bytesToPublicKey(e){return be(this,arguments,void 0,function*({publicKeyBytes:n}){const r=yield Me.getCurvePoint({keyBytes:n}),s={kty:"EC",crv:"secp256k1",x:de.uint8Array(r.x).toBase64Url(),y:de.uint8Array(r.y).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static compressPublicKey(e){return be(this,arguments,void 0,function*({publicKeyBytes:n}){return Re.ProjectivePoint.fromHex(n).toRawBytes(!0)})}static computePublicKey(e){return be(this,arguments,void 0,function*({key:n}){const r=yield Me.privateKeyToBytes({privateKey:n}),s=yield Me.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"secp256k1",x:de.uint8Array(s.x).toBase64Url(),y:de.uint8Array(s.y).toBase64Url()};return i.kid=yield nt({jwk:i}),i})}static convertDerToCompactSignature(e){return be(this,arguments,void 0,function*({derSignature:n}){return Re.Signature.fromDER(n).toCompactRawBytes()})}static decompressPublicKey(e){return be(this,arguments,void 0,function*({publicKeyBytes:n}){return Re.ProjectivePoint.fromHex(n).toRawBytes(!1)})}static generateKey(){return be(this,void 0,void 0,function*(){const e=Re.utils.randomPrivateKey(),n=yield Me.bytesToPrivateKey({privateKeyBytes:e});return n.kid=yield nt({jwk:n}),n})}static getPublicKey(e){return be(this,arguments,void 0,function*({key:n}){var r;if(!(Mi(n)&&n.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:s}=n,i=Ia(n,["d"]);return(r=i.kid)!==null&&r!==void 0||(i.kid=yield nt({jwk:i})),i})}static privateKeyToBytes(e){return be(this,arguments,void 0,function*({privateKey:n}){if(!Mi(n))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return de.base64Url(n.d).toUint8Array()})}static publicKeyToBytes(e){return be(this,arguments,void 0,function*({publicKey:n}){if(!(Ra(n)&&n.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),s=de.base64Url(n.x).toUint8Array(),i=de.base64Url(n.y).toUint8Array();return new Uint8Array([...r,...s,...i])})}static sharedSecret(e){return be(this,arguments,void 0,function*({privateKeyA:n,publicKeyB:r}){if("x"in n&&"x"in r&&n.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield Me.privateKeyToBytes({privateKey:n}),i=yield Me.publicKeyToBytes({publicKey:r});return Re.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return be(this,arguments,void 0,function*({data:n,key:r}){const s=yield Me.privateKeyToBytes({privateKey:r}),i=Kn(n);return Re.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return be(this,arguments,void 0,function*({privateKeyBytes:n}){return Re.utils.isValidPrivateKey(n)})}static validatePublicKey(e){return be(this,arguments,void 0,function*({publicKeyBytes:n}){try{Re.ProjectivePoint.fromHex(n).assertValidity()}catch{return!1}return!0})}static verify(e){return be(this,arguments,void 0,function*({key:n,signature:r,data:s}){const i=yield Me.publicKeyToBytes({publicKey:n}),u=Kn(s);return Re.verify(r,u,i,{lowS:!1})})}static getCurvePoint(e){return be(this,arguments,void 0,function*({keyBytes:n}){n.byteLength===32&&(n=Re.getPublicKey(n));const r=Re.ProjectivePoint.fromHex(n),s=Ze(r.x,32),i=Ze(r.y,32);return{x:s,y:i}})}}class Xn{static getJoseSignatureAlgorithmFromPublicKey(e){const n={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(e.alg&&Object.values(n).includes(e.alg))return e.alg;if(e.crv&&Object.keys(n).includes(e.crv))return n[e.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${e.alg}, crv=${e.crv}. Supported 'alg' values: ${Object.values(n).join(", ")}. Supported 'crv' values: ${Object.keys(n).join(", ")}.`)}static randomBytes(e){return Io(e)}static randomUuid(){return Hn.randomUUID()}static randomPin({length:e}){if(3>e||e>10)throw new Error("randomPin() can securely generate a PIN between 3 to 10 digits.");const n=Math.pow(10,e)-1;let r;if(e<=6){const s=Math.pow(10,e);do{const i=Xn.randomBytes(Math.ceil(e/2));r=new DataView(i.buffer).getUint16(0,!1)%s}while(r>n)}else{const s=Math.pow(10,10);do{const i=Xn.randomBytes(4);r=new DataView(i.buffer).getUint32(0,!1)%s}while(r>n)}return r.toString().padStart(e,"0")}}const Dt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Wn(){if(Dt&&typeof Dt.subtle=="object"&&Dt.subtle!=null)return Dt.subtle;throw new Error("crypto.subtle must be defined")}var wt=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(u){u(i)})}return new(n||(n=Promise))(function(i,u){function o(E){try{p(r.next(E))}catch(l){u(l)}}function d(E){try{p(r.throw(E))}catch(l){u(l)}}function p(E){E.done?i(E.value):s(E.value).then(o,d)}p((r=r.apply(t,e||[])).next())})},La=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Mt=96,Pi=[128,192,256],Pt=[96,104,112,120,128];class Pa{static bytesToPrivateKey(e){return wt(this,arguments,void 0,function*({privateKeyBytes:n}){const r={k:de.uint8Array(n).toBase64Url(),kty:"oct"};return r.kid=yield nt({jwk:r}),r})}static decrypt(e){return wt(this,arguments,void 0,function*({key:n,data:r,iv:s,additionalData:i,tagLength:u}){if(s.byteLength!==Mt/8)throw new TypeError(`The initialization vector must be ${Mt} bits in length`);if(u&&!Pt.includes(u))throw new RangeError(`The tag length is invalid: Must be ${Pt.join(", ")} bits`);const o=Wn(),d=yield o.importKey("jwk",n,{name:"AES-GCM"},!0,["decrypt"]),p=Object.assign(Object.assign({name:"AES-GCM",iv:s},u&&{tagLength:u}),i&&{additionalData:i}),E=yield o.decrypt(p,d,r);return new Uint8Array(E)})}static encrypt(e){return wt(this,arguments,void 0,function*({data:n,iv:r,key:s,additionalData:i,tagLength:u}){if(r.byteLength!==Mt/8)throw new TypeError(`The initialization vector must be ${Mt} bits in length`);if(u&&!Pt.includes(u))throw new RangeError(`The tag length is invalid: Must be ${Pt.join(", ")} bits`);const o=Wn(),d=yield o.importKey("jwk",s,{name:"AES-GCM"},!0,["encrypt"]),p=Object.assign(Object.assign({name:"AES-GCM",iv:r},u&&{tagLength:u}),i&&{additionalData:i}),E=yield o.encrypt(p,d,n);return new Uint8Array(E)})}static generateKey(e){return wt(this,arguments,void 0,function*({length:n}){if(!Pi.includes(n))throw new RangeError(`The key length is invalid: Must be ${Pi.join(", ")} bits`);const r=Wn(),s=yield r.generateKey({name:"AES-GCM",length:n},!0,["encrypt"]),i=yield r.exportKey("jwk",s),{ext:u,key_ops:o}=i,d=La(i,["ext","key_ops"]);return d.kid=yield nt({jwk:d}),d})}static privateKeyToBytes(e){return wt(this,arguments,void 0,function*({privateKey:n}){if(!Oa(n))throw new Error("AesGcm: The provided key is not a valid oct private key.");return de.base64Url(n.k).toUint8Array()})}}var Ba=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(u){u(i)})}return new(n||(n=Promise))(function(i,u){function o(E){try{p(r.next(E))}catch(l){u(l)}}function d(E){try{p(r.throw(E))}catch(l){u(l)}}function p(E){E.done?i(E.value):s(E.value).then(o,d)}p((r=r.apply(t,e||[])).next())})};class Ua{static deriveKey(e){return Ba(this,arguments,void 0,function*({hash:n,password:r,salt:s,iterations:i,length:u}){const o=yield Hn.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveBits"]),d=yield Hn.subtle.deriveBits({name:"PBKDF2",hash:n,salt:s,iterations:i},o,u);return new Uint8Array(d)})}}export{Pa as A,Xn as C,Ua as P,Me as S,At as b};
