const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WalletPane-aycxeanK.js","assets/react-C27rl8UZ.js","assets/ccc-C6OZp4C3.js","assets/crypto-CzeFfIDu.js"])))=>i.map(i=>d[i]);
import{a as c,j as e,b as T,B as ne,c as le,d as oe,e as ie}from"./react-C27rl8UZ.js";import{S as A,b as ce,C as _,P as F,A as C}from"./crypto-CzeFfIDu.js";import{C as M,d as J,P as de,u as me,e as ue,f as xe}from"./ccc-C6OZp4C3.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&d(r)}).observe(document,{childList:!0,subtree:!0});function u(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function d(a){if(a.ep)return;a.ep=!0;const l=u(a);fetch(a.href,l)}})();const be="modulepreload",pe=function(s){return"/"+s},$={},he=function(n,u,d){let a=Promise.resolve();if(u&&u.length>0){let r=function(b){return Promise.all(b.map(x=>Promise.resolve(x).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),f=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));a=r(u.map(b=>{if(b=pe(b),b in $)return;$[b]=!0;const x=b.endsWith(".css"),g=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${g}`))return;const p=document.createElement("link");if(p.rel=x?"stylesheet":be,x||(p.as="script"),p.crossOrigin="",p.href=b,f&&p.setAttribute("nonce",f),document.head.appendChild(p),x)return new Promise((N,w)=>{p.addEventListener("load",N),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${b}`)))})}))}function l(r){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=r,window.dispatchEvent(m),!m.defaultPrevented)throw r}return a.then(r=>{for(const m of r||[])m.status==="rejected"&&l(m.reason);return n().catch(l)})},D="web5_signing_key",K={getKey(){try{const s=localStorage.getItem(D);return s?JSON.parse(s):null}catch{return null}},setKey(s){try{localStorage.setItem(D,JSON.stringify(s))}catch{throw new Error("Failed to save key data")}},removeKey(){try{localStorage.removeItem(D)}catch{throw new Error("Failed to remove key data")}},hasKey(){return localStorage.getItem(D)!==null}},ge=({onKeyChange:s})=>{const[n,u]=c.useState(null),[d,a]=c.useState(!1),[l,r]=c.useState({type:null,message:""}),[m,f]=c.useState(!1),[b,x]=c.useState(!1),[g,p]=c.useState(null),[N,w]=c.useState(""),[B,O]=c.useState(null),[q,W]=c.useState(!1),[z,L]=c.useState(!1);c.useEffect(()=>{const t=K.getKey();t&&(u(t),s==null||s(t))},[s]);const G=async()=>{a(!0),r({type:null,message:""});try{const t=await A.generateKey(),o=await A.getPublicKey({key:t}),i=await A.privateKeyToBytes({privateKey:t}),y=await A.publicKeyToBytes({publicKey:o}),h=await A.compressPublicKey({publicKeyBytes:y}),S=Array.from(i).map(v=>v.toString(16).padStart(2,"0")).join(""),k=Array.from(h).map(v=>v.toString(16).padStart(2,"0")).join(""),j={privateKey:S,publicKey:k,createdAt:new Date().toISOString()};K.setKey(j),u(j),s==null||s(j),r({type:"success",message:"å¯†é’¥åˆ›å»ºæˆåŠŸï¼ˆsecp256k1ï¼‰ï¼"})}catch{r({type:"error",message:"å¯†é’¥åˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•"})}finally{a(!1)}},V=()=>{a(!0);try{K.removeKey(),u(null),s==null||s(null),f(!1),r({type:"warning",message:"å¯†é’¥å·²åˆ é™¤"})}catch{r({type:"error",message:"å¯†é’¥åˆ é™¤å¤±è´¥"})}finally{a(!1)}},Y=async()=>{if(n)try{await navigator.clipboard.writeText(n.publicKey),W(!0),setTimeout(()=>W(!1),2e3)}catch{r({type:"error",message:"å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶"})}},Q=async()=>{if(!n)return;const t=U(n.publicKey);if(t)try{await navigator.clipboard.writeText(t),L(!0),setTimeout(()=>L(!1),2e3)}catch{r({type:"error",message:"å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶"})}},X=async t=>{if(!n){r({type:"error",message:"æ²¡æœ‰å¯å¯¼å‡ºçš„å¯†é’¥"});return}if(!t||t.length<8){r({type:"error",message:"å¯†ç æ— æ•ˆï¼Œè‡³å°‘8ä½"});return}try{a(!0);const o=_.randomBytes(16),i=_.randomBytes(12),y=await F.deriveKey({hash:"SHA-256",password:new TextEncoder().encode(t),salt:o,iterations:1e5,length:256}),h=await C.bytesToPrivateKey({privateKeyBytes:y}),S=new TextEncoder().encode(JSON.stringify(n)),k=await C.encrypt({key:h,data:S,iv:i}),j={version:1,kdf:{algo:"PBKDF2",hash:"SHA-256",iterations:1e5},iv:Array.from(i),salt:Array.from(o),data:Array.from(k),createdAt:n.createdAt},v=new Blob([JSON.stringify(j)],{type:"application/json"}),I=URL.createObjectURL(v),P=document.createElement("a"),E=new Date(n.createdAt).toISOString().replace(/[:.]/g,"-");P.href=I,P.download=`web5-signing-key-${E}.json`,P.click(),URL.revokeObjectURL(I),r({type:"success",message:"å¯¼å‡ºæˆåŠŸï¼Œå·²ä¸‹è½½åŠ å¯†æ–‡ä»¶"})}catch{r({type:"error",message:"å¯¼å‡ºå¤±è´¥ï¼Œè¯·é‡è¯•"})}finally{a(!1)}},Z=async(t,o)=>{var i;try{const y=await t.text(),h=JSON.parse(y);if(!o){r({type:"error",message:"æœªæä¾›å¯†ç ï¼Œå¯¼å…¥å–æ¶ˆ"});return}const S=new Uint8Array(h.iv),k=new Uint8Array(h.salt),j=new Uint8Array(h.data),v=await F.deriveKey({hash:"SHA-256",password:new TextEncoder().encode(o),salt:k,iterations:((i=h.kdf)==null?void 0:i.iterations)??1e5,length:256}),I=await C.bytesToPrivateKey({privateKeyBytes:v}),P=await C.decrypt({key:I,data:j,iv:S}),E=JSON.parse(new TextDecoder().decode(P));if(K.hasKey()&&!window.confirm("å·²å­˜åœ¨ç­¾åå¯†é’¥ï¼Œç»§ç»­å¯¼å…¥ä¼šè¦†ç›–ç°æœ‰å†…å®¹ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ")){r({type:"warning",message:"å¯¼å…¥å·²å–æ¶ˆ"});return}K.setKey(E),u(E),s==null||s(E),r({type:"success",message:"å¯¼å…¥æˆåŠŸï¼Œå·²åŠ è½½å¯†é’¥"})}catch{r({type:"error",message:"å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¯†ç æˆ–æ–‡ä»¶å†…å®¹"})}},ee=()=>{p("export"),w(""),x(!0)},R=t=>{O(t),p("import"),w(""),x(!0)},te=async()=>{const t=N.trim();g==="export"?(await X(t),x(!1)):g==="import"&&B&&(await Z(B,t),x(!1),O(null))},se=()=>{x(!1),O(null),p(null),w("")},re=()=>{switch(l.type){case"success":return"text-green-600 bg-green-50 border-green-200";case"error":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-orange-600 bg-orange-50 border-orange-200";default:return""}},ae=t=>{const o=t.startsWith("0x")?t.slice(2):t,i=o.length/2,y=new Uint8Array(i);for(let h=0;h<i;h++)y[h]=parseInt(o.substr(h*2,2),16);return y},U=t=>{try{const o=ae(t),i=new Uint8Array([231,1]),y=new Uint8Array(i.length+o.length);return y.set(i,0),y.set(o,i.length),`did:key:${ce.encode(y)}`}catch{return""}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ğŸ”"}),"å¯†é’¥ç®¡ç†"]}),l.type&&e.jsx("div",{className:`mb-4 p-3 rounded-lg border ${re()}`,children:l.message}),n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å…¬é’¥ (å¯å…¬å¼€åˆ†äº«)"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border font-mono text-sm break-all",children:n.publicKey}),e.jsx("button",{onClick:Y,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"å¤åˆ¶å…¬é’¥"}),q&&e.jsx("div",{className:"mt-1 text-green-600 text-sm",children:"å·²å¤åˆ¶å…¬é’¥"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DID Key (base58-btc)"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border font-mono text-sm break-all",children:U(n.publicKey)}),e.jsx("button",{onClick:Q,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"å¤åˆ¶ DID Key"}),z&&e.jsx("div",{className:"mt-1 text-green-600 text-sm",children:"å·²å¤åˆ¶ DID Key"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:e.jsxs("p",{children:["åˆ›å»ºæ—¶é—´: ",new Date(n.createdAt).toLocaleString("zh-CN")]})}),e.jsxs("div",{className:"flex gap-3",children:[m?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:V,disabled:d,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"ç¡®è®¤åˆ é™¤"}),e.jsx("button",{onClick:()=>f(!1),disabled:d,className:"bg-gray-500 hover:bg-gray-600 disabled:bg-gray-400 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"å–æ¶ˆ"})]}):e.jsx("button",{onClick:()=>f(!0),disabled:d,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg",children:"åˆ é™¤å¯†é’¥"}),e.jsx("button",{onClick:ee,disabled:d,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg",children:"å¯¼å‡ºå¯†é’¥"}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("span",{className:"sr-only",children:"å¯¼å…¥å¯†é’¥"}),e.jsx("input",{type:"file",accept:"application/json",onChange:t=>{var i;const o=(i=t.target.files)==null?void 0:i[0];o&&R(o),t.currentTarget.value=""},className:"hidden",id:"import-key-file"}),e.jsx("button",{onClick:()=>{var t;return(t=document.getElementById("import-key-file"))==null?void 0:t.click()},disabled:d,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg",children:"å¯¼å…¥å¯†é’¥"})]})]}),m&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-800 font-medium mb-2",children:"âš ï¸ è­¦å‘Š"}),e.jsx("p",{className:"text-red-700 text-sm",children:"åˆ é™¤å¯†é’¥æ˜¯ä¸å¯é€†çš„æ“ä½œï¼åˆ é™¤åæ‚¨å°†æ— æ³•æ¢å¤æ­¤å¯†é’¥ï¼Œæ‰€æœ‰ç›¸å…³çš„æ•°å­—ç­¾åéƒ½å°†å¤±æ•ˆã€‚"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"æ‚¨è¿˜æ²¡æœ‰åˆ›å»ºç­¾åå¯†é’¥ã€‚è¯·é€‰æ‹©åˆ›å»ºæ–°çš„å¯†é’¥æˆ–å¯¼å…¥å·²æœ‰å¯†é’¥ã€‚"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[e.jsx("button",{onClick:G,disabled:d,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg",children:d?"ç”Ÿæˆä¸­...":"åˆ›å»ºå¯†é’¥"}),e.jsx("input",{type:"file",accept:"application/json",onChange:t=>{var i;const o=(i=t.target.files)==null?void 0:i[0];o&&R(o),t.currentTarget.value=""},className:"hidden",id:"import-key-file-empty"}),e.jsx("button",{onClick:()=>{var t;return(t=document.getElementById("import-key-file-empty"))==null?void 0:t.click()},disabled:d,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg",children:"å¯¼å…¥å¯†é’¥"})]})]}),b&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40"}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4 p-6",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-3",children:g==="export"?"è®¾ç½®å¯¼å‡ºæ–‡ä»¶å¯†ç ":"è¾“å…¥å¯¼å…¥æ–‡ä»¶å¯†ç "}),e.jsx("input",{type:"password",value:N,onChange:t=>w(t.target.value),placeholder:g==="export"?"è‡³å°‘ 8 ä½":"è¯·è¾“å…¥å¯†ç ",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[e.jsx("button",{onClick:se,disabled:d,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg border",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:te,disabled:d,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold py-2 px-4 rounded-lg",children:"ç¡®è®¤"})]}),g==="export"&&e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"ä¸ºç¡®ä¿å®‰å…¨ï¼Œå»ºè®®ä½¿ç”¨ 8 ä½ä»¥ä¸Šçš„å¼ºå¯†ç ã€‚"})]})]})]})},H=T.createContext(null),ye=()=>{const s=c.useContext(H);if(!s)throw new Error("useWallet must be used within WalletProvider");return s},fe=({children:s,network:n})=>{const{open:u,disconnect:d}=me(),a=ue(),[l,r]=c.useState(!1),[m,f]=c.useState(null),[b,x]=c.useState(null);c.useEffect(()=>{a&&(async()=>{const w=await a.getRecommendedAddress();f(w),r(!0);try{const B=await a.getBalance();x(xe(B))}catch{x(null)}})()},[a]);const g=c.useCallback(async()=>{await u()},[u]),p=c.useCallback(async()=>{try{await d()}catch{}r(!1),f(null),x(null)},[d]),N={isConnected:l,address:m,balance:b,network:n,connect:g,disconnect:p};return e.jsx(H.Provider,{value:N,children:s})},we=({children:s,network:n="testnet"})=>{const u=c.useMemo(()=>n==="mainnet"?new M:new J,[n]);return e.jsx(de,{defaultClient:u,clientOptions:[{name:"CKB Testnet",client:new J},{name:"CKB Mainnet",client:new M}],children:e.jsx(fe,{network:n,children:s})})},je=T.lazy(()=>he(()=>import("./WalletPane-aycxeanK.js"),__vite__mapDeps([0,1,2,3]))),ve=()=>{const s=r=>{},{isConnected:n,address:u,balance:d,connect:a,disconnect:l}=ye();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-700",children:[e.jsx("header",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:e.jsx("nav",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"text-white font-bold text-xl flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ğŸŒ"}),"Web5 Fans"]})})})}),e.jsx("section",{className:"py-16 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"æ¢ç´¢ Web5 çš„ä¸–ç•Œ"}),e.jsx("p",{className:"text-xl text-blue-100 mb-8 leading-relaxed",children:"äº†è§£å»ä¸­å¿ƒåŒ–èº«ä»½å’Œæ•°å­—ç­¾åçš„æ ¸å¿ƒæ¦‚å¿µï¼ŒæŒæ¡ Web5 æŠ€æœ¯çš„å®é™…åº”ç”¨"}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsx("button",{onClick:()=>{var r;return(r=document.getElementById("key-manager"))==null?void 0:r.scrollIntoView({behavior:"smooth"})},className:"bg-transparent border-2 border-white text-white font-semibold px-8 py-3 rounded-lg hover:bg-white hover:text-blue-800 transition-all duration-200",children:"å¯†é’¥ç®¡ç†"})})]})}),e.jsx("section",{className:"py-16 px-4 bg-white/5 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-white text-center mb-12",children:"Web5 è¦ç‚¹"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ğŸ”‘"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"æ•°å­—ç­¾å"}),e.jsx("p",{className:"text-blue-100",children:"ä½¿ç”¨ secp256k1 ç®—æ³•åˆ›å»ºå’Œç®¡ç†æ•°å­—ç­¾åå¯†é’¥ï¼Œç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œèº«ä»½éªŒè¯ã€‚"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ğŸ†”"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"å»ä¸­å¿ƒåŒ–èº«ä»½"}),e.jsx("p",{className:"text-blue-100",children:"åœ¨ä¸ä¾èµ–ä¸­å¿ƒåŒ–æœºæ„çš„æƒ…å†µä¸‹ç®¡ç†æ•°å­—èº«ä»½ã€‚"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ğŸ”’"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"å®‰å…¨å­˜å‚¨"}),e.jsx("p",{className:"text-blue-100",children:"åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­å®‰å…¨åœ°ç”Ÿæˆã€å­˜å‚¨å’Œç®¡ç†åŠ å¯†å¯†é’¥ã€‚"})]})]})]})}),e.jsx("section",{id:"key-manager",className:"py-16 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"å¯†é’¥ç®¡ç†å™¨"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ª Web5 æ•°å­—ç­¾åå¯†é’¥"})]}),e.jsx(ge,{onKeyChange:s}),e.jsx(T.Suspense,{fallback:e.jsx("div",{className:"text-blue-100 mt-4",children:"åŠ è½½é’±åŒ…æ¨¡å—..."}),children:e.jsx(je,{})})]})}),e.jsx("footer",{className:"bg-black/20 backdrop-blur-sm py-8 px-4",children:e.jsx("div",{className:"max-w-6xl mx-auto text-center",children:e.jsx("p",{className:"text-blue-200",children:"Â© 2025 Web5 Fans - æ¢ç´¢ Web5 çš„ä¸–ç•Œ"})})})]})};function Ne(){return e.jsx(we,{children:e.jsx(ne,{children:e.jsx(le,{children:e.jsx(oe,{path:"/",element:e.jsx(ve,{})})})})})}ie.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(Ne,{})}));export{he as _};
